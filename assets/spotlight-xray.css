/* =============================================================================
   SPOTLIGHT X-RAY EFFECT
   Reveals scrolling algorithm code through a cursor-following spotlight
   ============================================================================= */

/* The algorithm layer - sits on top, only visible through spotlight */
.xray-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 10;
  overflow: hidden;

  /* Spotlight mask - follows cursor via CSS variables */
  --spotlight-x: 50%;
  --spotlight-y: 50%;
  --spotlight-size: 0px;

  clip-path: circle(var(--spotlight-size) at var(--spotlight-x) var(--spotlight-y));
  -webkit-clip-path: circle(var(--spotlight-size) at var(--spotlight-x) var(--spotlight-y));

  /* Smooth transitions for size changes */
  transition: clip-path 0.1s ease-out, -webkit-clip-path 0.1s ease-out;

  /* Dark overlay with slight transparency */
  background: radial-gradient(
    circle at var(--spotlight-x) var(--spotlight-y),
    rgba(5, 10, 20, 0.92) 0%,
    rgba(5, 10, 20, 0.97) 100%
  );
}

/* Active state when hovering hero */
.xray-layer.active {
  --spotlight-size: 180px;
}

/* Glow ring around spotlight edge */
.xray-layer::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle 200px at var(--spotlight-x) var(--spotlight-y),
    transparent 150px,
    rgba(0, 212, 255, 0.15) 170px,
    rgba(0, 212, 255, 0.05) 190px,
    transparent 220px
  );
  pointer-events: none;
}

/* Scrolling code container */
.xray-code-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  gap: 60px;
  padding: 20px;
  overflow: hidden;
}

/* Individual code column */
.xray-code-column {
  flex: 1;
  display: flex;
  flex-direction: column;
  animation: scrollCodeUp var(--scroll-duration, 30s) linear infinite;
  font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
  font-size: 11px;
  line-height: 1.6;
  color: rgba(0, 212, 255, 0.7);
  white-space: pre;
  text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
}

.xray-code-column:nth-child(2) {
  animation-duration: 35s;
  animation-delay: -10s;
  color: rgba(0, 255, 170, 0.6);
  text-shadow: 0 0 10px rgba(0, 255, 170, 0.4);
}

.xray-code-column:nth-child(3) {
  animation-duration: 28s;
  animation-delay: -5s;
  color: rgba(150, 120, 255, 0.6);
  text-shadow: 0 0 10px rgba(150, 120, 255, 0.4);
}

.xray-code-column:nth-child(4) {
  animation-duration: 32s;
  animation-delay: -15s;
  color: rgba(255, 180, 100, 0.5);
  text-shadow: 0 0 10px rgba(255, 180, 100, 0.3);
}

@keyframes scrollCodeUp {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(-50%);
  }
}

/* Code line styling */
.xray-code-line {
  padding: 2px 0;
  opacity: 0.8;
}

.xray-code-line.comment {
  color: rgba(100, 120, 140, 0.6);
}

.xray-code-line.keyword {
  color: rgba(255, 120, 180, 0.8);
}

.xray-code-line.function {
  color: rgba(100, 220, 255, 0.9);
}

.xray-code-line.number {
  color: rgba(180, 255, 180, 0.8);
}

/* Floating data points */
.xray-data-float {
  position: absolute;
  font-family: 'SF Mono', monospace;
  font-size: 10px;
  color: rgba(0, 212, 255, 0.4);
  animation: floatData 8s ease-in-out infinite;
  pointer-events: none;
}

@keyframes floatData {
  0%, 100% {
    transform: translateY(0) translateX(0);
    opacity: 0.3;
  }
  50% {
    transform: translateY(-20px) translateX(10px);
    opacity: 0.6;
  }
}

/* Scan line effect */
.xray-scanline {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 2px;
  background: linear-gradient(90deg,
    transparent,
    rgba(0, 212, 255, 0.3),
    rgba(0, 212, 255, 0.6),
    rgba(0, 212, 255, 0.3),
    transparent
  );
  animation: scanDown 4s linear infinite;
  pointer-events: none;
}

@keyframes scanDown {
  0% {
    top: -2px;
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    top: 100%;
    opacity: 0;
  }
}

/* Mobile: disable effect (too hard to use without hover) */
@media (max-width: 768px) {
  .xray-layer {
    display: none;
  }
}

/* Reduced motion: disable animations */
@media (prefers-reduced-motion: reduce) {
  .xray-code-column {
    animation: none;
  }
  .xray-scanline {
    display: none;
  }
  .xray-data-float {
    animation: none;
  }
}
