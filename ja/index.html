<!doctype html>
<html lang="ja" dir="ltr" data-theme="dark">
<head>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Prevent aggressive caching on mobile browsers -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <title>Signal Pilot — ノンリペイント TradingView インジケーター</title>

  <meta name="description" content="TradingView向けプロフェッショナル・サイクル検出。Pentarch™が完全なマーケットサイクルをマッピング（TD→IGN→WRN→CAP→BDN）。ノンリペイント保証、監査済み。7日間返金保証。">

  <!-- Enhanced SEO -->
  <meta name="keywords" content="TradingView インジケーター、ノンリペイント インジケーター、ペンターク、マーケットサイクル インジケーター、TD Sequential、トレーディングシグナル、株式インジケーター">
  <meta name="author" content="Signal Pilot Labs">
  <link rel="author" href="https://www.signalpilot.io">

  <!-- Geo targeting -->
  <meta name="geo.region" content="US">
  <meta name="geo.placename" content="United States">

  <!-- Ratings/Reviews -->
  <meta name="rating" content="general">
  <meta name="revisit-after" content="7 days">

  <link rel="canonical" href="https://www.signalpilot.io/ja/">

  <!-- Hreflang tags for language versions -->
  <link rel="alternate" hreflang="en" href="https://www.signalpilot.io/">
  <link rel="alternate" hreflang="ar" href="https://www.signalpilot.io/ar/">
  <link rel="alternate" hreflang="de" href="https://www.signalpilot.io/de/">
  <link rel="alternate" hreflang="es" href="https://www.signalpilot.io/es/">
  <link rel="alternate" hreflang="fr" href="https://www.signalpilot.io/fr/">
  <link rel="alternate" hreflang="hu" href="https://www.signalpilot.io/hu/">
  <link rel="alternate" hreflang="it" href="https://www.signalpilot.io/it/">
  <link rel="alternate" hreflang="ja" href="https://www.signalpilot.io/ja/">
  <link rel="alternate" hreflang="nl" href="https://www.signalpilot.io/nl/">
  <link rel="alternate" hreflang="pt-BR" href="https://www.signalpilot.io/pt/">
  <link rel="alternate" hreflang="ru" href="https://www.signalpilot.io/ru/">
  <link rel="alternate" hreflang="tr" href="https://www.signalpilot.io/tr/">
  <link rel="alternate" hreflang="x-default" href="https://www.signalpilot.io/">

  <meta name="robots" content="index,follow">

  <meta name="theme-color" content="#05070d">

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- iOS PWA Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Signal Pilot">



  <!-- Favicons -->

  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <link rel="icon" type="image/png" sizes="16x16" href="/monogram-square-favicon_16x16.png">

  <link rel="icon" type="image/png" sizes="32x32" href="/monogram-square-favicon_32x32.png">

  <link rel="apple-touch-icon" sizes="180x180" href="/monogram-square-favicon_180x180.png">

  <link rel="icon" type="image/png" sizes="192x192" href="/monogram-square-favicon_192x192.png">

  <link rel="icon" type="image/png" sizes="512x512" href="/monogram-square-favicon_512x512.png">



  <!-- OpenGraph / Twitter -->

  <meta property="og:site_name" content="Signal Pilot">

  <meta property="og:type" content="website">

  <meta property="og:title" content="Signal Pilot — ノンリペイント TradingView インジケーター">

  <meta property="og:description" content="TradingView向けプロフェッショナル・サイクル検出。Pentarch™が完全なマーケットサイクルをマッピング。ノンリペイント保証、監査済み。7日間返金保証。">

  <meta property="og:url" content="https://www.signalpilot.io/ja/">

  <meta property="og:image" content="https://www.signalpilot.io/preview.png?v=1731035400">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Signal Pilot - 機関投資家レベルのインジケーター | ノンリペイント保証 • 全市場対応 • 7日間返金保証">

  <meta property="og:locale" content="ja_JP">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@signalpilot">
  <meta name="twitter:creator" content="@signalpilot">
  <meta name="twitter:title" content="Signal Pilot — ノンリペイント TradingView インジケーター">
  <meta name="twitter:description" content="TradingView向けプロフェッショナル・サイクル検出。Pentarch™が完全なマーケットサイクルをマッピング。ノンリペイント保証、監査済み。">
  <meta name="twitter:image" content="https://www.signalpilot.io/preview.png?v=1731035400">
  <meta name="twitter:image:alt" content="Signal Pilot - 機関投資家レベルのインジケーター | ノンリペイント保証 • 全市場対応 • 7日間返金保証">



  <!-- =======================================================================
       STRUCTURED DATA - Product Schema Markup for Rich Snippets
       ======================================================================= -->

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Product",
        "@id": "https://www.signalpilot.io/#monthly-plan",
        "name": "Signal Pilot Elite Seven - 月額プラン",
        "description": "Pentarch™サイクル検出機能を備えたTradingView向けプロフェッショナル・インジケーター。エリート7種類のインジケーターと今後のアップデートすべてを含む。100%ノンリペイント、監査済み。株式、暗号資産、FX、指数、コモディティに対応。",
        "brand": {
          "@type": "Brand",
          "name": "Signal Pilot Labs"
        },
        "category": "Software > Finance > Trading Tools",
        "image": "https://www.signalpilot.io/preview.png",
        "url": "https://www.signalpilot.io/#pricing",
        "offers": {
          "@type": "Offer",
          "price": "99.00",
          "priceCurrency": "USD",
          "priceValidUntil": "2026-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.signalpilot.io/#pricing",
          "priceSpecification": {
            "@type": "UnitPriceSpecification",
            "price": "99.00",
            "priceCurrency": "USD",
            "billingDuration": "P1M",
            "billingIncrement": "1"
          },
          "seller": {
            "@type": "Organization",
            "name": "Signal Pilot Labs"
          },
          "hasMerchantReturnPolicy": {
            "@type": "MerchantReturnPolicy",
            "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
            "merchantReturnDays": 7,
            "returnMethod": "https://schema.org/ReturnByMail",
            "returnFees": "https://schema.org/FreeReturn"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "bestRating": "5",
          "worstRating": "1",
          "ratingCount": "127"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "ノンリペイント",
            "value": "100%監査済み"
          },
          {
            "@type": "PropertyValue",
            "name": "含まれるインジケーター",
            "value": "7"
          },
          {
            "@type": "PropertyValue",
            "name": "対応市場",
            "value": "株式、暗号資産、FX、指数、コモディティ"
          },
          {
            "@type": "PropertyValue",
            "name": "サポート応答時間",
            "value": "48時間"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "https://www.signalpilot.io/#yearly-plan",
        "name": "Signal Pilot Elite Seven - 年間プラン（最もお得）",
        "description": "Pentarch™サイクル検出機能を備えたTradingView向けプロフェッショナル・インジケーター。年間$489の節約。エリート7種類のインジケーターと今後のアップデートすべてを含む。100%ノンリペイント、監査済み。優先サポートと上級トレーニングを含む。",
        "brand": {
          "@type": "Brand",
          "name": "Signal Pilot Labs"
        },
        "category": "Software > Finance > Trading Tools",
        "image": "https://www.signalpilot.io/preview.png",
        "url": "https://www.signalpilot.io/#pricing",
        "offers": {
          "@type": "Offer",
          "price": "699.00",
          "priceCurrency": "USD",
          "priceValidUntil": "2026-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.signalpilot.io/#pricing",
          "priceSpecification": {
            "@type": "UnitPriceSpecification",
            "price": "699.00",
            "priceCurrency": "USD",
            "billingDuration": "P1Y",
            "billingIncrement": "1"
          },
          "seller": {
            "@type": "Organization",
            "name": "Signal Pilot Labs"
          },
          "hasMerchantReturnPolicy": {
            "@type": "MerchantReturnPolicy",
            "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
            "merchantReturnDays": 7,
            "returnMethod": "https://schema.org/ReturnByMail",
            "returnFees": "https://schema.org/FreeReturn"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "bestRating": "5",
          "worstRating": "1",
          "ratingCount": "203"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "ノンリペイント",
            "value": "100%監査済み"
          },
          {
            "@type": "PropertyValue",
            "name": "含まれるインジケーター",
            "value": "7"
          },
          {
            "@type": "PropertyValue",
            "name": "対応市場",
            "value": "株式、暗号資産、FX、指数、コモディティ"
          },
          {
            "@type": "PropertyValue",
            "name": "サポート応答時間",
            "value": "24時間"
          },
          {
            "@type": "PropertyValue",
            "name": "年間節約額",
            "value": "$489"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "https://www.signalpilot.io/#lifetime-plan",
        "name": "Signal Pilot Elite Seven - ライフタイムアクセス（創設者限定100名）",
        "description": "ライフタイムアクセス付きTradingView向けプロフェッショナル・インジケーター。Pentarch™サイクル検出機能。エリート7種類のインジケーターと今後リリースされるすべてのバージョンを永久に利用可能。100%ノンリペイント、監査済み。プライベートDiscordコミュニティ、200以上のプリセット設定、ベータアクセス、優先サポート。",
        "brand": {
          "@type": "Brand",
          "name": "Signal Pilot Labs"
        },
        "category": "Software > Finance > Trading Tools",
        "image": "https://www.signalpilot.io/preview.png",
        "url": "https://www.signalpilot.io/#pricing",
        "offers": {
          "@type": "Offer",
          "price": "1799.00",
          "priceCurrency": "USD",
          "priceValidUntil": "2026-12-31",
          "availability": "https://schema.org/LimitedAvailability",
          "url": "https://www.signalpilot.io/#pricing",
          "eligibleQuantity": {
            "@type": "QuantitativeValue",
            "value": "350",
            "unitText": "利用可能な総枠"
          },
          "seller": {
            "@type": "Organization",
            "name": "Signal Pilot Labs"
          },
          "hasMerchantReturnPolicy": {
            "@type": "MerchantReturnPolicy",
            "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
            "merchantReturnDays": 7,
            "returnMethod": "https://schema.org/ReturnByMail",
            "returnFees": "https://schema.org/FreeReturn"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "5.0",
          "bestRating": "5",
          "worstRating": "1",
          "ratingCount": "89"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "ノンリペイント",
            "value": "100%監査済み"
          },
          {
            "@type": "PropertyValue",
            "name": "含まれるインジケーター",
            "value": "7"
          },
          {
            "@type": "PropertyValue",
            "name": "対応市場",
            "value": "株式、暗号資産、FX、指数、コモディティ"
          },
          {
            "@type": "PropertyValue",
            "name": "アクセスタイプ",
            "value": "ライフタイム"
          },
          {
            "@type": "PropertyValue",
            "name": "プライベートDiscord",
            "value": "はい"
          },
          {
            "@type": "PropertyValue",
            "name": "プリセット設定",
            "value": "200+"
          }
        ]
      },
      {
        "@type": "Organization",
        "@id": "https://www.signalpilot.io/#organization",
        "name": "Signal Pilot Labs",
        "url": "https://www.signalpilot.io",
        "logo": "https://www.signalpilot.io/preview.png",
        "description": "本格的なトレーダー向けのノンリペイントTradingViewインジケーターを提供。",
        "sameAs": [
          "https://twitter.com/signalpilot"
        ]
      },
      {
        "@type": "WebSite",
        "@id": "https://www.signalpilot.io/#website",
        "url": "https://www.signalpilot.io",
        "name": "Signal Pilot — ノンリペイント TradingView インジケーター",
        "description": "TradingView向けプロフェッショナル・サイクル検出。Pentarch™が完全なマーケットサイクルをマッピング。ノンリペイント保証、監査済み。7日間返金保証。",
        "publisher": {
          "@id": "https://www.signalpilot.io/#organization"
        }
      },
      {
        "@type": "SoftwareApplication",
        "@id": "https://www.signalpilot.io/#software",
        "name": "Signal Pilot Elite Seven",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web, TradingView Platform",
        "offers": [
          { "@id": "https://www.signalpilot.io/#monthly-plan" },
          { "@id": "https://www.signalpilot.io/#yearly-plan" },
          { "@id": "https://www.signalpilot.io/#lifetime-plan" }
        ],
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "bestRating": "5",
          "worstRating": "1",
          "ratingCount": "419"
        },
        "featureList": [
          "Pentarch™ 5フェーズサイクル検出（TD→IGN→WRN→CAP→BDN）",
          "OmniDeck オールインワン・オーバーレイ（10以上のシステムを統合）",
          "Volume Oracle 機関投資家フロー検出",
          "Plutus Flow 累積デルタリボン",
          "Janus Atlas マルチタイムフレームレベル",
          "Augury Grid 8銘柄ウォッチリスト",
          "Harmonic Oscillator 4システムタイミング",
          "100%ノンリペイント（監査済み）",
          "リアルタイムアラート",
          "バックテストテンプレート",
          "全市場対応：株式、暗号資産、FX、指数、コモディティ"
        ]
      }
    ]
  }
  </script>



  <!-- Analytics -->

  <link rel="preconnect" href="https://plausible.io">
  <link rel="dns-prefetch" href="https://plausible.io">

  <!-- Preconnect to analytics and tracking services -->
  <link rel="preconnect" href="https://www.clarity.ms">
  <link rel="preconnect" href="https://www.googletagmanager.com">

  <!-- Preconnect to subdomain resources -->
  <link rel="dns-prefetch" href="https://docs.signalpilot.io">
  <link rel="dns-prefetch" href="https://education.signalpilot.io">

  <script defer data-domain="signalpilot.io" src="https://plausible.io/js/script.js"></script>

  <!-- Microsoft Clarity & GA4 loaded via consent manager -->
  <!-- See: assets/cookie-consent.js -->

  <!-- Fonts: Space Grotesk (body/UI) + EB Garamond (headlines) + Gugi (brand) -->

  <!-- Preconnect to font providers for faster loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Load fonts with display=swap for better performance -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Gugi&family=EB+Garamond:wght@400;500;600&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">



  <!-- =======================================================================
       DESIGN TOKENS + LAYOUT
       ======================================================================= -->

  <style>


    :root{

      color-scheme: dark;

      /* Smooth theme transitions */
      transition:background-color 0.3s ease, color 0.3s ease;

      /* Base surface */

      --bg:#05070d;

      --bg-soft:#0c111c;

      --bg-elev:#101626;



      /* Typography */

      --text:#ecf1ff;

      --muted:#b7c2d9;

      --muted-2:#8ea0bf;



      /* Brand */

      --brand:#5b8aff;

      --brand-2:#7b9bff;

      --accent:#76ddff;



      /* Signals */

      --good:#3ed598;

      --warn:#f9a23c;



      /* UI */

      --radius:16px;

      --shadow:0 18px 60px rgba(12,16,27,.35);

      --max:1160px;

      --measure:68ch;



      /* Pretty gradient for headings */

      --grad:linear-gradient(90deg,#9cc0ff 0%,#86a8ff 35%,#7ccaff 60%,#8ca5ff 85%,#b9d4ff 100%);



      /* Grid lines overlay (subtle) */

      --grid-line:rgba(255,255,255,.08);

      /* Border (was missing in dark mode) */

      --border:rgba(255,255,255,.12);

    }



    html[data-theme="light"]{

      color-scheme: light;

      --bg:#ffffff;

      --bg-soft:#f8fafc;

      --bg-elev:#f1f5f9;

      --text:#0f172a;

      --muted:#475569;

      --muted-2:#334155;

      --brand:#3b82f6;

      --brand-2:#2563eb;

      --accent:#0ea5e9;

      --good:#10b981;

      --warn:#f97316;

      --border:rgba(30,41,59,.2);

      --grid-line:rgba(30,41,59,.06);

      /* Dark gradient for headings in light mode */
      --grad:linear-gradient(90deg,#1e40af 0%,#3b82f6 35%,#0ea5e9 60%,#2563eb 85%,#1e3a8a 100%);

    }

    /* LIGHT MODE: Fix ALL white/light text to be readable on white background */

    /* Base elements */
    html[data-theme="light"] body,
    html[data-theme="light"] p,
    html[data-theme="light"] span,
    html[data-theme="light"] div,
    html[data-theme="light"] li{
      color:#0f172a;
    }

    html[data-theme="light"] h1,
    html[data-theme="light"] h2,
    html[data-theme="light"] h3,
    html[data-theme="light"] h4,
    html[data-theme="light"] h5,
    html[data-theme="light"] h6{
      color:#0f172a !important;
    }

    html[data-theme="light"] .brand{
      color:#0f172a !important;
    }

    html[data-theme="light"] .punch{
      color:#0f172a !important;
    }

    /* Fix all white color variations */
    html[data-theme="light"] [style*="color:#fff"],
    html[data-theme="light"] [style*="color: #fff"],
    html[data-theme="light"] [style*="color:white"],
    html[data-theme="light"] [style*="color: white"],
    html[data-theme="light"] [style*="color:#ffffff"],
    html[data-theme="light"] [style*="color: #ffffff"],
    html[data-theme="light"] [style*="color:rgba(255,255,255"],
    html[data-theme="light"] [style*="color: rgba(255,255,255"]{
      color:#0f172a !important;
    }

    /* Fix all light hex colors that won't show on white */
    html[data-theme="light"] [style*="color:#ecf"],
    html[data-theme="light"] [style*="color:#e5e"],
    html[data-theme="light"] [style*="color:#b7c"],
    html[data-theme="light"] [style*="color:#8ea"]{
      color:#0f172a !important;
    }

    html[data-theme="light"] strong[style*="color:#fff"],
    html[data-theme="light"] strong[style*="color: #fff"],
    html[data-theme="light"] strong[style*="color:rgba(255,255,255"]{
      color:#0f172a !important;
    }

    /* Preserve white text on colored buttons */
    html[data-theme="light"] .btn-primary,
    html[data-theme="light"] .btn-primary *{
      color:#ffffff !important;
    }

    html[data-theme="light"] .mobile-nav-title,
    html[data-theme="light"] .mobile-nav-close{
      color:#0f172a !important;
    }

    html[data-theme="light"] .icon-wrap svg{
      color:#0f172a !important;
    }

    /* Aggressive catch-all for any remaining light text */
    html[data-theme="light"] nav a{
      color:#475569 !important;
    }

    html[data-theme="light"] nav a:hover,
    html[data-theme="light"] nav a:focus-visible{
      color:#0f172a !important;
    }

    /* Force all text to be dark in light mode (with exceptions) */
    html[data-theme="light"] *:not(.btn-primary):not(.btn-primary *):not(strong[style*="#3ed598"]):not(strong[style*="#76ddff"]):not(strong[style*="#f9a23c"]):not(strong[style*="#ff6b9d"]){
      color:inherit;
    }

    html[data-theme="light"]{
      color:#0f172a;
    }

    /* AGGRESSIVE FIX: All muted/grey text colors */
    html[data-theme="light"] [style*="color:var(--muted)"],
    html[data-theme="light"] [style*="color: var(--muted)"],
    html[data-theme="light"] [style*="color:var(--muted-2)"],
    html[data-theme="light"] [style*="color: var(--muted-2)"],
    html[data-theme="light"] .note,
    html[data-theme="light"] p[style*="color:var(--muted)"],
    html[data-theme="light"] span[style*="color:var(--muted)"],
    html[data-theme="light"] div[style*="color:var(--muted)"] {
      color:#475569 !important;
    }

    /* Fix all var(--text) to ensure they're dark */
    html[data-theme="light"] [style*="color:var(--text)"],
    html[data-theme="light"] [style*="color: var(--text)"] {
      color:#0f172a !important;
    }

    /* Fix specific light color hex codes */
    html[data-theme="light"] [style*="color:#b7c2d9"],
    html[data-theme="light"] [style*="color:#8ea0bf"],
    html[data-theme="light"] [style*="color:#ecf1ff"] {
      color:#475569 !important;
    }

    /* FIX GRADIENT TEXT FOR LIGHT MODE - Critical for readability */
    html[data-theme="light"] .headline {
      background: linear-gradient(135deg, #1e40af, #7c3aed) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix all green gradient text (success/guarantee messages) */
    html[data-theme="light"] strong[style*="linear-gradient(135deg,#3ed598"],
    html[data-theme="light"] span[style*="linear-gradient(135deg,#3ed598"] {
      background: linear-gradient(135deg, #059669, #047857) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix all orange gradient text (pricing/CTA) */
    html[data-theme="light"] strong[style*="linear-gradient(135deg,#f9a23c"],
    html[data-theme="light"] span[style*="linear-gradient(135deg,#f9a23c"] {
      background: linear-gradient(135deg, #c2410c, #ea580c) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix brand gradient text (Signal Pilot logo/branding) */
    html[data-theme="light"] span[style*="linear-gradient(135deg,#5b8aff"] {
      background: linear-gradient(135deg, #1e40af, #6b21a8) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* ==================== LIGHT MODE GORGEOUS EFFECTS ==================== */

    /* Keyframe animations for light mode backgrounds */
    @keyframes orbFloat {
      0%, 100% {
        background:
          radial-gradient(circle 900px at 20% 30%, rgba(59, 130, 246, 0.22), transparent 60%),
          radial-gradient(circle 700px at 80% 70%, rgba(168, 85, 247, 0.18), transparent 60%),
          radial-gradient(circle 800px at 50% 50%, rgba(14, 165, 233, 0.15), transparent 60%),
          #ffffff;
      }
      50% {
        background:
          radial-gradient(circle 900px at 30% 40%, rgba(59, 130, 246, 0.27), transparent 60%),
          radial-gradient(circle 700px at 70% 60%, rgba(168, 85, 247, 0.23), transparent 60%),
          radial-gradient(circle 800px at 60% 40%, rgba(14, 165, 233, 0.20), transparent 60%),
          #ffffff;
      }
    }

    @keyframes particleFloat {
      0% { transform: translateY(0) translateX(0); }
      50% { transform: translateY(-20px) translateX(10px); }
      100% { transform: translateY(0) translateX(0); }
    }

    /* Subtle grid overlay for light mode */
    html[data-theme="light"]::before {
      content: '';
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      background-image:
        linear-gradient(rgba(59, 130, 246, 0.09) 1px, transparent 1px),
        linear-gradient(90deg, rgba(59, 130, 246, 0.09) 1px, transparent 1px);
      background-size: 50px 50px;
      opacity: 0.9;
    }

    /* Enhanced cards in light mode */
    html[data-theme="light"] .card {
      box-shadow: 0 4px 20px rgba(59, 130, 246, 0.08) !important;
      border: 1px solid rgba(59, 130, 246, 0.12) !important;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.6)) !important;
      backdrop-filter: blur(10px);
    }

    html[data-theme="light"] .card:hover {
      box-shadow: 0 12px 40px rgba(59, 130, 246, 0.15) !important;
      border-color: rgba(59, 130, 246, 0.3) !important;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.8)) !important;
    }



    *{box-sizing:border-box}

    body {
      top: 0 !important;
      position: relative !important;
    }

    font {
      font-size: inherit !important;
      line-height: inherit !important;
    }

    /* Specific adjustments for different text sizes */
    h1 font, h2 font, h3 font, .headline font {
      font-size: inherit !important;
    }

    p font, li font, div font {
      font-size: inherit !important;
    }

    .btn font, button font, a font {
      font-size: inherit !important;
    }

    /* CRITICAL: Force font/span wrappers to not block clicks */
    nav[aria-label="Main"] font,
    nav[aria-label="Main"] span:not(.mobile-nav-title),
    .lang-dropdown font,
    .lang-dropdown span,
    .lang-dropdown-menu font,
    .lang-dropdown-menu span,
    .menu-toggle font,
    .menu-toggle span,
    #langToggle font,
    #langToggle span,
    .nav-dropdown font,
    .nav-dropdown span,
    button font,
    button span,
    .btn font,
    .btn span {
      pointer-events: none !important;
      color: inherit !important;
      background: transparent !important;
      font-family: inherit !important;
      font-size: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
      display: inline !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    /* Ensure clickable elements always work */
    nav[aria-label="Main"] a,
    nav[aria-label="Main"] button,
    .lang-dropdown button,
    .lang-dropdown-menu button,
    .menu-toggle,
    #langToggle,
    #menuToggle,
    .mobile-nav-close {
      pointer-events: auto !important;
      cursor: pointer !important;
    }

    /* Fix header squeezing */
    header .container,
    header .nav {
      min-width: 0 !important;
      flex-shrink: 0 !important;
    }

    header .brand {
      flex-shrink: 0 !important;
      min-width: auto !important;
      white-space:nowrap !important;
    }

    header nav[aria-label="Main"] {
      flex-shrink: 1 !important;
      min-width: 0 !important;
    }

    /* Prevent all header buttons and text from wrapping */
    header button,
    header a,
    .menu-toggle,
    #langToggle,
    #themeToggle,
    .btn {
      white-space:nowrap !important;
      flex-shrink:0 !important;
    }

    /* Prevent horizontal scroll */
    body{
      overflow-x:hidden;
      position:relative;
      /* Smooth theme transitions */
      transition:background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Smooth transitions for all theme-dependent elements */
    header,
    .card,
    .btn,
    nav a{
      transition:all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Scroll progress indicator */
    .scroll-progress{
      position:fixed;
      top:0;
      left:0;
      width:0%;
      height:3px;
      background:linear-gradient(90deg,var(--brand),var(--accent));
      z-index:10000;
      transition:width 0.1s ease-out;
    }

    /* MOBILE: Simple, clean mobile setup - NO forced positioning */
    @media (max-width: 768px) {
      /* Background layers BEHIND everything */
      .bg-stars {
        z-index: -3 !important;
        position: fixed !important;
      }
      .sp-constellations {
        z-index: 1 !important;
        position: fixed !important;
      }

      /* Header needs high z-index for dropdown menus */
      header {
        position: relative;
        z-index: 100;
        overflow-x: hidden !important;
        max-width: 100vw !important;
      }

      /* Prevent header content from overflowing on mobile with translated text */
      header .container.nav {
        max-width: 100vw !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }

      /* Ensure header buttons adapt to smaller text when necessary */
      header .btn,
      header #langToggle,
      header #themeToggle {
        font-size: .8rem !important;
        padding: .4rem .6rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        flex-shrink: 1 !important;
      }

      /* Language button - allow slight shrinking if needed */
      header #langToggle span {
        max-width: 30px !important;
        overflow: hidden !important;
        text-overflow: clip !important;
      }

      /* CTA button - ensure it doesn't overflow */
      header .cta-header {
        max-width: 140px !important;
        font-size: .75rem !important;
        padding: .5rem .7rem !important;
        text-overflow: ellipsis !important;
        overflow: hidden !important;
      }

      /* Reduce animations for performance - but don't kill them entirely */
      *, *::before, *::after {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
      }

      /* Ensure modals can still animate */
      #cookie-preferences-modal,
      .sp-chatbot-window,
      .mobile-nav,
      [id*="modal"] {
        animation-duration: 0.3s !important;
        transition-duration: 0.3s !important;
      }
    }

    img, video, iframe{
      max-width:100%;
      height:auto;
    }

    /* Prevent long words/URLs from breaking layout */
    p, li, td, th, div{
      word-wrap:break-word;
      overflow-wrap:break-word;
      word-break:break-word;
    }

    /* Don't break words in headings unless necessary */
    h1, h2, h3, h4, h5, h6{
      word-wrap:break-word;
      overflow-wrap:break-word;
    }
    
    /* Ensure main content is above background layers */
    main{
      position:relative;
      min-height:100vh;
      z-index:1;
      background:transparent !important; /* Let constellations show through! */
    }

    /* Make all sections transparent so constellations are visible throughout entire site */
    section, .section {
      background:transparent !important;
    }

    /* Override any inline background styles on sections */
    section[style*="background"] {
      background:transparent !important;
    }
    
    /* Prevent any overflow issues on mobile */

    @media (max-width:768px){
      body, main{
        overflow-x:hidden !important;
      }
      
      main{
        width:100%;
        display:block;
      background:transparent !important; /* Let particles show through on mobile! */
      }

      /* Force all sections transparent on mobile so particles show through */
      section, .section {
        background:transparent !important;
      }
    }
    
    /* Removed reveal animations - not needed */



    html,body{

      margin:0;

      color:var(--text);

      font-family:"Space Grotesk", "Noto Sans JP", "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", "Meiryo", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;

      font-size:clamp(16px,0.9vw + 12px,18px);

      line-height:1.8;

      letter-spacing:.01em;

      -webkit-text-size-adjust:100%;

      overflow-x:hidden;

      background:transparent; /* Let particles/aurora/bg-stars show through! */

      isolation:isolate;

      /* Smooth scrolling */
      scroll-behavior:smooth;

      /* Better touch scrolling on iOS */
      -webkit-overflow-scrolling:touch;

      /* Performance optimizations */
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      text-rendering:optimizeLegibility;

    }



    /* Background: gradient + lattice under everything */

    body::before{

      content:"";

      position:fixed;

      inset:0;

      z-index:-4;

      pointer-events:none;

      background:

        radial-gradient(1200px 700px at -6% -8%, rgba(130,185,255,.18), transparent 60%),

        radial-gradient(1100px 660px at 108% -10%, rgba(155,140,255,.18), transparent 62%),

        radial-gradient(1200px 700px at 52% 118%, rgba(118,221,255,.12), transparent 64%),

        var(--bg);

    }



    html[data-theme="light"] body::before{

      background:

        radial-gradient(circle 900px at 20% 30%, rgba(59, 130, 246, 0.22), transparent 60%),

        radial-gradient(circle 700px at 80% 70%, rgba(168, 85, 247, 0.18), transparent 60%),

        radial-gradient(circle 800px at 50% 50%, rgba(14, 165, 233, 0.15), transparent 60%),

        #ffffff;

      animation: orbFloat 20s ease-in-out infinite;

    }



    body::after{

      content:"";

      position:fixed;

      inset:0;

      z-index:-3;

      pointer-events:none;

      opacity:.18;

      background-image:

        linear-gradient(transparent 31px, var(--grid-line) 32px, transparent 33px),

        linear-gradient(90deg, transparent 31px, var(--grid-line) 32px, transparent 33px);

      background-size:64px 64px;

    }

    html[data-theme="light"] body::after{
      opacity:.38;
      background-image:
        radial-gradient(2px 2px at 15% 25%, #3b82f6, transparent 50%),
        radial-gradient(3px 3px at 85% 15%, #a855f7, transparent 50%),
        radial-gradient(2px 2px at 45% 75%, #0ea5e9, transparent 50%),
        radial-gradient(3px 3px at 70% 85%, #8b5cf6, transparent 50%),
        radial-gradient(2px 2px at 25% 60%, #3b82f6, transparent 50%),
        radial-gradient(2px 2px at 90% 50%, #06b6d4, transparent 50%),
        linear-gradient(transparent 31px, rgba(59, 130, 246, 0.12) 32px, transparent 33px),
        linear-gradient(90deg, transparent 31px, rgba(59, 130, 246, 0.12) 32px, transparent 33px);
      background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 64px 64px, 64px 64px;
      animation: particleFloat 30s linear infinite;
    }



    /* bg-aurora CSS REMOVED - element disabled, using video background instead */

    @keyframes pricingGlow{
      0%,100%{box-shadow:0 0 40px rgba(91,138,255,.2),0 0 80px rgba(91,138,255,.1);transform:scale(1.05)}
      50%{box-shadow:0 0 60px rgba(91,138,255,.4),0 0 120px rgba(91,138,255,.2);transform:scale(1.05)}
    }

    @keyframes badgePulse{
      0%,100%{transform:translateX(-50%) scale(1);box-shadow:0 4px 16px rgba(249,162,60,.5)}
      50%{transform:translateX(-50%) scale(1.05);box-shadow:0 6px 24px rgba(249,162,60,.7)}
    }

    @keyframes floatOrb1{
      0%,100%{transform:translate(0,0) scale(1)}
      33%{transform:translate(30px,-30px) scale(1.1)}
      66%{transform:translate(-20px,20px) scale(0.9)}
    }

    @keyframes floatOrb2{
      0%,100%{transform:translate(0,0) scale(1)}
      50%{transform:translate(-40px,-20px) scale(1.15)}
    }

    @keyframes blink{
      0%,49%{opacity:1}
      50%,100%{opacity:0}
    }

    /* Micro-interactions: Loading spinner */
    @keyframes spin{
      to{transform:rotate(360deg)}
    }

    .spinner{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,0.3);border-top-color:var(--brand);border-radius:50%;animation:spin 0.8s linear infinite}

    /* Micro-interactions: Success checkmark pop */
    @keyframes checkPop{
      0%{transform:scale(0);opacity:0}
      50%{transform:scale(1.2)}
      100%{transform:scale(1);opacity:1}
    }

    .success-check{animation:checkPop 0.4s cubic-bezier(0.4, 0, 0.2, 1)}

    /* Tablet optimizations */
    @media (max-width:1024px){
      /* Reduce parallax intensity on tablets */
      #parallax-orb-1,#parallax-orb-2{opacity:0.7}

      /* Better text wrapping for Japanese on tablets */
      h1, h2, h3{word-break:normal;overflow-wrap:break-word;hyphens:none}

      /* Ensure navigation items have adequate spacing */
      nav ul{gap:.7rem}

      /* Optimize button text for Japanese */
      .btn{min-height:48px;padding:.8rem 1.15rem}
    }

    @media (max-width:768px){
      /* Prevent horizontal overflow on mobile */
      body,html{overflow-x:hidden !important;max-width:100vw}

      /* Product cards - optimize button layout for tablets */
      .card.product .btn-sm {
        font-size: .9rem;
        padding: .55rem .8rem;
        min-height: 42px;
      }

      /* Navigation menu - ensure proper alignment on tablets */
      nav ul {
        gap: .7rem !important;
      }

      nav li {
        display: flex;
        align-items: center;
      }

      /* Allow hero text to wrap on mobile */
      #hero-description{white-space:normal !important;font-size:1rem !important;padding:0 1rem;max-width:100%;overflow-wrap:break-word;word-break:break-word}

      /* Reduce typing text on mobile */
      #typed-text{font-size:0.95rem !important}

      /* Fix signal legend items wrapping on mobile */
      div[style*="white-space:nowrap"]{white-space:normal !important;word-wrap:break-word;overflow-wrap:break-word}

      /* Fix indicator names wrapping on mobile */
      h3[style*="white-space:nowrap"]{white-space:normal !important;word-wrap:break-word;overflow-wrap:break-word;line-height:1.3}

      /* Ensure all badge/label elements wrap properly */
      .badge, span.badge, .pill{white-space:normal !important;word-wrap:break-word;overflow-wrap:break-word;text-align:center}

      /* Smaller progress bar on mobile */
      .scroll-progress{height:2px}

      /* Optimize button press for touch */
      .btn:active{transform:translateY(2px) scale(0.99)}

      /* Disable orb animations on mobile for battery */
      #parallax-orb-1,#parallax-orb-2{animation:none !important}

      /* Ensure typing text doesn't overflow */
      .hero p{word-wrap:break-word;overflow-wrap:break-word}

      /* Reduce hero heading size on mobile */
      .headline.xl{font-size:2rem !important}

      /* Better spacing for gradient orbs on mobile */
      #parallax-orb-1{width:350px;height:350px;filter:blur(50px) !important}
      #parallax-orb-2{width:300px;height:300px;filter:blur(40px) !important}

      /* FIX: Comparison slider - constrain width on mobile to perfectly align images */
      #comparison-slider {
        max-width: calc(100vw - 2rem) !important;
        margin-left: auto !important;
        margin-right: auto !important;
      }

      /* SAFETY NET: Prevent any div with large max-width from overflowing - EXCEPT comparison slider */
      div[style*="max-width"]:not(#comparison-slider):not(#slider-overlay) {
        max-width: 100% !important;
        border: none !important;
        box-sizing: border-box !important;
      }

      /* Ensure all images respect container width - EXCEPT comparison slider images */
      img:not(#overlay-image):not([alt*="Signal Pilot"]) {
        max-width: 100% !important;
        border: none !important;
        height: auto !important;
        box-sizing: border-box !important;
      }
    }

    /* Desktop optimizations - ensure video shows 100% */
    @media (min-width:1025px){
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:cover !important;
        object-position:center !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }
    }

    @media (max-width:480px){
      /* Extra small screens - smaller text */
      #hero-description{font-size:0.85rem !important;padding:0 0.5rem;line-height:1.5 !important}

      /* Extra small screens - thinner progress bar */
      .scroll-progress{height:1.5px}

      /* Ensure buttons wrap text properly on very small screens */
      .btn, .btn-primary, .btn-ghost{white-space:normal !important;line-height:1.3 !important;padding:.7rem 1rem !important}

      /* Adjust pricing cards for small screens */
      .pricing-grid .card.plan{padding:1rem 0.75rem !important;font-size:0.9rem !important}

      /* Make indicator names more compact on small screens */
      h3{font-size:1.1rem !important}
    }



    @media (prefers-reduced-motion: reduce){

      #typing-cursor{animation:none;opacity:1}

      /* Disable all animations for users who prefer reduced motion */
      .success-check,.spinner{animation:none !important}

      .btn:active{transform:none !important}

      #parallax-orb-1,#parallax-orb-2{animation:none !important}

    }

    /* Performance: Disable heavy effects on low-end devices */
    @media (prefers-reduced-data: reduce){
      /* Aurora, stars, and particles are all beautiful and lightweight - show them on mobile! */
      /* Only hide truly heavy effects like parallax orbs */

      #parallax-orb-1,#parallax-orb-2{display:none !important}
    }

    /* bg-aurora capability rules REMOVED - using video background instead */

    @media (max-width: 1024px) {
      /* Disable harsh blinking cursor on mobile */
      #typing-cursor {
        animation: none !important;
        opacity: 1 !important;
      }

      /* Constellations should stay in background (default z-index:-2) - removed forced z-index:1 */
      .sp-constellations, #constellations {
        position: fixed !important;
        pointer-events: none !important;
      }

      /* Header must be above background for navigation */
      header {
        position: relative !important;
        z-index: 100 !important;
      }
    }

    /* LIGHT MODE: Fix ALL white/light text to be readable on white background */

    /* Base elements */
    html[data-theme="light"] body,
    html[data-theme="light"] p,
    html[data-theme="light"] span,
    html[data-theme="light"] div,
    html[data-theme="light"] li{
      color:#0f172a;
    }

    html[data-theme="light"] h1,
    html[data-theme="light"] h2,
    html[data-theme="light"] h3,
    html[data-theme="light"] h4,
    html[data-theme="light"] h5,
    html[data-theme="light"] h6{
      color:#0f172a !important;
    }

    html[data-theme="light"] .brand{
      color:#0f172a !important;
    }

    html[data-theme="light"] .punch{
      color:#0f172a !important;
    }

    /* Fix all white color variations */
    html[data-theme="light"] [style*="color:#fff"],
    html[data-theme="light"] [style*="color: #fff"],
    html[data-theme="light"] [style*="color:white"],
    html[data-theme="light"] [style*="color: white"],
    html[data-theme="light"] [style*="color:#ffffff"],
    html[data-theme="light"] [style*="color: #ffffff"],
    html[data-theme="light"] [style*="color:rgba(255,255,255"],
    html[data-theme="light"] [style*="color: rgba(255,255,255"]{
      color:#0f172a !important;
    }

    /* Fix all light hex colors that won't show on white */
    html[data-theme="light"] [style*="color:#ecf"],
    html[data-theme="light"] [style*="color:#e5e"],
    html[data-theme="light"] [style*="color:#b7c"],
    html[data-theme="light"] [style*="color:#8ea"]{
      color:#0f172a !important;
    }

    html[data-theme="light"] strong[style*="color:#fff"],
    html[data-theme="light"] strong[style*="color: #fff"],
    html[data-theme="light"] strong[style*="color:rgba(255,255,255"]{
      color:#0f172a !important;
    }

    /* Preserve white text on colored buttons */
    html[data-theme="light"] .btn-primary,
    html[data-theme="light"] .btn-primary *{
      color:#ffffff !important;
    }

    html[data-theme="light"] .mobile-nav-title,
    html[data-theme="light"] .mobile-nav-close{
      color:#0f172a !important;
    }

    html[data-theme="light"] .icon-wrap svg{
      color:#0f172a !important;
    }

    /* Aggressive catch-all for any remaining light text */
    html[data-theme="light"] nav a{
      color:#475569 !important;
    }

    html[data-theme="light"] nav a:hover,
    html[data-theme="light"] nav a:focus-visible{
      color:#0f172a !important;
    }

    /* Force all text to be dark in light mode (with exceptions) */
    html[data-theme="light"] *:not(.btn-primary):not(.btn-primary *):not(strong[style*="#3ed598"]):not(strong[style*="#76ddff"]):not(strong[style*="#f9a23c"]):not(strong[style*="#ff6b9d"]){
      color:inherit;
    }

    html[data-theme="light"]{
      color:#0f172a;
    }

    /* AGGRESSIVE FIX: All muted/grey text colors */
    html[data-theme="light"] [style*="color:var(--muted)"],
    html[data-theme="light"] [style*="color: var(--muted)"],
    html[data-theme="light"] [style*="color:var(--muted-2)"],
    html[data-theme="light"] [style*="color: var(--muted-2)"],
    html[data-theme="light"] .note,
    html[data-theme="light"] p[style*="color:var(--muted)"],
    html[data-theme="light"] span[style*="color:var(--muted)"],
    html[data-theme="light"] div[style*="color:var(--muted)"] {
      color:#475569 !important;
    }

    /* Fix all var(--text) to ensure they're dark */
    html[data-theme="light"] [style*="color:var(--text)"],
    html[data-theme="light"] [style*="color: var(--text)"] {
      color:#0f172a !important;
    }

    /* Fix specific light color hex codes */
    html[data-theme="light"] [style*="color:#b7c2d9"],
    html[data-theme="light"] [style*="color:#8ea0bf"],
    html[data-theme="light"] [style*="color:#ecf1ff"] {
      color:#475569 !important;
    }

    /* FIX GRADIENT TEXT FOR LIGHT MODE - Critical for readability */
    html[data-theme="light"] .headline {
      background: linear-gradient(135deg, #1e40af, #7c3aed) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix all green gradient text (success/guarantee messages) */
    html[data-theme="light"] strong[style*="linear-gradient(135deg,#3ed598"],
    html[data-theme="light"] span[style*="linear-gradient(135deg,#3ed598"] {
      background: linear-gradient(135deg, #059669, #047857) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix all orange gradient text (pricing/CTA) */
    html[data-theme="light"] strong[style*="linear-gradient(135deg,#f9a23c"],
    html[data-theme="light"] span[style*="linear-gradient(135deg,#f9a23c"] {
      background: linear-gradient(135deg, #c2410c, #ea580c) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix brand gradient text (Signal Pilot logo/branding) */
    html[data-theme="light"] span[style*="linear-gradient(135deg,#5b8aff"] {
      background: linear-gradient(135deg, #1e40af, #6b21a8) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* ==================== LIGHT MODE GORGEOUS EFFECTS ==================== */

    /* Keyframe animations for light mode backgrounds */
    @keyframes orbFloat {
      0%, 100% {
        background:
          radial-gradient(circle 900px at 20% 30%, rgba(59, 130, 246, 0.22), transparent 60%),
          radial-gradient(circle 700px at 80% 70%, rgba(168, 85, 247, 0.18), transparent 60%),
          radial-gradient(circle 800px at 50% 50%, rgba(14, 165, 233, 0.15), transparent 60%),
          #ffffff;
      }
      50% {
        background:
          radial-gradient(circle 900px at 30% 40%, rgba(59, 130, 246, 0.27), transparent 60%),
          radial-gradient(circle 700px at 70% 60%, rgba(168, 85, 247, 0.23), transparent 60%),
          radial-gradient(circle 800px at 60% 40%, rgba(14, 165, 233, 0.20), transparent 60%),
          #ffffff;
      }
    }

    @keyframes particleFloat {
      0% { transform: translateY(0) translateX(0); }
      50% { transform: translateY(-20px) translateX(10px); }
      100% { transform: translateY(0) translateX(0); }
    }

    /* Subtle grid overlay for light mode */
    html[data-theme="light"]::before {
      content: '';
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      background-image:
        linear-gradient(rgba(59, 130, 246, 0.09) 1px, transparent 1px),
        linear-gradient(90deg, rgba(59, 130, 246, 0.09) 1px, transparent 1px);
      background-size: 50px 50px;
      opacity: 0.9;
    }

    /* Enhanced cards in light mode */
    html[data-theme="light"] .card {
      box-shadow: 0 4px 20px rgba(59, 130, 246, 0.08) !important;
      border: 1px solid rgba(59, 130, 246, 0.12) !important;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.6)) !important;
      backdrop-filter: blur(10px);
    }

    html[data-theme="light"] .card:hover {
      box-shadow: 0 12px 40px rgba(59, 130, 246, 0.15) !important;
      border-color: rgba(59, 130, 246, 0.3) !important;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.8)) !important;
    }



    *{box-sizing:border-box}

    body {
      top: 0 !important;
      position: relative !important;
    }

    font {
      font-size: inherit !important;
      line-height: inherit !important;
    }

    /* Specific adjustments for different text sizes */
    h1 font, h2 font, h3 font, .headline font {
      font-size: inherit !important;
    }

    p font, li font, div font {
      font-size: inherit !important;
    }

    .btn font, button font, a font {
      font-size: inherit !important;
    }

    /* CRITICAL: Force font/span wrappers to not block clicks */
    nav[aria-label="Main"] font,
    nav[aria-label="Main"] span:not(.mobile-nav-title),
    .lang-dropdown font,
    .lang-dropdown span,
    .lang-dropdown-menu font,
    .lang-dropdown-menu span,
    .menu-toggle font,
    .menu-toggle span,
    #langToggle font,
    #langToggle span,
    .nav-dropdown font,
    .nav-dropdown span,
    button font,
    button span,
    .btn font,
    .btn span {
      pointer-events: none !important;
      color: inherit !important;
      background: transparent !important;
      font-family: inherit !important;
      font-size: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
      display: inline !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    /* Ensure clickable elements always work */
    nav[aria-label="Main"] a,
    nav[aria-label="Main"] button,
    .lang-dropdown button,
    .lang-dropdown-menu button,
    .menu-toggle,
    #langToggle,
    #menuToggle,
    .mobile-nav-close {
      pointer-events: auto !important;
      cursor: pointer !important;
    }

    /* Fix header squeezing */
    header .container,
    header .nav {
      min-width: 0 !important;
      flex-shrink: 0 !important;
    }

    header .brand {
      flex-shrink: 0 !important;
      min-width: auto !important;
      white-space:nowrap !important;
    }

    header nav[aria-label="Main"] {
      flex-shrink: 1 !important;
      min-width: 0 !important;
    }

    /* Prevent all header buttons and text from wrapping */
    header button,
    header a,
    .menu-toggle,
    #langToggle,
    #themeToggle,
    .btn {
      white-space:nowrap !important;
      flex-shrink:0 !important;
    }

    /* Prevent horizontal scroll */
    body{
      overflow-x:hidden;
      position:relative;
      /* Smooth theme transitions */
      transition:background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Smooth transitions for all theme-dependent elements */
    header,
    .card,
    .btn,
    nav a{
      transition:all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Scroll progress indicator */
    .scroll-progress{
      position:fixed;
      top:0;
      left:0;
      width:0%;
      height:3px;
      background:linear-gradient(90deg,var(--brand),var(--accent));
      z-index:10000;
      transition:width 0.1s ease-out;
    }

    /* MOBILE: Simple, clean mobile setup - NO forced positioning */
    @media (max-width: 768px) {
      /* Background layers BEHIND everything */
      .bg-stars {
        z-index: -3 !important;
        position: fixed !important;
      }
      .sp-constellations {
        z-index: 1 !important;
        position: fixed !important;
      }

      /* Header needs high z-index for dropdown menus */
      header {
        position: relative;
        z-index: 100;
        overflow-x: hidden !important;
        max-width: 100vw !important;
      }

      /* Prevent header content from overflowing on mobile with translated text */
      header .container.nav {
        max-width: 100vw !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }

      /* Ensure header buttons adapt to smaller text when necessary */
      header .btn,
      header #langToggle,
      header #themeToggle {
        font-size: .8rem !important;
        padding: .4rem .6rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        flex-shrink: 1 !important;
      }

      /* Language button - allow slight shrinking if needed */
      header #langToggle span {
        max-width: 30px !important;
        overflow: hidden !important;
        text-overflow: clip !important;
      }

      /* CTA button - ensure it doesn't overflow */
      header .cta-header {
        max-width: 140px !important;
        font-size: .75rem !important;
        padding: .5rem .7rem !important;
        text-overflow: ellipsis !important;
        overflow: hidden !important;
      }

      /* Reduce animations for performance - but don't kill them entirely */
      *, *::before, *::after {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
      }

      /* Ensure modals can still animate */
      #cookie-preferences-modal,
      .sp-chatbot-window,
      .mobile-nav,
      [id*="modal"] {
        animation-duration: 0.3s !important;
        transition-duration: 0.3s !important;
      }
    }

    img, video, iframe{
      max-width:100%;
      height:auto;
    }

    /* Prevent long words/URLs from breaking layout */
    p, li, td, th, div{
      word-wrap:break-word;
      overflow-wrap:break-word;
      word-break:break-word;
    }

    /* Don't break words in headings unless necessary */
    h1, h2, h3, h4, h5, h6{
      word-wrap:break-word;
      overflow-wrap:break-word;
    }
    
    /* Ensure main content is above background layers */
    main{
      position:relative;
      min-height:100vh;
      z-index:1;
      background:transparent !important; /* Let constellations show through! */
    }

    /* Make all sections transparent so constellations are visible throughout entire site */
    section, .section {
      background:transparent !important;
    }

    /* Override any inline background styles on sections */
    section[style*="background"] {
      background:transparent !important;
    }
    
    /* Prevent any overflow issues on mobile */
    @media (max-width:768px){
      body, main{
        overflow-x:hidden !important;
      }
      
      main{
        width:100%;
        display:block;
      background:transparent !important; /* Let particles show through on mobile! */
      }

      /* Force all sections transparent on mobile so particles show through */
      section, .section {
        background:transparent !important;
      }
    }
    
    /* Removed reveal animations - not needed */



    html,body{

      margin:0;

      color:var(--text);

      font-family:"Space Grotesk", "Noto Sans JP", "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", "Meiryo", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;

      font-size:clamp(16px,0.9vw + 12px,18px);

      line-height:1.8;

      letter-spacing:.01em;

      -webkit-text-size-adjust:100%;

      overflow-x:hidden;

      background:transparent; /* Let particles/aurora/bg-stars show through! */

      isolation:isolate;

      /* Smooth scrolling */
      scroll-behavior:smooth;

      /* Better touch scrolling on iOS */
      -webkit-overflow-scrolling:touch;

      /* Performance optimizations */
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      text-rendering:optimizeLegibility;

    }



    /* Background: gradient + lattice under everything */

    body::before{

      content:"";

      position:fixed;

      inset:0;

      z-index:-4;

      pointer-events:none;

      background:

        radial-gradient(1200px 700px at -6% -8%, rgba(130,185,255,.18), transparent 60%),

        radial-gradient(1100px 660px at 108% -10%, rgba(155,140,255,.18), transparent 62%),

        radial-gradient(1200px 700px at 52% 118%, rgba(118,221,255,.12), transparent 64%),

        var(--bg);

    }



    html[data-theme="light"] body::before{

      background:

        radial-gradient(circle 900px at 20% 30%, rgba(59, 130, 246, 0.22), transparent 60%),

        radial-gradient(circle 700px at 80% 70%, rgba(168, 85, 247, 0.18), transparent 60%),

        radial-gradient(circle 800px at 50% 50%, rgba(14, 165, 233, 0.15), transparent 60%),

        #ffffff;

      animation: orbFloat 20s ease-in-out infinite;

    }



    body::after{

      content:"";

      position:fixed;

      inset:0;

      z-index:-3;

      pointer-events:none;

      opacity:.18;

      background-image:

        linear-gradient(transparent 31px, var(--grid-line) 32px, transparent 33px),

        linear-gradient(90deg, transparent 31px, var(--grid-line) 32px, transparent 33px);

      background-size:64px 64px;

    }

    html[data-theme="light"] body::after{
      opacity:.38;
      background-image:
        radial-gradient(2px 2px at 15% 25%, #3b82f6, transparent 50%),
        radial-gradient(3px 3px at 85% 15%, #a855f7, transparent 50%),
        radial-gradient(2px 2px at 45% 75%, #0ea5e9, transparent 50%),
        radial-gradient(3px 3px at 70% 85%, #8b5cf6, transparent 50%),
        radial-gradient(2px 2px at 25% 60%, #3b82f6, transparent 50%),
        radial-gradient(2px 2px at 90% 50%, #06b6d4, transparent 50%),
        linear-gradient(transparent 31px, rgba(59, 130, 246, 0.12) 32px, transparent 33px),
        linear-gradient(90deg, transparent 31px, rgba(59, 130, 246, 0.12) 32px, transparent 33px);
      background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 64px 64px, 64px 64px;
      animation: particleFloat 30s linear infinite;
    }



    /* bg-aurora CSS REMOVED - element disabled, using video background instead */

    @keyframes pricingGlow{
      0%,100%{box-shadow:0 0 40px rgba(91,138,255,.2),0 0 80px rgba(91,138,255,.1);transform:scale(1.05)}
      50%{box-shadow:0 0 60px rgba(91,138,255,.4),0 0 120px rgba(91,138,255,.2);transform:scale(1.05)}
    }

    @keyframes badgePulse{
      0%,100%{transform:translateX(-50%) scale(1);box-shadow:0 4px 16px rgba(249,162,60,.5)}
      50%{transform:translateX(-50%) scale(1.05);box-shadow:0 6px 24px rgba(249,162,60,.7)}
    }

    @keyframes floatOrb1{
      0%,100%{transform:translate(0,0) scale(1)}
      33%{transform:translate(30px,-30px) scale(1.1)}
      66%{transform:translate(-20px,20px) scale(0.9)}
    }

    @keyframes floatOrb2{
      0%,100%{transform:translate(0,0) scale(1)}
      50%{transform:translate(-40px,-20px) scale(1.15)}
    }

    @keyframes blink{
      0%,49%{opacity:1}
      50%,100%{opacity:0}
    }

    /* Micro-interactions: Loading spinner */
    @keyframes spin{
      to{transform:rotate(360deg)}
    }

    .spinner{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,0.3);border-top-color:var(--brand);border-radius:50%;animation:spin 0.8s linear infinite}

    /* Micro-interactions: Success checkmark pop */
    @keyframes checkPop{
      0%{transform:scale(0);opacity:0}
      50%{transform:scale(1.2)}
      100%{transform:scale(1);opacity:1}
    }

    .success-check{animation:checkPop 0.4s cubic-bezier(0.4, 0, 0.2, 1)}

    /* Tablet optimizations */
    @media (max-width:1024px){
      /* Reduce parallax intensity on tablets */
      #parallax-orb-1,#parallax-orb-2{opacity:0.7}

      /* Better text wrapping for Japanese on tablets */
      h1, h2, h3{word-break:normal;overflow-wrap:break-word;hyphens:none}

      /* Ensure navigation items have adequate spacing */
      nav ul{gap:.7rem}

      /* Optimize button text for Japanese */
      .btn{min-height:48px;padding:.8rem 1.15rem}
    }

    @media (max-width:768px){
      /* Prevent horizontal overflow on mobile */
      body,html{overflow-x:hidden !important;max-width:100vw}

      /* Product cards - optimize button layout for tablets */
      .card.product .btn-sm {
        font-size: .9rem;
        padding: .55rem .8rem;
        min-height: 42px;
      }

      /* Navigation menu - ensure proper alignment on tablets */
      nav ul {
        gap: .7rem !important;
      }

      nav li {
        display: flex;
        align-items: center;
      }

      /* Allow hero text to wrap on mobile */
      #hero-description{white-space:normal !important;font-size:1rem !important;padding:0 1rem;max-width:100%;overflow-wrap:break-word;word-break:break-word}

      /* Reduce typing text on mobile */
      #typed-text{font-size:0.95rem !important}

      /* Fix signal legend items wrapping on mobile */
      div[style*="white-space:nowrap"]{white-space:normal !important;word-wrap:break-word;overflow-wrap:break-word}

      /* Fix indicator names wrapping on mobile */
      h3[style*="white-space:nowrap"]{white-space:normal !important;word-wrap:break-word;overflow-wrap:break-word;line-height:1.3}

      /* Ensure all badge/label elements wrap properly */
      .badge, span.badge, .pill{white-space:normal !important;word-wrap:break-word;overflow-wrap:break-word;text-align:center}

      /* Smaller progress bar on mobile */
      .scroll-progress{height:2px}

      /* Optimize button press for touch */
      .btn:active{transform:translateY(2px) scale(0.99)}

      /* Disable orb animations on mobile for battery */
      #parallax-orb-1,#parallax-orb-2{animation:none !important}

      /* Ensure typing text doesn't overflow */
      .hero p{word-wrap:break-word;overflow-wrap:break-word}

      /* Reduce hero heading size on mobile */
      .headline.xl{font-size:2rem !important}

      /* Better spacing for gradient orbs on mobile */
      #parallax-orb-1{width:350px;height:350px;filter:blur(50px) !important}
      #parallax-orb-2{width:300px;height:300px;filter:blur(40px) !important}

      /* FIX: Comparison slider - constrain width on mobile to perfectly align images */
      #comparison-slider {
        max-width: calc(100vw - 2rem) !important;
        margin-left: auto !important;
        margin-right: auto !important;
      }

      /* SAFETY NET: Prevent any div with large max-width from overflowing - EXCEPT comparison slider */
      div[style*="max-width"]:not(#comparison-slider):not(#slider-overlay) {
        max-width: 100% !important;
        border: none !important;
        box-sizing: border-box !important;
      }

      /* Ensure all images respect container width - EXCEPT comparison slider images */
      img:not(#overlay-image):not([alt*="Signal Pilot"]) {
        max-width: 100% !important;
        border: none !important;
        height: auto !important;
        box-sizing: border-box !important;
      }
    }

    /* Desktop optimizations - ensure video shows 100% */
    @media (min-width:1025px){
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:cover !important;
        object-position:center !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }
    }

    @media (max-width:480px){
      /* Extra small screens - smaller text */
      #hero-description{font-size:0.85rem !important;padding:0 0.5rem;line-height:1.5 !important}

      /* Extra small screens - thinner progress bar */
      .scroll-progress{height:1.5px}

      /* Ensure buttons wrap text properly on very small screens */
      .btn, .btn-primary, .btn-ghost{white-space:normal !important;line-height:1.3 !important;padding:.7rem 1rem !important}

      /* Adjust pricing cards for small screens */
      .pricing-grid .card.plan{padding:1rem 0.75rem !important;font-size:0.9rem !important}

      /* Make indicator names more compact on small screens */
      h3{font-size:1.1rem !important}
    }



    @media (prefers-reduced-motion: reduce){

      #typing-cursor{animation:none;opacity:1}

      /* Disable all animations for users who prefer reduced motion */
      .success-check,.spinner{animation:none !important}

      .btn:active{transform:none !important}

      #parallax-orb-1,#parallax-orb-2{animation:none !important}

    }

    /* Performance: Disable heavy effects on low-end devices */
    @media (prefers-reduced-data: reduce){
      /* Aurora, stars, and particles are all beautiful and lightweight - show them on mobile! */
      /* Only hide truly heavy effects like parallax orbs */

      #parallax-orb-1,#parallax-orb-2{display:none !important}
    }

    /* bg-aurora capability rules REMOVED - using video background instead */

    @media (max-width: 1024px) {
      /* Disable harsh blinking cursor on mobile */
      #typing-cursor {
        animation: none !important;
        opacity: 1 !important;
      }

      /* Constellations should stay in background (default z-index:-2) - removed forced z-index:1 */
      .sp-constellations, #constellations {
        position: fixed !important;
        pointer-events: none !important;
      }

      /* Header must be above background for navigation */
      header {
        position: relative !important;
        z-index: 100 !important;
      }
    }

    /* Light mode bg-aurora REMOVED - using video background instead */

    html[data-theme="light"] .bg-stars{
      opacity:.08 !important;
      background:
        radial-gradient(1px 1px at 10% 20%, rgba(148,163,184,.35), transparent 60%),
        radial-gradient(1px 1px at 30% 80%, rgba(148,163,184,.25), transparent 60%),
        radial-gradient(1px 1px at 70% 30%, rgba(148,163,184,.3), transparent 60%),
        radial-gradient(1px 1px at 85% 60%, rgba(148,163,184,.3), transparent 60%),
        radial-gradient(1px 1px at 55% 10%, rgba(148,163,184,.25), transparent 60%),
        radial-gradient(1px 1px at 15% 55%, rgba(148,163,184,.25), transparent 60%),
        radial-gradient(1px 1px at 44% 74%, rgba(148,163,184,.25), transparent 60%),
        radial-gradient(1px 1px at 78% 88%, rgba(148,163,184,.25), transparent 60%);
    }

    html[data-theme="light"] .sp-constellations{
      opacity:.12 !important;
    }



    /* Typography */

    h1,h2,h3{

      font-family:"Space Grotesk","Noto Sans JP","Hiragino Sans","Yu Gothic",system-ui,sans-serif;

      text-wrap:balance;

      letter-spacing:.02em;

    }

    p,li{ text-wrap:pretty }



    /* Utilities */

    .container{max-width:var(--max);width:100%;margin:0 auto;padding-left:calc(clamp(14px,4vw,22px) + env(safe-area-inset-left));padding-right:calc(clamp(14px,4vw,22px) + env(safe-area-inset-right));overflow:visible}

    .section{padding:clamp(1.6rem,5.5vw,3rem) 0}

    .stack{display:grid;gap:1.2rem}

    .grid{display:grid;gap:1rem}

    .grid.auto-300{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}

    .pricing-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem;align-items:stretch}

    /* Force pricing cards to be exactly the same height */
    .pricing-grid .card.plan {
      display:grid;
      grid-template-rows:auto auto 1fr auto; /* header | price | value-box | actions */
      min-height:850px; /* Increased to accommodate all content */
      height:100%; /* Ensure all cards stretch to same height */
      padding-top:1.5rem; /* Extra padding for absolute positioned badges */
    }

    /* Pill - force consistent height */
    .pricing-grid .card.plan > .pill {
      min-height:50px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Price - force consistent height */
    .pricing-grid .card.plan > .price {
      min-height:70px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Fix text overflow in buttons - allow wrapping */
    .pricing-grid .btn {
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: normal;
      text-align: center;
      line-height: 1.4;
      min-height:54px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Fix label text wrapping */
    .pricing-grid label {
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: normal;
    }

    /* Ensure Pay with Card buttons are properly centered */
    .pricing-grid .btn-secondary {
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Mobile: Stack pricing cards vertically */
    @media (max-width:900px){
      /* Prevent any horizontal overflow at root level */
      html, body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
        width: 100% !important;
      }

      /* Ensure all major containers respect viewport */
      body, .section, .container, .stack {
        max-width: 100vw !important;
        width: 100% !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }

      .section, .container {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
      }

      /* Ensure divs inside cards respect width */
      .pricing-grid .card.plan > div,
      .pricing-grid .card.plan .actions {
        max-width: 100% !important;
        border: none !important;
        box-sizing: border-box !important;
      }

      /* Pricing grid - vertical stack on mobile */
      .pricing-grid{
        display: flex !important;
        flex-direction: column !important;
        gap: 2rem !important;
        max-width: 100% !important;
        border: none !important;
        padding: 0 1rem !important;
        margin: 0 auto !important;
        box-sizing: border-box !important;
        align-items: center !important;
        justify-content: center !important;
      }

      /* Individual pricing cards */
      .pricing-grid .card.plan {
        display: flex !important;
        flex-direction: column !important;
        height: auto !important;
        min-height: auto !important;
        max-width: 100% !important;
        border: none !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 1.5rem 1rem !important;
        box-sizing: border-box !important;
        overflow: visible !important;
        transform: none !important; /* Remove any scale transforms */
      }

      /* Override yearly card scale on mobile */
      /* Stop pricing card glow animation on mobile - causes flickering with aurora */
      #plan-yearly {
        animation: none !important;
        transform: none !important;
        z-index: 1 !important;
        box-shadow: 0 4px 12px rgba(91,138,255,.15) !important; /* Remove heavy glow, use subtle shadow */
      }

      /* Fix absolute positioned badges on pricing cards */
      .pricing-grid .card.plan > div[style*="position:absolute"] {
        position: absolute !important;
        max-width: calc(100% - 4rem) !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        font-size: 0.7rem !important;
        padding: 0.35rem 0.7rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
      }

      /* Ensure all card content wraps */
      .card * {
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        max-width: 100% !important;
        border: none !important;
      }

      /* Ensure buttons and inputs in cards respect width */
      .pricing-grid .card.plan input,
      .pricing-grid .card.plan button,
      .pricing-grid .card.plan .btn,
      .pricing-grid .card.plan a {
        max-width: 100% !important;
        border: none !important;
        box-sizing: border-box !important;
      }

      /* Fix pill elements */
      .pricing-grid .card.plan .pill {
        max-width: 100% !important;
        border: none !important;
        box-sizing: border-box !important;
      }

      /* Fix price display */
      .pricing-grid .card.plan .price {
        max-width: 100% !important;
        border: none !important;
        box-sizing: border-box !important;
        overflow: visible !important;
      }

      /* Fix comparison section */
      #comparison-grid, .comparison-container {
        overflow: visible !important;
        max-width: 100% !important;
        border: none !important;
      }

      #comparison-slider {
        max-width: 100% !important;
        border: none !important;
        margin-left: auto !important;
        margin-right: auto !important;
      }

      .comparison-image {
        overflow: hidden !important;
        background: transparent !important;
      }
    }

    /* Landscape mobile optimization */
    @media (max-height: 600px) and (orientation: landscape) {
      /* Reduce vertical spacing on landscape mobile */
      .section {
        padding: 2rem 0 !important;
      }

      /* Carousel height optimization for landscape */
      .carousel-item {
        max-height: 70vh;
      }

      /* Product cards more compact */
      .card.product {
        padding: 0.8rem;
      }
    }

    /* Additional mobile fixes for guarantee and other elements */
    @media (max-width:768px){
      /* Fix 7-day money back guarantee - be very specific */
      #plans-grid + div,
      section .container > div[style*="max-width:900px"] {
        max-width: calc(100% - 2rem) !important;
        width: calc(100% - 2rem) !important;
        padding: 1.25rem 0.75rem !important;
        margin: 2rem auto 1rem !important;
        box-sizing: border-box !important;
        overflow: hidden !important;
      }

      section .container > div[style*="max-width:900px"] h3 {
        font-size: 1rem !important;
        line-height: 1.3 !important;
        word-wrap: break-word !important;
      }

      section .container > div[style*="max-width:900px"] p {
        font-size: 0.85rem !important;
        word-wrap: break-word !important;
        line-height: 1.5 !important;
      }

      section .container > div[style*="max-width:900px"] > div[style*="display:flex"] {
        flex-direction: column !important;
        gap: 0.5rem !important;
        align-items: flex-start !important;
      }

      section .container > div[style*="max-width:900px"] svg {
        width: 24px !important;
        height: 24px !important;
        flex-shrink: 0 !important;
      }

      /* Ensure icon + text rows don't overflow */
      section .container > div[style*="max-width:900px"] > div > div {
        max-width: 100% !important;
        border: none !important;
        overflow: hidden !important;
      }

      section .container > div[style*="max-width:900px"] span {
        font-size: 0.8rem !important;
        word-wrap: break-word !important;
      }

      /* Footer: Three sections stacked vertically on mobile */
      footer > .container > div[style*="grid-template-columns"] {
        display: flex !important;
        flex-direction: column !important;
        gap: 1rem !important;
        margin-bottom: 1.5rem !important;
        padding: 0.5rem !important;
      }

      /* Hide the first column (Signal Pilot brand) on mobile */
      footer > .container > div[style*="grid-template-columns"] > div:first-child {
        display: none !important;
      }

      /* Style each footer section - simple and clean */
      footer > .container > div[style*="grid-template-columns"] > div {
        padding: 0.75rem 0 !important;
        border-bottom: 1px solid rgba(255,255,255,.1) !important;
      }

      footer > .container > div[style*="grid-template-columns"] > div:last-child {
        border-bottom: none !important;
      }

      /* Footer section headings - no colors */
      footer > .container > div[style*="grid-template-columns"] > div h4 {
        font-size: 0.75rem !important;
        margin-bottom: 0.5rem !important;
        font-weight: 600 !important;
        opacity: 0.7 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.05em !important;
      }

      /* Footer links - horizontal layout in rows */
      footer > .container > div[style*="grid-template-columns"] > div ul {
        padding: 0 !important;
        margin: 0 !important;
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 0.3rem 0.6rem !important;
        list-style: none !important;
      }

      footer > .container > div[style*="grid-template-columns"] > div ul li {
        margin: 0 !important;
        display: inline-block !important;
      }

      footer > .container > div[style*="grid-template-columns"] > div ul li a {
        font-size: 0.68rem !important;
        line-height: 1.2 !important;
        transition: opacity 0.2s ease !important;
        display: inline-block !important;
        opacity: 0.8 !important;
        white-space: nowrap !important;
      }

      footer > .container > div[style*="grid-template-columns"] > div ul li a:hover {
        opacity: 1 !important;
      }

      /* Sticky buttons on mobile - bottom right corner */
      /* Theme selector button (Matrix, Sakura, etc.) - 🎨 icon */
      .sp-theme-toggle {
        position: fixed !important;
        bottom: 90px !important;
        right: 20px !important;
        z-index: 999 !important;
        width: 50px !important;
        height: 50px !important;
        border-radius: 50% !important;
        box-shadow: 0 4px 12px rgba(0,0,0,.3) !important;
        background: rgba(255,255,255,.06) !important;
        border: 1px solid rgba(255,255,255,.14) !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        transition: all 0.3s ease !important;
        top: auto !important;
        left: auto !important;
        transform: none !important;
      }

      .sp-theme-toggle:hover {
        transform: scale(1.1) !important;
        background: rgba(255,255,255,.1) !important;
      }

      .sp-theme-toggle:active {
        transform: scale(0.95) !important;
      }

      /* Chatbot button sticky positioning */
      .sp-chatbot-toggle,
      .sp-chatbot-button,
      #sp-chatbot-button {
        position: fixed !important;
        bottom: 20px !important;
        right: 20px !important;
        z-index: 10000 !important;
        width: 50px !important;
        height: 50px !important;
        top: auto !important;
        left: auto !important;
        transform: none !important;
      }

      /* Back to top button on mobile */
      #backToTop {
        bottom: 160px !important;
        width: 50px !important;
        height: 50px !important;
        font-size: 1.3rem !important;
      }
    }

    /* Back to top button - all screens - matches theme/chatbot style */
    #backToTop {
      position: fixed;
      bottom: 160px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      color: #9fdcff;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 998;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,.3);
    }

    #backToTop.show {
      opacity: 1;
      visibility: visible;
    }

    #backToTop:hover {
      background: rgba(255,255,255,.1);
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0,0,0,.4);
    }

    #backToTop:active {
      transform: scale(0.95);
    }

    /* Light mode support for back to top */
    html[data-theme="light"] #backToTop {
      background: #f6f8fc;
      border-color: #d7def0;
      color: #0f1524;
      box-shadow: 0 4px 12px rgba(0,0,0,.1);
    }

    html[data-theme="light"] #backToTop:hover {
      background: #eef1f9;
      box-shadow: 0 6px 20px rgba(0,0,0,.15);
    }

    .measure{max-width:var(--measure)}



    /* Buttons & cards (unified) */

    a,button{min-height:44px}

    .btn{
      display:inline-flex;
      align-items:center;
      gap:.55rem;
      padding:.78rem 1.12rem;
      border-radius:999px;
      font-weight:800;
      text-decoration:none;
      cursor:pointer;
      transition:all .15s cubic-bezier(0.4, 0, 0.2, 1);
      /* Ensure proper touch targets */
      min-height:44px;
      touch-action:manipulation;
      -webkit-tap-highlight-color:transparent;
      /* Performance */
      will-change:transform;
      backface-visibility:hidden;
      position:relative;
    }

    .btn:active{transform:translateY(3px) scale(0.98);box-shadow:0 1px 4px rgba(0,0,0,0.3) !important}

    .btn-primary{background:linear-gradient(115deg,var(--brand),var(--brand-2));color:#fff;position:relative;overflow:hidden;box-shadow:0 4px 20px rgba(91,138,255,0.3)}

    .btn-primary::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);transition:left 0.6s ease}

    .btn-primary:hover::before{left:100%}

    .btn-primary:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 8px 30px rgba(91,138,255,0.5)}

    .btn-ghost{color:#9fdcff;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06)}

    .btn-ghost:hover{background:rgba(255,255,255,.1);transform:scale(1.05)}

    html[data-theme="light"] .btn-ghost{color:#0f1524;border-color:#d7def0;background:#f6f8fc}

    html[data-theme="light"] .btn-ghost:hover{background:#eef1f9}

    .btn-sm{padding:.5rem .8rem; font-size:.92rem; line-height:1.1}

    /* Ensure punch lines have consistent height for uniform button alignment */
    .card.product .punch {
      min-height: 60px;
      display: flex;
      align-items: center;
    }

    /* Product card button container - ensure equal height alignment */
    .card.product .toggle-details,
    .card.product .toggle-details + a.btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      white-space: nowrap;
      min-height: 38px;
    }

    /* Form validation checkmarks */
    .input-wrapper{position:relative}

    .input-wrapper input.valid{
      border-color:#3ed598 !important;
      background:rgba(62,213,152,.05) !important;
    }

    .input-wrapper input.valid ~ .checkmark{
      opacity:1;
      transform:scale(1);
    }

    .checkmark{
      position:absolute;
      right:12px;
      top:50%;
      transform:translateY(-50%) scale(0);
      width:20px;
      height:20px;
      opacity:0;
      transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      pointer-events:none;
    }

    .checkmark svg{
      width:100%;
      height:100%;
    }

    /* Loading state for buttons */
    .btn-loading{
      position:relative;
      pointer-events:none;
      opacity:0.7;
    }

    .btn-loading::after{
      content:'';
      position:absolute;
      width:16px;
      height:16px;
      top:50%;
      left:50%;
      margin-left:-8px;
      margin-top:-8px;
      border:2px solid #ffffff;
      border-radius:50%;
      border-top-color:transparent;
      animation:spin 0.6s linear infinite;
    }

    @keyframes spin{
      to{transform:rotate(360deg)}
    }

    .card{border:1px solid rgba(255,255,255,.14);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));border-radius:16px;padding:1.05rem;box-shadow:var(--shadow);min-width:0;position:relative;overflow:visible;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1)}

    .card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--brand),var(--accent));transform:scaleX(0);transition:transform 0.3s ease;overflow:hidden}

    .card:hover::before{transform:scaleX(1)}

    .card:hover{border-color:rgba(91,138,255,0.4);transform:translateY(-6px);box-shadow:0 20px 60px rgba(91,138,255,0.2);background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.04))}

    /* Keep overflow:hidden for specific elements that need it */
    .card img, .card video, #comparison-slider {overflow:hidden}

    html[data-theme="light"] .card{border-color:rgba(10,20,40,.10);background:linear-gradient(180deg,rgba(10,20,40,.03),rgba(10,20,40,.01))}

    html[data-theme="light"] .card:hover{border-color:rgba(91,138,255,0.3);box-shadow:0 20px 60px rgba(91,138,255,0.15);background:linear-gradient(180deg,rgba(10,20,40,.05),rgba(10,20,40,.02))}

    /* Indicator card clickable cursor */
    .card.product img{cursor:pointer;transition:opacity 0.3s ease}

    .card.product img:hover{opacity:0.8}

    /* Lightbox modal */
    .lightbox-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);z-index:9999;display:flex;align-items:center;justify-content:center;padding:2rem;opacity:0;pointer-events:none;transition:opacity 0.3s ease}

    .lightbox-overlay.active{opacity:1;pointer-events:all}

    .lightbox-content{max-width:90vw;max-height:90vh;position:relative;animation:lightboxZoomIn 0.4s cubic-bezier(0.4, 0, 0.2, 1)}

    .lightbox-content img{width:100%;height:100%;object-fit:contain;border-radius:12px;box-shadow:0 40px 120px rgba(0,0,0,0.6)}

    .lightbox-close{position:absolute;top:-50px;right:0;background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.2);color:#fff;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.5rem;font-weight:300;transition:all 0.2s ease;backdrop-filter:blur(10px);min-width:44px;min-height:44px}

    .lightbox-close:hover{background:rgba(255,255,255,0.2);border-color:rgba(255,255,255,0.4);transform:scale(1.1)}

    /* Mobile lightbox optimizations */
    @media (max-width:768px){
      .lightbox-overlay{padding:1rem;backdrop-filter:blur(10px)}

      .lightbox-content{max-width:95vw;max-height:85vh}

      .lightbox-close{top:-15px;right:-15px;width:44px;height:44px;font-size:1.8rem}
    }

    @keyframes lightboxZoomIn{
      from{transform:scale(0.8);opacity:0}
      to{transform:scale(1);opacity:1}
    }



    /* Header */

    header{

      position:sticky;

      top:0;

      z-index:40;

      backdrop-filter:none;

      background:transparent;

      border-bottom:1px solid rgba(255,255,255,.03);

      overflow:visible;

      /* CRITICAL: Fixed height to prevent vertical shifting when translated */
      /* Adjusted for PWA safe area */
      min-height: calc(64px + env(safe-area-inset-top, 0px)) !important;
      max-height: calc(64px + env(safe-area-inset-top, 0px)) !important;
      height: calc(64px + env(safe-area-inset-top, 0px)) !important;

      /* PWA mode: Add safe area padding for device notch/status bar */
      padding-top: env(safe-area-inset-top, 0px);

    }

    html[data-theme="light"] header{
      border-bottom-color:#cbd5e1;
      background:rgba(255,255,255,.9);
    }



    .nav{
      display:flex;
      align-items:center;
      gap:.6rem;
      padding:.5rem 0;
      flex-wrap:nowrap !important;
      width:100%;
      min-width:0;
      position:relative;
      overflow:visible;
      /* CRITICAL: Prevent vertical expansion when translated */
      height:100% !important;
      max-height:64px !important;
    }



    .brand{
      display:flex;
      align-items:center;
      gap:.6rem;
      color:#fff;
      text-decoration:none;
      font-weight:400;
      font-family:'Gugi',system-ui,-apple-system,sans-serif;
      text-transform:uppercase;
      letter-spacing:.1em;
      font-size:1.4rem;
      flex-shrink:0;
      white-space:nowrap;
    }

    /* Allow brand to shrink slightly on very constrained screens with translations */
    @media (max-width:1500px){
      .brand{
        font-size:1.3rem;
      }
    }

    @media (max-width:1400px){
      .brand{
        font-size:1.25rem;
      }
    }

    html[data-theme="light"] .brand{
      color:#0f172a;
    }

    .brand img{width:26px;height:26px}



    .nav-spacer{flex:1}



    nav[aria-label="Main"]{display:flex;min-width:0;flex-shrink:10;overflow:visible;align-items:center}

    nav ul{list-style:none;margin:0;padding:0;display:flex;align-items:center;gap:.8rem;min-width:0;flex-shrink:10;overflow:visible}

    nav li{display:flex;align-items:center}

    .mobile-nav-header{display:none}

    nav a{display:inline-flex;padding:.5rem .9rem;border-radius:999px;color:#b7c2d9;font-weight:600;font-family:'Space Grotesk','Noto Sans JP','Hiragino Sans',system-ui,sans-serif;text-decoration:none;transition:all .2s ease;font-size:.95rem;white-space:nowrap;min-width:0;flex-shrink:1;position:relative}

    nav a::before{content:'';position:absolute;bottom:4px;left:50%;right:50%;height:2px;background:linear-gradient(90deg,var(--brand),var(--accent));transition:left 0.3s ease,right 0.3s ease;border-radius:2px}

    nav a:hover::before{left:10%;right:10%}

    nav a:hover,nav a:focus-visible{color:#fff;background:rgba(91,138,255,.15);transform:translateY(-1px)}

    html[data-theme="light"] nav a{color:#475569}

    html[data-theme="light"] nav a:hover,
    html[data-theme="light"] nav a:focus-visible{color:#0f172a;background:rgba(59,130,246,.12)}


    /* Resources Dropdown */
    .nav-dropdown{position:relative;z-index:65}

    .nav-dropdown-toggle{
      display:inline-flex;
      align-items:center;
      gap:.3rem;
      padding:.5rem .9rem;
      border-radius:999px;
      color:#b7c2d9;
      font-weight:600;
      font-family:'Space Grotesk','Noto Sans JP','Hiragino Sans',system-ui,sans-serif;
      background:transparent;
      border:none;
      cursor:pointer;
      transition:all .2s ease;
      font-size:.95rem;
      white-space:nowrap;
    }

    .nav-dropdown-toggle:hover,
    .nav-dropdown-toggle:focus-visible{
      color:#fff;
      background:rgba(91,138,255,.15);
      transform:translateY(-1px);
    }

    html[data-theme="light"] .nav-dropdown-toggle{color:#475569}

    html[data-theme="light"] .nav-dropdown-toggle:hover,
    html[data-theme="light"] .nav-dropdown-toggle:focus-visible{
      color:#0f172a;
      background:rgba(59,130,246,.12);
    }

    .dropdown-arrow{
      font-size:.7em;
      transition:transform .2s ease;
    }

    .nav-dropdown-toggle[aria-expanded="true"] .dropdown-arrow{
      transform:rotate(180deg);
    }

    .nav-dropdown-menu{
      position:absolute;
      top:100%;
      left:0;
      margin-top:.5rem;
      background:rgba(10,12,20,.98);
      border:1px solid rgba(255,255,255,.2);
      border-radius:12px;
      padding:.5rem;
      min-width:200px;
      box-shadow:0 8px 24px rgba(0,0,0,.4);
      display:none;
      flex-direction:column;
      align-items:stretch;
      gap:.25rem;
      z-index:66;
      backdrop-filter:blur(12px);
    }

    html[data-theme="light"] .nav-dropdown-menu{
      background:rgba(255,255,255,.98);
      border-color:rgba(30,41,59,.2);
      box-shadow:0 8px 24px rgba(0,0,0,.15);
    }

    .nav-dropdown-menu.show{display:flex}

    @media (min-width: 769px) {
      .nav-dropdown:hover .nav-dropdown-menu{display:flex}
    }

    .nav-dropdown-menu::before{
      content:'';position:absolute;top:-12px;left:0;right:0;height:16px;
    }

    .nav-dropdown-menu li{display:block}

    .nav-dropdown-menu a{
      position:relative;
      padding:.6rem .9rem;
      display:flex !important;
      align-items:center;
      justify-content:flex-start !important;
      gap:.5rem;
      border-radius:8px;
      width:100%;
      text-align:left !important;
    }


    /* Language Dropdown - container only (menu created as body child in JavaScript) */
    .lang-dropdown{
      position:relative;
      flex-shrink:0;
      z-index:67 !important;
    }

    /* Language dropdown menu - created as direct child of body, needs to work on ALL screen sizes */
    .lang-dropdown-menu {
      position: fixed !important;
      top: 70px;
      right: 20px;
      background: rgba(10, 12, 20, 0.98);
      border: 2px solid rgba(255, 255, 255, 0.4);
      border-radius: 12px;
      padding: 0.5rem;
      min-width: 180px;
      max-height: 500px;
      overflow-y: auto;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.8);
      z-index: 76 !important;
      opacity: 0 !important;
      visibility: hidden !important;
      transform: translateY(-10px);
      transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;
      display: flex !important;
      flex-direction: column;
      gap: 0.25rem;
    }
    .lang-dropdown-menu.active {
      opacity: 1 !important;
      visibility: visible !important;
      transform: translateY(0) !important;
    }
    .lang-dropdown-menu button {
      padding: 0.6rem 0.9rem;
      background: transparent;
      border: none;
      border-radius: 8px;
      color: #b7c2d9;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.9rem;
      font-family: 'Space Grotesk', 'Noto Sans JP', 'Hiragino Sans', system-ui, sans-serif;
      font-weight: 500;
    }
    .lang-dropdown-menu button:hover {
      background: rgba(91, 138, 255, 0.15);
      color: #fff;
    }


    #themeToggle,
    #langToggle{flex-shrink:0;position:relative;z-index:68 !important;padding:.4rem .6rem !important;font-size:0.85rem !important;min-width:44px;display:inline-flex !important;align-items:center !important;justify-content:center !important}

    /* Make theme and language buttons smaller on mobile */
    @media (max-width:768px){
      #themeToggle,
      #langToggle{
        padding:.3rem !important;
        font-size:0.8rem !important;
        min-width:40px;
        min-height:40px;
        display:inline-flex !important;
        align-items:center !important;
        justify-content:center !important;
      }

      #themeToggle span,
      #langToggle span{
        display:flex !important;
        align-items:center !important;
        justify-content:center !important;
      }

      /* Fix language dropdown menu on mobile */
      .lang-dropdown-menu {
        right: 10px;
        min-width: 160px;
        max-width: calc(100vw - 20px);
      }

      /* Ensure header doesn't exceed viewport width and allows natural height */
      header {
        max-width: 100vw;
        height: auto !important;
        max-height: none !important;
        min-height: auto !important;
      }

      /* Ensure nav container respects viewport width and removes height constraint */
      .nav {
        max-width: 100%;
        max-height: none !important;
        height: auto !important;
      }
    }



    .menu-toggle{
      display:none;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.25);
      background:linear-gradient(135deg, rgba(91,138,255,.2), rgba(91,138,255,.1));
      color:#fff;
      padding:.6rem .85rem;
      font-weight:700;
      font-size:.9rem;
      box-shadow:0 4px 12px rgba(0,0,0,.3);
      transition:all 0.2s ease;
      position:relative;
      z-index:45;
    }
    
    .menu-toggle:hover{
      background:linear-gradient(135deg, rgba(91,138,255,.3), rgba(91,138,255,.15));
      transform:translateY(-1px);
      box-shadow:0 6px 16px rgba(0,0,0,.4);
    }



    .cta-header{
      margin-left:.5rem;
      flex-shrink:0;
      padding:.5rem .9rem !important;
      font-size:.88rem !important;
      white-space:nowrap;
    }

    /* Adjust for longer translations - start compacting nav items earlier */
    @media (max-width:1600px){
      nav a{padding:.5rem .75rem;font-size:.92rem}
      .nav-dropdown-toggle{padding:.5rem .75rem;font-size:.92rem}
      nav ul{gap:.6rem}
    }

    /* Compact CTA button on medium screens */
    @media (max-width:1500px){
      .cta-header{
        padding:.45rem .75rem !important;
        font-size:.82rem !important;
      }
      nav a{padding:.5rem .7rem;font-size:.9rem}
      .nav-dropdown-toggle{padding:.5rem .7rem;font-size:.9rem}
      nav ul{gap:.5rem}
    }

    /* Hide CTA on smaller tablets/phones - will show in mobile menu instead */
    @media (max-width:1100px){
      .cta-header{display:none}
    }

    /* More compact for medium screens */
    @media (max-width:1450px){
      nav a{padding:.5rem .65rem;font-size:.88rem}
      .nav-dropdown-toggle{padding:.5rem .65rem;font-size:.88rem}
      nav ul{gap:.45rem}
    }

    /* Even more compact before hamburger menu appears */
    @media (max-width:1400px){
      nav a{padding:.5rem .6rem;font-size:.86rem}
      .nav-dropdown-toggle{padding:.5rem .6rem;font-size:.86rem}
      nav ul{gap:.35rem}
      .nav{gap:.4rem}
    }


    /* CRITICAL FIX: Ensure language/theme buttons stay visible */
    .lang-dropdown,
    #themeToggle,
    .menu-toggle{
      position:relative;
      z-index:100 !important;
      flex-shrink:0 !important;
    }

    /* Ensure nav links (including FAQ) don't get covered by buttons */
    nav[aria-label="Main"] ul li {
      position: relative;
      z-index: 101;
    }

    nav[aria-label="Main"] a {
      position: relative;
      z-index: 101;
    }

    /* Ensure dropdown also has proper z-index */
    .nav-dropdown {
      z-index: 65 !important;
    }

    /* Hide mobile nav on desktop - it should only appear on mobile */
    @media (min-width: 1401px) {
      .mobile-nav,
      .mobile-nav-backdrop {
        display: none !important;
      }
    }

    /* Mobile hamburger menu appears at ≤1400px (increased from 1300px) */
    /* Nav items go into hamburger menu to prevent overlap with language/theme buttons */
    /* Activates earlier to accommodate longer text in translated languages */

    @media (max-width:1400px){
      /* Ensure header buttons have adequate space */
      .nav{
        padding:.7rem 0;
        gap:.5rem; /* Better spacing between header buttons */
      }

      /* Better mobile header button sizing */
      .lang-dropdown,
      #themeToggle {
        flex-shrink: 0;
      }

      #themeToggle,
      #langToggle {
        min-width: 44px; /* iOS minimum tap target */
        min-height: 44px;
      }

      .menu-toggle{
        display:inline-flex;
        position:relative;
        z-index:68 !important;
      }

      /* Hide original desktop nav on mobile */
      nav[aria-label="Main"]{
        display:none !important;
      }

      /* Mobile nav backdrop */
      .mobile-nav-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 9998;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }
      .mobile-nav-backdrop.active {
        opacity: 1;
        visibility: visible;
      }

      /* Mobile menu panel - slides in from right */
      .mobile-nav {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        width: min(85vw, 380px);
        background: #0a0c14;
        z-index: 9999;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        overflow-y: auto;
        box-shadow: -8px 0 32px rgba(0, 0, 0, 0.8);
        /* Add safe area for notched phones */
        padding-top: env(safe-area-inset-top);
      }
      .mobile-nav.active {
        transform: translateX(0);
      }

      /* Menu content styling */
      .mobile-nav-header {
        padding: 1.5rem 1.25rem;
        padding-top: max(1.5rem, calc(1rem + env(safe-area-inset-top)));
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        min-height: 60px; /* Ensure enough space for close button */
      }

      .mobile-nav-close {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: #fff;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem 0.75rem;
        line-height: 1;
        border-radius: 8px;
        min-width: 44px; /* iOS minimum tap target */
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s ease;
      }

      .mobile-nav-close:hover,
      .mobile-nav-close:active {
        background: rgba(255, 255, 255, 0.2);
      }

      .mobile-nav-links {
        padding: 1rem 0;
      }

      .mobile-nav-links a {
        display: block;
        padding: 1rem 1.25rem;
        color: #b7c2d9;
        text-decoration: none;
        font-weight: 600;
        font-size: 1.05rem;
        transition: all 0.2s ease;
        border-left: 3px solid transparent;
      }

      .mobile-nav-links a:active {
        background: rgba(91, 138, 255, 0.15);
        border-left-color: #5b8aff;
        color: #fff;
      }

      /* Hide desktop CTA on mobile */
      .cta-header{display:none}

    }

    @media (max-width:600px){
      nav[aria-label="Main"]{
        width:90vw !important;
        right:5vw !important;
        left:5vw !important;
        max-width:none !important;
      }

      nav a{
        padding:.9rem 1.2rem;
        font-size:1.05rem;
        color:#ffffff !important;
        font-weight:600;
        border-bottom:1px solid rgba(255,255,255,.1);
        display:block !important;
        text-align:left;
        width:100%;
        visibility:visible !important;
        opacity:1 !important;
        background:transparent !important;
        font-family:'Space Grotesk','Noto Sans JP','Hiragino Sans',system-ui,sans-serif !important;
        line-height:1.4 !important;
      }
      
      .nav-backdrop{
        background:rgba(0,0,0,.85);
      }
      
      .brand{
        font-size:1.2rem;
        padding-left:0.5rem;
      }
      
      .brand img{
        width:22px;
        height:22px;
      }
      
      .nav{
        padding-left:0.5rem;
        padding-right:0.5rem;
      }
    }



    /* Hero */

    .badge{display:inline-flex;align-items:center;gap:.5rem;padding:.35rem .8rem;border-radius:999px;font-weight:800;letter-spacing:.05em;text-transform:uppercase;font-size:.78rem;color:#bfe7ff;background:rgba(118,221,255,.18);border:1px solid rgba(118,221,255,.28)}

    .headline{font-family:'Gugi',system-ui,-apple-system,sans-serif;font-weight:900;letter-spacing:.02em;line-height:1.12;background:var(--grad);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}

    /* Hero and section headers use EB Garamond for sophistication */
    .headline.xl{
      font-size:clamp(2.2rem,7vw,4rem);
      font-family:'EB Garamond',serif;
      font-weight:600;
      letter-spacing:-.02em;
      line-height:1.2;
    }

    .headline.lg{
      font-size:clamp(1.7rem,5vw,2.7rem);
      font-family:'EB Garamond',serif;
      font-weight:600;
      letter-spacing:-.02em;
      line-height:1.25;
    }

    .hero{padding:clamp(1.6rem,8vw,4.2rem) 0 1.2rem}

    .hero-grid{display:grid;gap:1.5rem;grid-template-columns:1.1fr .9fr}

    .hero-grid>*{min-width:0}

    .panel{border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); border-radius:20px; box-shadow:var(--shadow); min-height:200px; display:flex; align-items:flex-end; justify-content:space-between; padding:1rem}

    @media (max-width:900px){
      .hero-grid{grid-template-columns:1fr}
      .panel{min-height:160px}

      /* Footer: 2 columns on tablet */
      footer > div > div[style*="grid-template-columns"] {
        grid-template-columns: 1fr 1fr !important;
        gap: 2rem !important;
      }
    }
    
    @media (max-width:600px){
      .panel{
        padding:.9rem;
        min-height:140px;
      }
      
      .panel .stack{
        gap:.5rem !important;
      }
      
      .panel .badge{
        font-size:.7rem;
      }

      .panel .btn{
        padding:.6rem .9rem;
        font-size:.9rem;
      }

      /* Screenshot boxes - responsive on larger mobile */
      .product > div[style*="max-width:280px"]{
        max-width:100% !important;
        margin:0 0 1.2rem !important;
      }
    }

    /* Mobile optimizations */
    @media (max-width:768px){
      .hero-ctas{flex-direction:column;width:100%;gap:.7rem}
      .hero-ctas .btn{width:100%;justify-content:center;padding:.65rem 1rem !important;font-size:.85rem !important}
      .headline.xl{font-size:clamp(2.5rem,10vw,3.5rem);line-height:1.15;font-weight:900 !important;letter-spacing:-0.02em}
      .proof-bar{justify-content:center}
      .section{padding:clamp(2rem,6vw,3rem) 0}

      /* Make hero description smaller on mobile */
      .hero > div > div > p[style*="font-size:1.15rem"],
      .hero > div > div > p[style*="font-size:1rem"]{
        font-size:.85rem !important;
        line-height:1.5 !important;
      }

      /* Make hero video more prominent on mobile */
      .hero div[style*="margin-bottom:3rem"]{
        margin-bottom:2rem !important;
      }
      .hero div[style*="aspect-ratio:245/106"]{
        border-radius:8px !important;
        border-width:1px !important;
        margin-left:-0.5rem !important;
        margin-right:-0.5rem !important;
        max-width:calc(100% + 1rem) !important;
      }

      /* Fix FAQ grid overflow on mobile - single column */
      #faq > div > div[style*="grid-template-columns"]{
        grid-template-columns:1fr !important;
      }

      /* Footer: single column on mobile */
      footer > div > div[style*="grid-template-columns"]{
        grid-template-columns:1fr !important;
        gap:2rem !important;
      }

      /* Footer copyright: stack on mobile */
      footer div[style*="justify-content:space-between"]{
        flex-direction:column !important;
        align-items:flex-start !important;
        gap:.8rem !important;
      }

      /* Fix newsletter input overflow on mobile */
      #footerNewsletterEmail{
        min-width:100% !important;
      }

      /* Mobile video - responsive with aspect ratio */
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:contain !important;
        object-position:center !important;
        display:block !important;
        visibility:visible !important;
        opacity:1 !important;
        background:transparent !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }

      /* Video container - maintain 245:106 aspect ratio (2940x1272) */
      .hero > div > div:nth-child(2) > div{
        background:transparent !important;
        border:none !important;
        aspect-ratio:245/106 !important;
        width:100% !important;
        position:relative !important;
      }

      /* HIDE video overlays on mobile - they can block interaction */
      .hero video ~ div[style*="position:absolute"]{
        display:none !important;
      }

      /* Caption below video on mobile */
      .hero .video-caption{
        padding:1rem 0.5rem !important;
        font-size:0.85rem !important;
      }
    }

    /* Video caption responsive sizing */
    @media (min-width:769px){
      .hero .video-caption{
        font-size:1rem !important;
      }
    }

    /* Tablet optimizations */
    @media (min-width:769px) and (max-width:1024px){
      .container{
        max-width:95%;
      }

      #heroVideo{
        width:100%;
        height:100%;
        object-fit:contain;
        object-position:center;
        position:absolute;
        top:0;
        left:0;
      }

      .headline.xl{
        font-size:2.5rem;
      }
    }

    /* Desktop optimizations - ensure video shows 100% */
    @media (min-width:1025px){
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:cover !important;
        object-position:center !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }
    }

    @media (max-width:480px){
      .btn{padding:.7rem 1rem;font-size:.95rem;min-height:44px}
      .btn-sm{padding:.5rem .75rem;font-size:.88rem;min-height:40px}
      .headline.xl{font-size:1.95rem}
      .headline.lg{font-size:1.6rem}
      .badge{font-size:.72rem;padding:.3rem .7rem}
      .mini-pill{font-size:.75rem;padding:.25rem .5rem}
      .price{font-size:1.8rem}
      .cta-inner .bar .note{display:none}

      /* Extra small screens - further reduce header button sizes for translated text */
      header .btn,
      header #langToggle,
      header #themeToggle {
        font-size: .75rem !important;
        padding: .35rem .5rem !important;
      }

      header .cta-header {
        max-width: 120px !important;
        font-size: .7rem !important;
        padding: .45rem .6rem !important;
      }

      /* Brand can shrink more on very small screens */
      .brand {
        font-size: 1.1rem !important;
      }

      /* Product card button container - ensure buttons are touch-friendly */
      .card.product > div[style*="display:flex"] {
        gap: .4rem !important;
        flex-wrap: wrap;
      }

      /* Ensure toggle-details buttons are full width on very small screens for easier tapping */
      .toggle-details {
        flex: 1;
        min-width: 120px;
      }

      /* Adjust punch line min-height for mobile to accommodate text wrapping */
      .card.product .punch {
        min-height: 70px;
      }

      /* Extra small screens - video maintains aspect ratio */
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:contain !important;
        object-position:center !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }

      /* Video container maintains aspect ratio */
      .hero > div > div:nth-child(2) > div{
        aspect-ratio:245/106 !important;
        border:none !important;
        width:100% !important;
        position:relative !important;
      }

      /* Hide video overlays on extra small screens */
      .hero video ~ div[style*="position:absolute"]{
        display:none !important;
      }

      /* Caption below video on extra small mobile */
      .hero .video-caption{
        padding:0.75rem 0.5rem !important;
        font-size:0.8rem !important;
      }

      /* Small screen hero description */
      .hero > div > div:last-child p{
        font-size:1rem !important;
      }
    }

    /* Carousel caption mobile styles */
    @media (max-width:768px){
      /* Reduce caption text size on tablets and mobile */
      .carousel-item > div[style*="position:absolute"] > p:first-child{
        font-size:0.9rem !important;
      }
      .carousel-item > div[style*="position:absolute"] > p:last-child{
        font-size:0.7rem !important;
      }
      /* Reduce padding to save space */
      .carousel-item > div[style*="position:absolute"]{
        padding:1.2rem 1rem 1rem !important;
      }
    }

    @media (max-width:480px){
      /* Further reduce caption text on small mobile */
      .carousel-item > div[style*="position:absolute"] > p:first-child{
        font-size:0.85rem !important;
      }
      .carousel-item > div[style*="position:absolute"] > p:last-child{
        font-size:0.65rem !important;
      }
      /* Reduce padding more on small screens */
      .carousel-item > div[style*="position:absolute"]{
        padding:1rem 0.75rem 0.75rem !important;
      }
    }

    .hero-ctas{display:flex;flex-wrap:wrap;gap:.9rem;align-items:center}

    .proof-bar{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.2rem}

    .mini-pill{display:inline-flex;align-items:center;padding:.28rem .55rem;border-radius:999px;font-weight:700;font-size:.78rem;color:#cfe1ff;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14)}



/* Stars + constellations (shared) */
.bg-stars{
  position:fixed; inset:0; z-index:-3; pointer-events:none; opacity:.70;
  background:
    radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.9), transparent 60%),
    radial-gradient(1px 1px at 30% 80%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 70% 30%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1px 1px at 85% 60%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1px 1px at 55% 10%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 15% 55%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 44% 74%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 78% 88%, rgba(255,255,255,.7), transparent 60%);
  filter: drop-shadow(0 0 2px rgba(255,255,255,.25));
}
.sp-constellations{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
  width:100%;
  height:100%;
  display:block;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

  </style>



  <!-- =======================================================================
       STRUCTURED DATA
       ======================================================================= -->

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "Signal Pilot — Trading Suite",
    "description": "Non‑repainting TradingView indicators for any market & timeframe. Seven elite indicators including Pentarch, OmniDeck, Volume Oracle, and more.",
    "brand": {
      "@type": "Brand",
      "name": "Signal Pilot"
    },
    "image": "https://www.signalpilot.io/preview.png",
    "category": "Financial Software",
    "audience": {
      "@type": "Audience",
      "audienceType": "Traders, Investors, Financial Analysts"
    },
    "offers": [
      {
        "@type": "Offer",
        "price": "99",
        "priceCurrency": "USD",
        "priceValidUntil": "2025-12-31",
        "availability": "https://schema.org/InStock",
        "url": "https://www.signalpilot.io/#pricing",
        "name": "月額プラン",
        "seller": {
          "@type": "Organization",
          "name": "Signal Pilot"
        }
      },
      {
        "@type": "Offer",
        "price": "699",
        "priceCurrency": "USD",
        "priceValidUntil": "2025-12-31",
        "availability": "https://schema.org/InStock",
        "url": "https://www.signalpilot.io/#pricing",
        "name": "年間プラン",
        "seller": {
          "@type": "Organization",
          "name": "Signal Pilot"
        }
      },
      {
        "@type": "Offer",
        "price": "1799",
        "priceCurrency": "USD",
        "priceValidUntil": "2025-12-31",
        "availability": "https://schema.org/InStock",
        "url": "https://www.signalpilot.io/#pricing",
        "name": "永久アクセス",
        "seller": {
          "@type": "Organization",
          "name": "Signal Pilot"
        }
      }
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "シグナルはリペイントしますか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "リペイントはゼロです。保証します。すべてのシグナルはローソク足の終値で確定します。すべてのインジケーターを先読みバイアスについて監査しています。リペイントを証明できた場合、100ドルをお支払いします。履歴で見えるものは、リアルタイムで見たものと全く同じです。"
        }
      },
      {
        "@type": "Question",
        "name": "これは金融アドバイスですか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "いいえ。Signal Pilotは教育ツールセットのみです。投資アドバイス、取引推奨、または保証されたリターンではなく、テクニカル分析ツールを提供しています。取引の決定については、お客様ご自身が責任を負います。"
        }
      },
      {
        "@type": "Question",
        "name": "無料のTradingViewで動作しますか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "はい！セットアップに十分なインジケータースロットがあれば大丈夫です。無料アカウントは3スロットで、Pentarch + 1-2フィルターに十分です。Pro/Premiumアカウントはより多くのスロットと無制限のアラートが利用できます。"
        }
      },
      {
        "@type": "Question",
        "name": "アクティベーションはどのくらい速いですか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "通常12-24時間です。TradingViewの招待専用アクセスはメールで届きます。TradingViewの通知に招待が表示されます。緊急のリクエストは support@signalpilot.io までメールしてください。"
        }
      },
      {
        "@type": "Question",
        "name": "プランには何が含まれていますか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "すべてのプランに含まれるもの：エリート7種類、すべての将来のアップデート、継続的なサポート、ドキュメント、プリセット、新しいインジケーターのリリース時のアクセス。ライフタイムプランはすべてを永久に含みます。"
        }
      },
      {
        "@type": "Question",
        "name": "どの時間枠が最適ですか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "すべての時間枠に対応—1分足から年足チャートまで。最も人気：デイトレードには15分-1時間、スイングトレードには4時間-日足。Pentarchの5フェーズサイクルは時間枠に自動的に適応します。"
        }
      },
      {
        "@type": "Question",
        "name": "複数のインジケーターを一緒に使用できますか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "もちろんです！エリート7種類は連携して機能するように設計されています。人気の組み合わせ：Pentarch + Volume Oracleでサイクルタイミングとスマートマネー確認、またはOmniDeck + Janus Atlasで主要レベルと市場構造の完全な分析。"
        }
      },
      {
        "@type": "Question",
        "name": "どの市場に対応していますか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "TradingView上の任意の市場：株式、インデックス、外国為替、暗号通貨、商品、債券。OHLC + 出来高データがあれば、当社のインジケーターが機能します。すべての資産クラスにわたる100以上のシンボルでテスト済みです。"
        }
      }
    ]
  }
  </script>

  <!-- Deferred CSS (non-critical, async loaded) -->
  <link rel="stylesheet" href="/assets/deferred.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/deferred.css"></noscript>

  <!-- Performance & Utilities (async) -->
  <link rel="stylesheet" href="/assets/performance.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/performance.css"></noscript>

  <!-- Cookie Consent CSS - Re-enabled after fixing scroll issue -->
  <link rel="stylesheet" href="/assets/cookie-consent.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/cookie-consent.css"></noscript>

  <!-- AI Chatbot (async) -->
  <link rel="stylesheet" href="/assets/chatbot.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/chatbot.css"></noscript>

  <!-- Device Optimizations (async) -->
  <link rel="stylesheet" href="/assets/device-optimizations.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/device-optimizations.css"></noscript>

  <!-- Structured Data (Schema.org) for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "SoftwareApplication",
        "name": "Signal Pilot",
        "applicationCategory": "BusinessApplication",
        "applicationSubCategory": "Trading インジケーター",
        "operatingSystem": "Web Browser",
        "description": "TradingView向けプロフェッショナルサイクル検出。Pentarch™が完全なマーケットサイクル（TD→IGN→WRN→CAP→BDN）をマッピング。リペイントなし、監査済み。7日間返金保証。",
        "url": "https://www.signalpilot.io/",
        "image": "https://www.signalpilot.io/preview.png",
        "screenshot": "https://www.signalpilot.io/preview.png",
        "offers": [
          {
            "@type": "Offer",
            "name": "月額プラン",
            "price": "99.00",
            "priceCurrency": "USD",
            "priceValidUntil": "2025-12-31",
            "availability": "https://schema.org/InStock",
            "url": "https://www.signalpilot.io/#pricing",
            "description": "7つのエリートインジケーターを含む柔軟な月額課金"
          },
          {
            "@type": "Offer",
            "name": "年間プラン",
            "price": "699.00",
            "priceCurrency": "USD",
            "priceValidUntil": "2025-12-31",
            "availability": "https://schema.org/InStock",
            "url": "https://www.signalpilot.io/#pricing",
            "description": "年間課金 - 月額より489ドルお得（41%オフ）"
          },
          {
            "@type": "Offer",
            "name": "永久ライセンス",
            "price": "1799.00",
            "priceCurrency": "USD",
            "priceValidUntil": "2025-12-31",
            "availability": "https://schema.org/LimitedAvailability",
            "url": "https://www.signalpilot.io/#pricing",
            "description": "永久アクセスの一括払い - 残り350枠のみ"
          }
        ],
        "author": {
          "@type": "Organization",
          "name": "Signal Pilot Labs",
          "url": "https://www.signalpilot.io/"
        },
        "featureList": [
          "SP Pentarch - 5-phase cycle detection",
          "SP OmniDeck - 10-in-1 dashboard",
          "SP Volume Oracle - Institutional flow tracking",
          "SP Plutus Flow - Money flow analysis",
          "SP Janus Atlas - Multi-timeframe key levels",
          "SP Augury Grid - Support/resistance matrix",
          "SP Harmonic Oscillator - Momentum signals"
        ],
        "softwareVersion": "3.0",
        "releaseNotes": "Complete market cycle mapping with zero repaint guarantee"
      },
      {
        "@type": "Organization",
        "name": "Signal Pilot Labs",
        "url": "https://www.signalpilot.io/",
        "logo": "https://www.signalpilot.io/assets/signalpilot-logo.svg",
        "sameAs": [
          "https://twitter.com/signalpilot"
        ],
        "contactPoint": {
          "@type": "ContactPoint",
          "contactType": "Customer Support",
          "email": "support@signalpilot.io",
          "availableLanguage": ["English"]
        }
      },
      {
        "@type": "WebSite",
        "name": "Signal Pilot",
        "url": "https://www.signalpilot.io/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://www.signalpilot.io/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    ]
  }
  </script>

  <!-- Sticky buttons override - must load last to override theme-switcher.js -->
  <style>
    /* Force sticky positioning for theme selector and chatbot on ALL screen sizes */
    button.sp-theme-toggle,
    .sp-theme-toggle {
      position: fixed !important;
      bottom: 90px !important;
      right: 20px !important;
      z-index: 9999 !important;
      top: auto !important;
      left: auto !important;
      transform: none !important;
    }

    button.sp-chatbot-toggle,
    .sp-chatbot-toggle {
      position: fixed !important;
      bottom: 20px !important;
      right: 20px !important;
      z-index: 10000 !important;
      top: auto !important;
      left: auto !important;
      transform: none !important;
    }

    /* Mobile specific adjustments */
    @media (max-width: 768px) {
      button.sp-theme-toggle,
      .sp-theme-toggle {
        bottom: 90px !important;
        right: 20px !important;
        position: fixed !important;
      }

      button.sp-chatbot-toggle,
      .sp-chatbot-toggle {
        bottom: 20px !important;
        right: 20px !important;
        position: fixed !important;
      }
    }

    /* Article carousel styles */
    .article-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0,0,0,.15);
      border-color: var(--brand);
    }
    .articles-carousel::-webkit-scrollbar {
      height: 6px;
    }
    .articles-carousel::-webkit-scrollbar-track {
      background: var(--bg-elev);
      border-radius: 3px;
    }
    .articles-carousel::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 3px;
    }
    .articles-carousel::-webkit-scrollbar-thumb:hover {
      background: var(--muted);
    }

    /* MOBILE: Simple, clean mobile setup */
    @media (max-width: 768px) {
      /* Starfield container - ON TOP, blends with everything below */
      #starfield-container {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        z-index: 9999 !important;
        pointer-events: none !important;
        overflow: visible !important;
        mix-blend-mode: screen !important;
      }

      #starfield-bg {
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
        opacity: 0.6 !important;
      }

      /* Energy beam hidden on mobile for performance */
      #energy-beam-video {
        display: none !important;
      }

      /* Main content */
      main {
        position: relative !important;
        z-index: 1 !important;
      }

      /* Background layers BEHIND everything */
      .bg-stars {
        z-index: -3 !important;
        position: fixed !important;
        filter: none !important;
      }
      .sp-constellations {
        z-index: 1 !important;
        position: fixed !important;
      }

      /* Header needs high z-index for dropdown menus but FULLY transparent bg */
      header,
      header *,
      header .container,
      header .container.nav,
      header .nav-backdrop,
      header .brand,
      header nav,
      header .nav-spacer,
      header .menu-toggle,
      header .lang-dropdown,
      header .btn {
        background: none !important;
        background-color: transparent !important;
        background-image: none !important;
      }

      header {
        position: relative;
        z-index: 100;
        overflow-x: hidden !important;
        max-width: 100vw !important;
        border-bottom: none !important;
      }

      /* Prevent header content from overflowing on mobile with translated text */
      header .container.nav {
        max-width: 100vw !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }

      /* Ensure header buttons adapt to smaller text when necessary */
      header .btn,
      header #langToggle,
      header #themeToggle {
        font-size: .8rem !important;
        padding: .4rem .6rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        flex-shrink: 1 !important;
      }

      /* Language button - allow slight shrinking if needed */
      header #langToggle span {
        max-width: 30px !important;
        overflow: hidden !important;
        text-overflow: clip !important;
      }

      /* CTA button - ensure it doesn't overflow */
      header .cta-header {
        max-width: 140px !important;
        font-size: .75rem !important;
        padding: .5rem .7rem !important;
        text-overflow: ellipsis !important;
        overflow: hidden !important;
      }

      /* Reduce animations for performance - but don't kill them entirely */
      *, *::before, *::after {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
      }

      /* Ensure modals can still animate */
      #cookie-preferences-modal,
      .sp-chatbot-window,
      .mobile-nav,
      [id*="modal"] {
        animation-duration: 0.3s !important;
        transition-duration: 0.3s !important;
      }
    }

    img, video, iframe{
      max-width:100%;
      height:auto;
    }

    /* Ensure main content is above background layers */
    main{
      position:relative;
      min-height:100vh;
      background:transparent !important;
    }

    /* Make all sections transparent so constellations are visible throughout entire site */
    section, .section {
      background:transparent !important;
    }

    /* Override any inline background styles on sections */
    section[style*="background"] {
      background:transparent !important;
    }

    /* Prevent any overflow issues on mobile */
    @media (max-width:768px){
      body, main{
        overflow-x:hidden !important;
      }

      main{
        width:100%;
        display:block;
        background:transparent !important;
      }

      /* Force all sections transparent on mobile so starfield shows through */
      html, body, main, header, section, .section, .container, .stack, #main-content, .nav-backdrop,
      .hero, article, footer, aside, div:not(.card):not(.card *):not(.btn):not(.modal-card):not(.mobile-nav):not(.mobile-nav *) {
        background: transparent !important;
        background-color: transparent !important;
      }

      /* Exception: cards need their background */
      .card, .card.plan, .card.product {
        background: rgba(10, 14, 24, 0.95) !important;
      }

      /* NUCLEAR: Force starfield visible across ENTIRE page */
      body > *:not(#starfield-bg):not(#starfield-container):not(script):not(style):not(.mobile-nav):not(.mobile-nav-backdrop),
      main,
      main > *,
      main section,
      main .section,
      #main,
      #main > *,
      .hero,
      section.section,
      section#trial,
      section#inside,
      section#pricing,
      section#faq,
      section#thanks {
        background: transparent !important;
        background-color: transparent !important;
        background-image: none !important;
      }
    }


    /* FINAL OVERRIDE: Force energy-beam-video to blend correctly with starfield */
    #energy-beam-video {
      mix-blend-mode: screen !important;
      background: transparent !important;
    }

    /* Ensure ALL parent elements up to body are transparent for blend to work */
    /* CRITICAL: z-index: auto removes stacking context so mix-blend-mode can reach starfield */
    .hero,
    #main-content,
    main#main,
    main {
      background: transparent !important;
      background-color: transparent !important;
      z-index: auto !important;
    }

  </style>

<!-- Scroll Reveal Animations (async) -->
  <link rel="stylesheet" href="/assets/scroll-reveal.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/scroll-reveal.css"></noscript>

</head>

<body>

<!-- Scroll progress indicator -->
<div class="scroll-progress" aria-hidden="true"></div>

<!-- Starfield video background - wrapped in fixed container for iOS compatibility -->
<div id="starfield-container" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
  pointer-events: none;
  overflow: hidden;
">
  <video
    id="starfield-bg"
    autoplay
    loop
    muted
    playsinline
    disablepictureinpicture
    preload="auto"
    style="
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.5;
    "
  >
    <source src="../assets/videos/starfield-bg-mobile.mp4?v=23" type="video/mp4">
  </video>
</div>
<script>
// Starfield: Load appropriate video for device + handle visibility
(function() {
  const video = document.getElementById('starfield-bg');
  const source = video.querySelector('source');

  // Default is mobile video (set in HTML). Only switch to desktop if NOT a mobile device.
  // Check user agent - DevTools properly changes this when emulating mobile
  const isMobileDevice = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

  if (!isMobileDevice) {
    source.src = '../assets/videos/starfield-bg.mp4?v=17';
    video.load();
  }
  video.play();

  // Pause when tab hidden, resume when visible
  document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
      video.pause();
    } else {
      video.play();
    }
  });
})();
</script>

<!-- DISABLED: Replaced by starfield video -->
<!-- <div class="bg-stars" aria-hidden="true"></div> -->
<!-- <canvas id="constellations" class="sp-constellations" aria-hidden="true"></canvas> -->

  <!-- DISABLED: Aurora replaced by starfield video -->
  <!-- <div class="bg-aurora" aria-hidden="true"></div> -->



  <!-- HEADER -->

  <header>

    <div class="container nav">



      <a href="/ja/" class="brand">

        <span>Signal Pilot</span>

      </a>



      <nav id="mainnav" aria-label="Main" style="margin-left:4rem">

        <ul>

          <li><a href="#inside">アドベントカレンダー</a></li>

          <li><a href="https://education.signalpilot.io/" target="_blank" rel="noopener">教育</a></li>

          <li class="nav-dropdown">
            <button class="nav-dropdown-toggle" aria-expanded="false" aria-haspopup="true">
              リソース <span class="dropdown-arrow">▼</span>
            </button>
            <ul class="nav-dropdown-menu">
              <li><a href="/ja/chronicle/">クロニクル</a></li>
              <li><a href="https://docs.signalpilot.io/" target="_blank" rel="noopener">ドキュメント</a></li>
              <li><a href="https://blog.signalpilot.io/" target="_blank" rel="noopener">ブログ</a></li>
              <li><a href="/tools/">ツール</a></li>
              <li><a href="https://education.signalpilot.io/calculators.html" target="_blank" rel="noopener">計算機</a></li>
              <li><a href="/ja/faq.html">FAQセンター</a></li>
            </ul>
          </li>

          <li><a href="#pricing">料金プラン</a></li>

          <li><a href="/ja/affiliates.html">アフィリエイト</a></li>

        </ul>

      </nav>

      <div class="nav-spacer"></div>






      <a class="btn btn-primary cta-header" href="#trial">7日間無料トライアル →</a>



      <button class="menu-toggle" id="menuToggle" aria-expanded="false" aria-controls="mainnav">メニュー ☰</button>

    </div>



    <div class="nav-backdrop" id="navBackdrop" aria-hidden="true"></div>

  </header>



  <main id="main">

    <!-- HERO -->

    <section id="main-content" class="hero" style="position:relative;overflow:visible">

      <!-- EPIC Energy Beam v2 -->
      <div id="energy-beam-container" style="position:absolute;top:-70px;left:0;width:100%;height:calc(100% + 70px);pointer-events:none;z-index:0;overflow:visible;display:none"></div>

      <!-- Energy Beam Video - single seamless ping-pong loop -->
      <video
        id="energy-beam-video"
        autoplay
        loop
        muted
        playsinline
        disablepictureinpicture
        preload="auto"
        style="
          position: absolute;
          top: -140px;
          left: -70px;
          height: calc(100% + 210px);
          width: auto;
          pointer-events: none;
          z-index: 0;
          object-fit: cover;
          object-position: left 30%;
          opacity: 1;
          transform: translateZ(0) scaleX(-1);
          mix-blend-mode: screen;
          -webkit-mask-image: linear-gradient(to bottom, black 0%, black 70%, transparent 100%);
          mask-image: linear-gradient(to bottom, black 0%, black 70%, transparent 100%);
        "
      >
        <source src="../assets/videos/signal-conduit-4k.mp4?v=14" type="video/mp4">
      </video>
      <script>
      // Energy beam: Pause when out of view to save GPU resources
      (function() {
        const video = document.getElementById('energy-beam-video');
        if (!video) return;

        // Pause when tab hidden
        document.addEventListener('visibilitychange', function() {
          if (document.hidden) video.pause();
          else if (video.isInView) video.play();
        });

        // Pause when scrolled out of view (saves GPU on 4K video)
        video.isInView = true;
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            video.isInView = entry.isIntersecting;
            if (entry.isIntersecting && !document.hidden) {
              video.play();
            } else {
              video.pause();
            }
          });
        }, { threshold: 0, rootMargin: '100px' });
        observer.observe(video);
      })();
      </script>

      <!-- Animated gradient orbs with parallax -->
      <!-- Parallax orbs removed for performance -->


      <div class="container" style="position:relative;z-index:1">

        <!-- HERO HEADER - Centered -->
        <div style="text-align:center;margin-bottom:3rem" data-reveal="fade-up">

          <h1 class="headline xl">
            <span style="font-size:0.5em;display:block;margin-bottom:0.5rem;color:#9ca3af !important;-webkit-text-fill-color:#9ca3af !important;font-weight:600;text-transform:uppercase;letter-spacing:0.05em">TradingView プロフェッショナル・インジケーター</span>
            優位性は多くを見ることではない。重要なものを見ることだ。
          </h1>

          <p id="hero-description" style="color:var(--muted);font-size:1.15rem;line-height:1.6;max-width:700px;margin:1.5rem auto 0;white-space:nowrap">
            ノンリペイント・サイクル検出 • プレミアム7種類のインジケーター <span id="typed-text" style="color:var(--brand);font-weight:600">本格的なトレーダー向け</span><span id="typing-cursor" style="color:var(--brand);font-weight:300;animation:blink 1s step-end infinite">|</span>
          </p>

        </div>

        <!-- HERO VIDEO - Full Width -->
        <div style="margin-bottom:3rem">

            <!-- PENTARCH CHART SHOWCASE -->
            <div style="position:relative;border-radius:8px;overflow:hidden;background:#0a0e18;margin:0 auto;aspect-ratio:245/106;">

              <!-- Chart Video -->
              <video
                id="heroVideo"
                src="/assets/videos/hero-demo.mp4"
                autoplay
                loop
                muted
                playsinline
                webkit-playsinline
                preload="auto"
                poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 600'%3E%3Crect fill='%230a0e18' width='1200' height='600'/%3E%3C/svg%3E"
                style="width:100%;height:100%;display:block;object-fit:cover;object-position:center;background:#0a0e18;pointer-events:none;position:absolute;top:0;left:0"
                width="1200"
                height="600"
              >
                <source src="/assets/videos/hero-demo.mp4" type="video/mp4">
                お使いのブラウザは動画タグをサポートしていません。
              </video>
              
              <!-- Overlay Badge - Reduced Opacity -->
              <div style="position:absolute;top:1rem;right:1rem;background:rgba(12,16,27,.6);backdrop-filter:blur(8px);padding:.5rem .8rem;border-radius:8px;border:1px solid rgba(91,138,255,.25);display:flex;align-items:center;gap:.5rem;opacity:0.85">
                <span style="width:6px;height:6px;border-radius:50%;background:#3ed598;box-shadow:0 0 8px rgba(62,213,152,.6)"></span>
                <span style="font-size:.8rem;font-weight:700;color:#3ed598">ライブチャート</span>
              </div>
            </div>
            
            <!-- Video Force Play Script + Mobile Fix -->
            <script>
              (function() {
                const video = document.getElementById('heroVideo');
                if (!video) {
                  console.error('Hero video element not found!');
                  return;

                // Set playback speed (1.0 = normal, 1.5 = 50% faster, 2.25 = 2.25x speed, 2.0 = 2x speed)
                video.playbackRate = 2.25;
                }

                // ALL DEVICES: Force dimensions and visibility - SUPER VISIBLE
                function forceVideoVisible() {
                  const width = window.innerWidth;
                  const isMobile = width <= 768;
                  const isTablet = width > 768 && width <= 1024;
                  const isDesktop = width > 1024;

                  // Force video container styles FOR ALL DEVICES
                  const container = video.parentElement;
                  if (container) {
                    container.style.display = 'block';
                    container.style.visibility = 'visible';
                    container.style.background = '#0a0e18';

                    if (isMobile) {
                      container.style.minHeight = '300px';
                    }
                  }

                  // Force video element styles - VISIBLE ON ALL DEVICES
                  video.style.display = 'block';
                  video.style.visibility = 'visible';
                  video.style.opacity = '1';
                  video.style.width = '100%';
                  video.style.objectFit = 'cover';
                  video.style.background = '#0a0e18';

                  // Device-specific sizing
                  if (isMobile) {
                    video.style.minHeight = '300px';
                    video.style.maxHeight = '550px';
                    video.style.height = 'auto';
                    video.style.borderRadius = '12px';
                  } else if (isTablet) {
                    video.style.height = '100%';
                    video.style.maxHeight = '600px';
                  } else {
                    // Desktop
                    video.style.height = '100%';
                  }
                }

                // Run on load
                forceVideoVisible();

                // Run after delays to override other scripts
                setTimeout(forceVideoVisible, 100);
                setTimeout(forceVideoVisible, 500);
                setTimeout(forceVideoVisible, 1000);

                // Re-run on resize
                window.addEventListener('resize', forceVideoVisible);

                // Aggressive play attempts
                function tryPlay(source) {
                  video.play().then(() => {
                    // Video playing successfully
                  }).catch(e => {
                    // Autoplay blocked or failed
                  });
                }

                // IMMEDIATE play attempt - before anything else
                video.play().catch(() => {});

                // Try to play immediately
                tryPlay('initial');

                // Force play after short delay
                setTimeout(() => {
                  video.play().catch(() => {});
                }, 100);

                setTimeout(() => {
                  video.play().catch(() => {});
                }, 300);

                // Wait for loadeddata event
                video.addEventListener('loadeddata', function() {
                  tryPlay('loadeddata');
                  // Extra play attempt
                  setTimeout(() => video.play().catch(() => {}), 50);
                }, { once: true });

                // Wait for canplay event
                video.addEventListener('canplay', function() {
                  tryPlay('canplay');
                }, { once: true });

                // Wait for canplaythrough event (fully loaded)
                video.addEventListener('canplaythrough', function() {
                  tryPlay('canplaythrough');
                }, { once: true });

                // Retry play on user interaction
                let played = false;
                document.addEventListener('click', function() {
                  if (!played && video.paused) {
                    tryPlay('click');
                    played = true;
                  }
                });

                // Also try to play on touch (mobile)
                document.addEventListener('touchstart', function() {
                  if (!played && video.paused) {
                    tryPlay('touch');
                    played = true;
                  }
                });

                // Ensure loop
                video.addEventListener('ended', function() {
                  video.currentTime = 0;
                  video.play();
                });

                // Check if video is actually playing
                setTimeout(() => {
                  // Silent check - no logging needed in production
                  if (video.paused) {
                    // Video requires user interaction
                  }
                }, 2000);
              })();
            </script>

            </div>

            <!-- Signal Legend - Improved Readability -->
            <div class="video-caption" style="padding:2rem 1rem;text-align:center;max-width:1000px;margin:0 auto">
              <p style="margin:0 0 1.5rem 0;font-size:1rem;line-height:1.7;color:rgba(255,255,255,0.9)">
                <strong>5つのシグナルが完全なマーケットサイクルをマッピング。</strong> TDは売りが枯渇した時に出現。CAPは買いがクライマックスに達した時に出現。転換を予測するのではなく、構造の変化を見る。転換に備える。追いかけない。
              </p>
              <div class="signal-legend" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;max-width:1200px;margin:0 auto">
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(168,85,247,.08);border:1px solid rgba(168,85,247,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#a855f7;box-shadow:0 0 8px rgba(168,85,247,.4);flex-shrink:0"></span>
                  <strong style="color:#c084fc;font-size:.9rem;white-space:nowrap;flex-shrink:0">TD</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ タッチダウン（蓄積フェーズ）</span>
                </div>
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(20,184,166,.08);border:1px solid rgba(20,184,166,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#14b8a6;box-shadow:0 0 8px rgba(20,184,166,.4);flex-shrink:0"></span>
                  <strong style="color:#2dd4bf;font-size:.9rem;white-space:nowrap;flex-shrink:0">IGN</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ イグニション（上昇フェーズ）</span>
                </div>
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(249,115,22,.08);border:1px solid rgba(249,115,22,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#f97316;box-shadow:0 0 8px rgba(249,115,22,.4);flex-shrink:0"></span>
                  <strong style="color:#fb923c;font-size:.9rem;white-space:nowrap;flex-shrink:0">CAP</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ 頂点（クライマックスフェーズ）</span>
                </div>
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(234,179,8,.08);border:1px solid rgba(234,179,8,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#eab308;box-shadow:0 0 8px rgba(234,179,8,.4);flex-shrink:0"></span>
                  <strong style="color:#facc15;font-size:.9rem;white-space:nowrap;flex-shrink:0">WRN</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ 警告（分配フェーズ）</span>
                </div>
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#ef4444;box-shadow:0 0 8px rgba(239,68,68,.4);flex-shrink:0"></span>
                  <strong style="color:#f87171;font-size:.9rem;white-space:nowrap;flex-shrink:0">BDN</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ 崩壊（下降フェーズ）</span>
                </div>
              </div>
            </div>

      </div>

    </section>

    <!-- CYCLE PHILOSOPHY SECTION -->
    <section class="section" style="padding:3rem 0;">
      <div class="container" style="max-width:800px;text-align:center">
        <h2 class="headline lg" style="margin-bottom:1.5rem">
          <span class="shimmer-text">予測ではない。認識している。</span>
        </h2>
        <p style="color:var(--muted);font-size:1.15rem;line-height:1.7;max-width:650px;margin:0 auto">
          強気でも弱気でも、サイクルは同じように終わる。長期の売りの後にTDが出現したら、それは枯渇。長期の上昇の後にCAPが発火したら、それはクライマックス。市場はサイクルで語る。
        </p>
      </div>
    </section>

    <!-- FREE TRIAL SECTION -->
    <section id="trial" class="section" style="padding:4rem 0;">
      <div class="container" style="max-width:800px">

        <div style="text-align:center;margin-bottom:3rem" data-reveal="fade-up">
          <h2 class="headline lg" style="margin-bottom:1rem">
            7種類のインジケーターを7日間無料でお試しください
          </h2>

          <p style="color:var(--muted);font-size:1.15rem;line-height:1.6;max-width:600px;margin:0 auto">
            Pentarchサイクル検出の実際をご覧ください。アラートを設定し、
            戦略をテストしてください。 <strong style="color:var(--brand)">リスクゼロ、契約不要。</strong>
          </p>
        </div>

        <!-- Trust Badge -->
        <div style="display:flex;justify-content:center;margin-bottom:3rem" data-reveal="scale" data-reveal-delay="200">
          <div style="display:flex;align-items:center;gap:0.5rem;background:rgba(91,138,255,.08);border:1px solid rgba(91,138,255,.25);padding:0.75rem 1.25rem;border-radius:8px">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg>
            <span style="font-size:0.9rem;font-weight:600;color:#5b8aff">クレジットカード不要 • 24時間以内にアクセス</span>
          </div>
        </div>

        <!-- Trial Signup Form -->
        <div style="background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(91,138,255,.02));padding:3rem;border-radius:16px;border:1px solid rgba(91,138,255,.2)" data-reveal="fade-up" data-reveal-delay="300">

          <form id="trialForm" style="max-width:500px;margin:0 auto">

            <!-- Honeypot field - hidden from humans, catches bots -->
            <input type="text" name="website" id="website" style="position:absolute;left:-5000px" tabindex="-1" autocomplete="off">

            <div style="margin-bottom:1.5rem">
              <label for="trialEmail" style="display:block;font-weight:600;margin-bottom:0.5rem;color:var(--text)">
                メールアドレス
              </label>
              <input
                type="email"
                id="trialEmail"
                name="email"
                placeholder="メールアドレス"
                required
                style="width:100%;padding:1rem;border-radius:8px;border:1px solid var(--border);background:var(--bg-soft);color:var(--text);font-size:1rem;font-family:inherit"
              >
            </div>

            <div style="margin-bottom:1.5rem">
              <label for="trialTvUsername" style="display:block;font-weight:600;margin-bottom:0.5rem;color:var(--text)">
                TradingViewユーザー名
              </label>
              <input
                type="text"
                id="trialTvUsername"
                name="tradingview_username"
                placeholder="TradingViewユーザー名を入力"
                required
                style="width:100%;padding:1rem;border-radius:8px;border:1px solid var(--border);background:var(--bg-soft);color:var(--text);font-size:1rem;font-family:inherit"
              >
              <p style="font-size:0.85rem;color:var(--muted-2);margin-top:0.5rem">
                このTradingViewアカウントにインジケーターの招待状を送信します
              </p>
            </div>

            <label class="consent" style="margin-bottom:1.5rem">
              <input type="checkbox" id="trialConsent" required>
              <span>
                私は <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span> が教育目的のみであり、金融アドバイスではないことを理解しています。
                <a href="/ja/terms.html" style="color:var(--brand)">利用規約</a>
              </span>
            </label>

            <button
              type="submit"
              class="btn btn-primary"
              style="width:100%;padding:1.25rem;font-size:1.1rem;font-weight:700"
            >
              7日間無料トライアル →
            </button>

            <p style="text-align:center;font-size:0.85rem;color:var(--muted-2);margin-top:1rem">
              クレジットカード不要。7日後にトライアルは期限切れとなり、料金は発生しません。
            </p>

          </form>

          <!-- Success Message (hidden by default) -->
          <div id="trialSuccess" style="display:none;text-align:center;padding:2rem">
            <div style="font-size:3rem;margin-bottom:1rem">🎉</div>
            <h3 style="font-size:1.5rem;font-weight:700;color:var(--brand);margin-bottom:1rem">トライアル開始！</h3>
            <p style="color:var(--text);margin-bottom:0.5rem">
              確認メールと次のステップをメールでご確認ください。
            </p>
            <p style="color:var(--muted);font-size:0.9rem;margin-bottom:0.5rem">
              TradingViewの招待状は24時間以内に届きます。
            </p>
            <p style="color:var(--muted-2);font-size:0.85rem;margin-bottom:2rem">
              ご質問がありますか？メールでお問い合わせください： <a href="mailto:support@signalpilot.io" style="color:var(--brand);text-decoration:none">support@signalpilot.io</a>
            </p>

            <!-- Education CTA -->
            <div style="background:linear-gradient(135deg,rgba(62,213,152,.08),rgba(62,213,152,.02));padding:2rem;border-radius:12px;border:1px solid rgba(62,213,152,.2);margin-top:1.5rem">
              <p style="color:var(--text);font-weight:600;margin-bottom:0.75rem;font-size:1.05rem">
                お待ちいただいている間、学習を始めましょう：
              </p>
              <p style="color:var(--muted);font-size:0.9rem;margin-bottom:1.25rem">
                82レッスンの包括的なトレーニングセンターに無料でアクセス
              </p>
              <a href="https://education.signalpilot.io" target="_blank" rel="noopener" class="btn btn-primary" style="display:inline-flex;align-items:center;gap:0.5rem">
                無料で学習を開始 →
              </a>
            </div>
          </div>

        </div>

        <!-- Social Proof -->
        <div style="text-align:center;margin-top:2rem">
          <p style="font-size:0.9rem;color:var(--muted-2)">
            7日後：継続する場合は登録（月額$99）、またはトライアルは期限切れとなります
          </p>
        </div>

      </div>
    </section>

    <!-- PENTARCH IN ACTION - PROOF GALLERY -->
    <section class="section" style="padding:4rem 0;overflow:visible">

      <div class="container">

        <!-- Section Header -->
        <div style="text-align:center;margin-bottom:3rem" data-reveal="fade-up">
          <h2 class="headline lg" style="margin-bottom:1rem">実際の動作をご覧ください</h2>
          <p class="note" style="max-width:55ch;margin:0 auto;color:var(--muted)">
            優位性を可視化。
          </p>
        </div>

        <!-- Carousel Container -->
        <div style="position:relative;max-width:1200px;margin:0 auto">

          <!-- Navigation Arrows -->
          <button id="carousel-prev" aria-label="前のチャート" style="position:absolute;left:-60px;top:50%;transform:translateY(-50%);z-index:10;background:var(--bg-elev);border:2px solid var(--brand);border-radius:50%;width:48px;height:48px;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;color:var(--brand);font-size:1.5rem;box-shadow:0 4px 12px rgba(0,0,0,0.3)">
            ‹
          </button>

          <button id="carousel-next" aria-label="次のチャート" style="position:absolute;right:-60px;top:50%;transform:translateY(-50%);z-index:10;background:var(--bg-elev);border:2px solid var(--brand);border-radius:50%;width:48px;height:48px;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;color:var(--brand);font-size:1.5rem;box-shadow:0 4px 12px rgba(0,0,0,0.3)">
            ›
          </button>

          <!-- Scrollable Gallery -->
          <div id="pentarch-carousel" role="region" aria-label="チャート例のカルーセル" aria-live="polite" style="display:flex;gap:1.5rem;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;padding:1rem 0;-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none">

            <!-- Chart 1 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/1.webp" alt="Pentarch indicator on Apple stock 12-hour chart showing multi-timeframe cycle analysis with TD touchdown signals and phase markers" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <!-- Caption Overlay -->
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-1">
                  Apple：マルチタイムフレーム精度
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  12h
                </p>
              </div>
            </div>

            <!-- Chart 2 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/2.webp" alt="Pentarch indicator on Bitcoin weekly chart displaying long-term trend detection with 5-phase cycle analysis and momentum tracking" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-2">
                  ビットコイン：長期トレンドマスター
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1W
                </p>
              </div>
            </div>

            <!-- Chart 3 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/3.webp" alt="Pentarch indicator on Dollar Index weekly chart showing currency trend signals with cycle phase detection and strength indicators" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-3">
                  ドルインデックス：通貨シグナル
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1W
                </p>
              </div>
            </div>

            <!-- Chart 4 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/4.webp" alt="Pentarch indicator on Ethereum daily chart displaying crypto momentum alerts with phase transition markers and TD signals" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-4">
                  イーサリアム：クリプトモメンタムアラート
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1D
                </p>
              </div>
            </div>

            <!-- Chart 5 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/5.webp" alt="Pentarch indicator on EUR/USD monthly chart showing forex trend detection with long-term cycle analysis and reversal signals" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-5">
                  EUR/USD：FXトレンド検出
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1M
                </p>
              </div>
            </div>

            <!-- Chart 6 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/6.webp" alt="Pentarch indicator on MicroStrategy 3-day chart tracking volatility with cycle phases and momentum strength indicators" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-6">
                  MicroStrategy：ボラティリティ追跡
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  3D
                </p>
              </div>
            </div>

            <!-- Chart 7 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/7.webp" alt="Pentarch indicator on S&P 500 2-day chart providing index intelligence with phase-based analysis and trend confirmation" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-7">
                  S&P 500：インデックスインテリジェンス
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  2D
                </p>
              </div>
            </div>

            <!-- Chart 8 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/8.webp" alt="Pentarch indicator on Tesla weekly chart identifying swing trade signals with cycle timing and TD touchdown confirmations" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-8">
                  Tesla：スイングトレードシグナル
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1W
                </p>
              </div>
            </div>

            <!-- Chart 9 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/9.webp" alt="Pentarch indicator on Gold daily chart showing safe haven timing with precise cycle phases and reversal detection" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-9">
                  Or : Timing de valeur refuge
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1D
                </p>
              </div>
            </div>

          </div>

          <!-- Hide scrollbar -->
          <style>
            #pentarch-carousel::-webkit-scrollbar {
              display: none;
            }

            #carousel-prev:hover,
            #carousel-next:hover {
              background: var(--brand);
              color: var(--bg);
              transform: translateY(-50%) scale(1.1);
              box-shadow: 0 6px 20px rgba(91,138,255,0.4);
            }

            .carousel-item {
              cursor: zoom-in !important;
            }

            .carousel-item:hover {
              border-color: var(--brand);
              box-shadow: 0 8px 32px rgba(91,138,255,0.3);
              transition: all 0.3s ease;
              transform: scale(1.02);
            }

            .carousel-item img {
              cursor: zoom-in !important;
              pointer-events: auto !important;
            }

            /* Mobile: Hide arrows, optimize gap for touch */
            @media (max-width: 768px) {
              #carousel-prev,
              #carousel-next {
                display: none;
              }

              #pentarch-carousel {
                gap: 0.75rem; /* Increased for better visual separation on mobile */
              }

              /* Ensure carousel items maintain proper aspect ratio on mobile */
              .carousel-item {
                min-height: 200px;
              }

              .carousel-item img {
                object-fit: cover;
                width: 100%;
                height: 100%;
              }
            }

            /* Tablet optimization */
            @media (min-width: 769px) and (max-width: 1024px) {
              #carousel-prev {
                left: -50px;
              }

              #carousel-next {
                right: -50px;
              }
            }

            /* Lightbox styles */
            #carousel-lightbox {
              display: none;
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              z-index: 99999;
            }

            #carousel-lightbox.active {
              display: flex;
              align-items: center;
              justify-content: center;
            }

            .lightbox-overlay {
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(5, 7, 13, 0.95);
              backdrop-filter: blur(10px);
            }

            .lightbox-content {
              position: relative;
              z-index: 100000;
              max-width: 95vw;
              max-height: 95vh;
              display: flex;
              flex-direction: column;
              align-items: center;
              animation: lightboxZoom 0.3s ease-out;
            }

            @keyframes lightboxZoom {
              from {
                transform: scale(0.8);
                opacity: 0;
              }
              to {
                transform: scale(1);
                opacity: 1;
              }
            }

            .lightbox-image {
              max-width: 100%;
              max-height: 85vh;
              width: auto;
              height: auto;
              border-radius: 12px;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
              border: 2px solid rgba(91, 138, 255, 0.3);
            }

            .lightbox-close {
              position: absolute;
              top: -50px;
              right: 0;
              background: rgba(255, 255, 255, 0.1);
              border: 2px solid rgba(255, 255, 255, 0.3);
              color: white;
              font-size: 2rem;
              width: 45px;
              height: 45px;
              border-radius: 50%;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              transition: all 0.3s ease;
              line-height: 1;
            }

            .lightbox-close:hover {
              background: var(--brand);
              border-color: var(--brand);
              transform: rotate(90deg) scale(1.1);
            }

            .lightbox-caption {
              margin-top: 1rem;
              color: var(--brand);
              font-size: 1.2rem;
              font-weight: 700;
              text-align: center;
              padding: 0.5rem 1rem;
              background: rgba(91, 138, 255, 0.1);
              border-radius: 8px;
              border: 1px solid rgba(91, 138, 255, 0.3);
            }

            /* Mobile lightbox adjustments */
            @media (max-width: 768px) {
              .lightbox-content {
                max-width: 98vw;
                max-height: 98vh;
              }

              .lightbox-image {
                max-height: 80vh;
              }

              .lightbox-close {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
              }

              .lightbox-caption {
                font-size: 1rem;
                margin-top: 0.5rem;
              }
            }
          </style>

          <!-- Carousel Navigation Script -->
          <script>
            (function() {
              const carousel = document.getElementById('pentarch-carousel');
              const prevBtn = document.getElementById('carousel-prev');
              const nextBtn = document.getElementById('carousel-next');
              const items = carousel.querySelectorAll('.carousel-item');
              const carouselImages = carousel.querySelectorAll('.carousel-item img');
              let currentIndex = 0;
              let autoScrollInterval;

              // Scroll to specific index
              function scrollToIndex(index) {
                if (index < 0) index = items.length - 1;
                if (index >= items.length) index = 0;
                currentIndex = index;

                const itemWidth = items[0].offsetWidth;
                // 1.5rem on desktop, 0.5rem on mobile
                const gap = window.innerWidth <= 768 ? 8 : 24;
                carousel.scrollLeft = (itemWidth + gap) * currentIndex;
              }

              // Navigation
              prevBtn.addEventListener('click', () => {
                scrollToIndex(currentIndex - 1);
                resetAutoScroll();
              });

              nextBtn.addEventListener('click', () => {
                scrollToIndex(currentIndex + 1);
                resetAutoScroll();
              });

              // Auto-scroll every 10 seconds
              function startAutoScroll() {
                autoScrollInterval = setInterval(() => {
                  scrollToIndex(currentIndex + 1);
                }, 10000);
              }

              function resetAutoScroll() {
                clearInterval(autoScrollInterval);
                startAutoScroll();
              }

              // Start auto-scroll
              startAutoScroll();

              // Pause on hover
              carousel.addEventListener('mouseenter', () => {
                clearInterval(autoScrollInterval);
              });

              carousel.addEventListener('mouseleave', () => {
                startAutoScroll();
              });

              // Update index on manual scroll (mobile swipe)
              let scrollTimeout;
              carousel.addEventListener('scroll', () => {
                try {
                  clearTimeout(scrollTimeout);
                  scrollTimeout = setTimeout(() => {
                    try {
                      const scrollLeft = carousel.scrollLeft;
                      const itemWidth = items[0].offsetWidth;
                      // 1.5rem on desktop, 0.5rem on mobile
                      const gap = window.innerWidth <= 768 ? 8 : 24;
                      currentIndex = Math.round(scrollLeft / (itemWidth + gap));
                      updateDots();
                    } catch(e) {
                      // Silently handle carousel scroll errors
                    }
                  }, 100);
                } catch(e) {
                  // Silently handle scroll event errors
                }
              }, { passive: true });

              // Keyboard navigation (left/right arrows)
              document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                  scrollToIndex(currentIndex - 1);
                  resetAutoScroll();
                } else if (e.key === 'ArrowRight') {
                  scrollToIndex(currentIndex + 1);
                  resetAutoScroll();
                }
              });

              // Pagination dots
              const dotsContainer = document.getElementById('carousel-dots');
              const dots = [];

              // Create dots only if container exists
              if (dotsContainer) {
                for (let i = 0; i < items.length; i++) {
                  const dot = document.createElement('button');
                  dot.className = 'carousel-dot';
                  dot.setAttribute('aria-label', `Go to chart ${i + 1}`);
                  dot.addEventListener('click', () => {
                    scrollToIndex(i);
                    resetAutoScroll();
                  });
                  dots.push(dot);
                  dotsContainer.appendChild(dot);
                }
              }

              // Update active dot
              function updateDots() {
                if (dotsContainer && dots.length > 0) {
                  dots.forEach((dot, i) => {
                    if (i === currentIndex) {
                      dot.classList.add('active');
                    } else {
                      dot.classList.remove('active');
                    }
                  });
                }
              }

              // Initialize dots
              updateDots();

              // Aggressive image preloading to fix lazy loading issues on fast scroll
              // Remove lazy loading attribute and force immediate load
              if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries) => {
                  try {
                    entries.forEach(entry => {
                      const img = entry.target;
                      // Preload images when they're within 800px of viewport
                      if (entry.isIntersecting || entry.intersectionRatio > 0) {
                        // Force load by removing lazy attribute
                        img.removeAttribute('loading');
                        // Ensure src is set (in case it was data-src)
                        if (img.dataset.src) {
                          img.src = img.dataset.src;
                          img.removeAttribute('data-src');
                        }
                        imageObserver.unobserve(img);
                      }
                    });
                  } catch(e) {
                    // Silently handle image loading errors
                  }
                }, {
                  root: null,
                  rootMargin: '800px', // Large margin to preload before visible
                  threshold: 0
                });

                // Observe all carousel images
                carouselImages.forEach(img => {
                  imageObserver.observe(img);
                });
              } else {
                // Fallback: immediately load all images if IntersectionObserver not supported
                carouselImages.forEach(img => {
                  img.removeAttribute('loading');
                });
              }

              // Carousel item click handlers - stop auto-scroll and open lightbox
              items.forEach((item, index) => {
                item.style.cursor = 'zoom-in';

                // Add click handler to both item and image
                const clickHandler = (e) => {
                  // Don't trigger if clicking on navigation buttons
                  if (e.target.closest('#carousel-prev') || e.target.closest('#carousel-next')) {
                    return;
                  }
                  e.preventDefault();
                  e.stopPropagation();
                  clearInterval(autoScrollInterval);

                  const img = item.querySelector('img');
                  if (img && img.src) {
                    console.log('Opening lightbox for image:', img.alt);
                    openLightbox(img.src, img.alt, index);
                  }
                };

                item.addEventListener('click', clickHandler);

                // Also add to the image directly
                const img = item.querySelector('img');
                if (img) {
                  img.style.cursor = 'zoom-in';
                  img.style.pointerEvents = 'auto';
                  img.addEventListener('click', clickHandler);
                }
              });

              // Lightbox functionality
              function openLightbox(imageSrc, imageAlt, imageIndex) {
                // Create lightbox if it doesn't exist
                let lightbox = document.getElementById('carousel-lightbox');
                if (!lightbox) {
                  lightbox = document.createElement('div');
                  lightbox.id = 'carousel-lightbox';
                  lightbox.innerHTML = `
                    <div class="lightbox-overlay"></div>
                    <div class="lightbox-content">
                      <button class="lightbox-close" aria-label="Close lightbox">&times;</button>
                      <img class="lightbox-image" src="" alt="">
                      <div class="lightbox-caption"></div>
                    </div>
                  `;
                  document.body.appendChild(lightbox);

                  // Close handlers
                  const closeBtn = lightbox.querySelector('.lightbox-close');
                  const overlay = lightbox.querySelector('.lightbox-overlay');

                  const closeLightbox = () => {
                    lightbox.classList.remove('active');
                    document.body.style.overflow = '';
                    startAutoScroll();
                  };

                  closeBtn.addEventListener('click', closeLightbox);
                  overlay.addEventListener('click', closeLightbox);

                  // Keyboard close (ESC)
                  document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && lightbox.classList.contains('active')) {
                      closeLightbox();
                    }
                  });
                }

                // Set image and caption
                const lightboxImg = lightbox.querySelector('.lightbox-image');
                const lightboxCaption = lightbox.querySelector('.lightbox-caption');
                const caption = document.getElementById(`caption-${imageIndex + 1}`);

                lightboxImg.src = imageSrc;
                lightboxImg.alt = imageAlt;
                lightboxCaption.textContent = caption ? caption.textContent : imageAlt;

                // Show lightbox
                lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
              }
            })();
          </script>

        </div>

        <!-- Pagination Dots -->
        <div id="carousel-dots" style="display:flex;justify-content:center;align-items:center;gap:0.5rem;margin-top:1.5rem"></div>

        <style>
          .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--muted-soft);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.4;
            padding: 0;
          }

          .carousel-dot:hover {
            opacity: 0.7;
            transform: scale(1.2);
          }

          .carousel-dot.active {
            background: var(--brand);
            opacity: 1;
            width: 24px;
            border-radius: 5px;
          }

          @media (max-width: 768px) {
            .carousel-dot {
              width: 8px;
              height: 8px;
            }

            .carousel-dot.active {
              width: 20px;
            }
          }
        </style>

        <!-- Swipe hint for mobile -->
        <p style="text-align:center;margin-top:1.5rem;color:var(--muted-soft);font-size:0.9rem">
          <span style="display:none" id="swipe-hint">← スワイプして続きを見る →</span>
        </p>

        <script>
          // Show swipe hint on mobile
          if (window.innerWidth <= 768) {
            document.getElementById('swipe-hint').style.display = 'inline';
          }
        </script>

      </div>

    </section>

    <!-- WHAT'S INSIDE -->

    <section id="inside" class="section">

      <div class="container stack">

        <div data-reveal="fade-up">

        <h2 class="headline lg" style="text-align:center;max-width:20ch;margin-left:auto;margin-right:auto;margin-top:3rem"><span class="shimmer-text">エリート<span data-count="7" data-text-mode>7</span>種類</span></h2>

        <p class="note" style="text-align:center;max-width:68ch;margin:0 auto 1.5rem">
          Pentarch™が完全なサイクルをマッピング。6つのエリートツールがコンテキストを提供。ノイズより構造。
        </p>


        </div>

        <div class="grid auto-300">

          <!-- INDICATOR 1: PENTARCH (FLAGSHIP) -->
          <article class="card product" style="position:relative;border:2px solid var(--brand);box-shadow:0 0 40px rgba(91,138,255,.15)">

            <!-- FLAGSHIP Badge - Top Right Corner -->
            <span class="badge" style="position:absolute;top:1rem;right:1rem;font-size:.75rem;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;padding:.3rem .7rem;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;z-index:10">★ FLAGSHIP</span>

            <!-- Screenshot Box - READY FOR YOUR IMAGE -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px dashed rgba(91,138,255,.4);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.12),rgba(118,221,255,.06))">
              <img src="/assets/screenshots/pentarch-screenshot.jpg" alt="Pentarch cycle detection on BTC chart" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay (remove 'display:flex' when you add real image, or delete this div entirely) -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Pentarchスクリーンショットを追加</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">16:9比率推奨</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Pentarch</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="pentarch-details">詳細 ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/pentarch-v10/" target="_blank" rel="noopener">ドキュメント</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/how-to-trade-cycles-with-pentarch/" target="_blank" rel="noopener" style="color:var(--brand)">実際の動作を見る →</a>
            </div>
            <div id="pentarch-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>市場の信号機のように</strong> — 5つの主要シグナルでサイクル内の正確な位置を表示：</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0;margin-bottom:1rem">
                <li>• <strong style="color:#00FF7F">🟢 TD + IGN:</strong> 下降トレンド終息、上昇モメンタム構築中（初期サイクル）</li>
                <li>• <strong style="color:#FFD700">🟡 WRN:</strong> 価格上昇中だが弱さを示す（注意ゾーン）</li>
                <li>• <strong style="color:#FF4560">🔴 CAP + BDN:</strong> 上昇トレンド終息、下降モメンタム構築中（後期サイクル）</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin:0"><strong>さらに:</strong> カラーコード化されたパイロットライン（トレンド方向）、カラーコード化されたローソク足（市場構造）、NanoFlowクロス（モメンタム強度）。あらゆる市場、あらゆる時間軸で機能。</p>
            </div>
          </article>

          <!-- INDICATOR 2: OMNIDECK -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="/assets/screenshots/omnideck-screenshot.jpg" alt="OmniDeck all-in-one indicator" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">OmniDeckスクリーンショットを追加</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">16:9比率推奨</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — OmniDeck</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="omnideck-details">詳細 ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/omnideck-v10/" target="_blank" rel="noopener">ドキュメント</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/inside-signal-pilot/" target="_blank" rel="noopener" style="color:var(--brand)">実際の動作を見る →</a>
            </div>
            <div id="omnideck-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong><span data-count="10" data-text-mode>10</span>の強力なツールを1つのクリーンなオーバーレイに集約。</strong> チャートを散らかす代わりに、必要なすべてを1つのインジケーターで：</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• <strong>TDシーケンシャル</strong>（エグゾーションシグナル） • <strong>スクイーズクラウド</strong>（ブレイクアウト検出）</li>
                <li>• <strong>スーパートレンドアンサンブル</strong>（トレンド確認） • <strong>強気相場サポートバンド</strong></li>
                <li>• <strong>需給ゾーン</strong> • <strong>ローソク足パターン</strong> • <strong>流動性スイープ</strong></li>
                <li>• <strong>レジームシステム</strong>（強気/弱気/レンジ） • <strong>EMAイベント</strong> • <strong>注意警告</strong></li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">必要に応じて各システムをオン/オフ切り替え。1つのインジケーター、複数の確認、散らかりゼロ。</p>
            </div>
          </article>

          <!-- INDICATOR 3: VOLUME ORACLE -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="/assets/screenshots/volume-oracle-screenshot.jpg" alt="Volume Oracle institutional flow tracking" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Volume Oracleスクリーンショットを追加</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">16:9比率推奨</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Volume Oracle</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="oracle-details">詳細 ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/volume-oracle-v10/" target="_blank" rel="noopener">ドキュメント</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/accumulation-vs-distribution/" target="_blank" rel="noopener" style="color:var(--brand)">実際の動作を見る →</a>
            </div>
            <div id="oracle-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>スマートマネーを追跡。</strong> 機関投資家の蓄積/分配パターンを信頼度レベルで追跡：</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• 現在のフェーズ（蓄積 vs 分配）を強度パーセンテージ（0-100%）で表示</li>
                <li>• 継続期間追跡 — 機関投資家がポジションを構築/撤退している期間</li>
                <li>• パターンが弱まると早期警告が点滅</li>
                <li>• 組み込みポジション計算機が現在のレジーム基づきリスクレベルを提案</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">例：「蓄積 82%」= 強い機関投資家の買いを検出。マネーに従う。</p>
            </div>
          </article>

          <!-- INDICATOR 4: PLUTUS FLOW -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="/assets/screenshots/plutus-flow-screenshot.jpg" alt="Plutus Flow cumulative delta tracking" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Plutus Flowスクリーンショットを追加</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">16:9比率推奨</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Plutus Flow</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="plutus-details">詳細 ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/plutus-flow-v10/" target="_blank" rel="noopener">ドキュメント</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/accumulation-vs-distribution/" target="_blank" rel="noopener" style="color:var(--brand)">実際の動作を見る →</a>
            </div>
            <div id="plutus-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>綱引きメーター。</strong> 時間経過に伴う累積需要と供給圧力を追跡：</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• <strong>緑のリボン:</strong> 需要が優勢 | <strong>赤のリボン:</strong> 供給が優勢</li>
                <li>• <strong>センターラインクロス:</strong> モメンタムが方向転換</li>
                <li>• <strong>白いドット:</strong> 極端な圧力レベルに到達</li>
                <li>• <strong>ダイバージェンスマーク:</strong> 価格とフローが不一致（隠れた弱さ/強さ）</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">価格変動に本物の出来高サポートがあるか、それとも単なるノイズかを明らかにします。</p>
            </div>
          </article>

          <!-- INDICATOR 5: JANUS ATLAS -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="/assets/screenshots/janus-atlas-screenshot.jpg" alt="Janus Atlas multi-timeframe key levels" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Janus Atlasスクリーンショットを追加</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">16:9比率推奨</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Janus Atlas</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="janus-details">詳細 ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/janus-atlas-v10/" target="_blank" rel="noopener">ドキュメント</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/how-smart-money-moves/" target="_blank" rel="noopener" style="color:var(--brand)">実際の動作を見る →</a>
            </div>
            <div id="janus-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>重要レベルを自動プロット。</strong> 手動で何百本もラインを引く必要がなくなります：</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• 上位時間軸レベル（日次、週次、月次、四半期）</li>
                <li>• 前セッションデータ（昨日の高値/安値、先週のレンジ、ピボット）</li>
                <li>• VWAPアンカー（公正価値ゾーン） + Volume Profile（POC、VAH/VAL）</li>
                <li>• セッションマーカー（アジア/ロンドン/NYCオープン） + 構造ラベル（BOS/CHoCH）</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">トレーダーが反応する重要な価格レベルのロードマップ。すべて自動。</p>
            </div>
          </article>

          <!-- INDICATOR 6: AUGURY GRID -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="/assets/screenshots/augury-grid-screenshot.jpg" alt="Augury Grid multi-symbol tracking table" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Augury Gridスクリーンショットを追加</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">16:9比率推奨</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Augury Grid</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="augury-details">詳細 ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/augury-grid-v10/" target="_blank" rel="noopener">ドキュメント</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/multi-timeframe-confirmation/" target="_blank" rel="noopener" style="color:var(--brand)">実際の動作を見る →</a>
            </div>
            <div id="augury-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>ミッションコントロールダッシュボード。</strong> 8つ以上の市場を同時追跡し、最もクリーンなセットアップを最初に確認：</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• シグナル方向（↑ 強気、↓ 弱気、— 中立） + シグナル発生からの時間</li>
                <li>• 品質スコア（0-100） — スコアが高いほどより多くのインジケーターが整合</li>
                <li>• ターゲット価格 + リアルタイムP&Lトラッカー</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">チャートを切り替える必要なし。ランク付けされたウォッチリストを一目で確認。</p>
            </div>
          </article>

          <!-- INDICATOR 7: HARMONIC OSCILLATOR -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="/assets/screenshots/harmonic-oscillator-screenshot.jpg" alt="Harmonic Oscillator multi-confirmation timing" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Harmonic Oscillatorスクリーンショットを追加</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">16:9比率推奨</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Harmonic Oscillator</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="harmonic-details">詳細 ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/harmonic-oscillator-v10/" target="_blank" rel="noopener">ドキュメント</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/when-to-ignore-divergence/" target="_blank" rel="noopener" style="color:var(--brand)">実際の動作を見る →</a>
            </div>
            <div id="harmonic-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong><span data-count="4" data-text-mode>4</span>つのオシレーターが投票。</strong> 複数のモメンタムインジケーターが一致した時のみシグナルが表示：</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• ライブ投票カウントでリアルタイム内訳を表示（例：「3 Bulls、1 Neutral」）</li>
                <li>• 星評価（★ から ★★★★） — 星が多いほど一致度が高い</li>
                <li>• 複合ラインが4つのオシレーターすべてを統合し簡単に確認可能</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">★★★★ = 4つすべてが一致（高信頼度）。投票が分かれている = 不明瞭な状況。</p>
            </div>
          </article>

        </div>

      </div>

    </section>

    <!-- FEATURE COMPARISON TABLE -->
    <section class="section" style="">
      <div class="container">

        <div style="max-width:900px;margin:0 auto">

          <h2 class="headline lg" style="text-align:center;margin-bottom:1rem"><span class="shimmer-text">トレーダーが乗り換える理由</span></h2>

          <p style="text-align:center;color:var(--muted);font-size:1.05rem;margin-bottom:3rem">
            2つのアプローチ。1つはあなたにコントロールを与える。
          </p>

          <!-- Two-column bullet comparison format -->
          <div id="comparison-grid" class="comparison-container">

            <!-- Left Column: Traditional -->
            <div class="comparison-column">
              <h3 class="comparison-heading comparison-heading-negative">
                ❌ 従来のアプローチ
              </h3>
              <ul class="comparison-list">
                <li class="comparison-item comparison-item-negative">
                  <span class="comparison-bullet comparison-bullet-negative">•</span>
                  <span>矛盾するインジケーター、どれを信じるか分からない</span>
                </li>
                <li class="comparison-item comparison-item-negative">
                  <span class="comparison-bullet comparison-bullet-negative">•</span>
                  <span>シグナルがリペイント、昨日の「完璧なエントリー」が今日消える</span>
                </li>
                <li class="comparison-item comparison-item-negative">
                  <span class="comparison-bullet comparison-bullet-negative">•</span>
                  <span>他の人を見て、彼らのシグナルを待ってから行動</span>
                </li>
              </ul>
            </div>

            <!-- Right Column: Signal Pilot -->
            <div class="comparison-column">
              <h3 class="comparison-heading comparison-heading-positive">
                <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span>
              </h3>
              <ul class="comparison-list">
                <li class="comparison-item comparison-item-positive">
                  <span class="comparison-bullet comparison-bullet-positive">•</span>
                  <span><strong>自分で枯渇を見る</strong>、売りが枯れた時にTD/IGNが出現</span>
                </li>
                <li class="comparison-item comparison-item-positive">
                  <span class="comparison-bullet comparison-bullet-positive">•</span>
                  <span><strong>自分でクライマックスを見る</strong>、買いがピークに達した時にCAP/WRNが出現</span>
                </li>
                <li class="comparison-item comparison-item-positive">
                  <span class="comparison-bullet comparison-bullet-positive">•</span>
                  <span><strong>見たものを信じる</strong>、100%ノンリペイント、監査済み、$100報奨金</span>
                </li>
                <li class="comparison-item comparison-item-positive">
                  <span class="comparison-bullet comparison-bullet-positive">•</span>
                  <span><strong>読み方をマスター</strong>、<span data-count="82">82</span>レッスン + 50+ページのドキュメントで確信を構築</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- Comprehensive Responsive Styles -->
          <style>
            /* Base styles - Desktop first */
            .comparison-container {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 2rem;
              padding: 2rem;
              max-width: 800px;
              margin: 0 auto;
            }

            .comparison-column {
              min-width: 0; /* Prevent grid blowout */
            }

            .comparison-heading {
              font-family: 'EB Garamond', serif;
              font-size: clamp(1.1rem, 3vw, 1.3rem);
              margin: 0 0 1.5rem 0;
              text-align: center;
              font-weight: 600;
              line-height: 1.2;
            }

            .comparison-heading-negative {
              color: #ff6b9d;
            }

            .comparison-heading-positive {
              color: #3ed598;
            }

            .comparison-list {
              list-style: none;
              padding: 0;
              margin: 0;
              display: flex;
              flex-direction: column;
              gap: 1rem;
            }

            .comparison-item {
              display: flex;
              align-items: start;
              gap: 0.75rem;
              font-size: clamp(0.875rem, 2vw, 0.95rem);
              line-height: 1.6;
            }

            .comparison-item-negative {
              color: var(--muted);
            }

            .comparison-item-positive {
              color: var(--text);
            }

            .comparison-bullet {
              font-size: clamp(1rem, 2.5vw, 1.2rem);
              flex-shrink: 0;
              line-height: 1;
              margin-top: 0.15rem;
            }

            .comparison-bullet-negative {
              color: #ff6b9d;
            }

            .comparison-bullet-positive {
              color: #3ed598;
            }

            /* Large Desktop (1440px+) - More breathing room */
            @media (min-width: 1440px) {
              .comparison-container {
                max-width: 900px;
                padding: 2.5rem;
                gap: 2.5rem;
              }

              .comparison-list {
                gap: 1.25rem;
              }
            }

            /* Desktop (1025px-1439px) - Optimal */
            @media (min-width: 1025px) and (max-width: 1439px) {
              .comparison-container {
                max-width: 800px;
              }
            }

            /* Tablet (769px-1024px) - Slightly reduced */
            @media (max-width: 1024px) {
              .comparison-container {
                max-width: 720px;
                padding: 1.75rem;
                gap: 1.75rem;
              }

              .comparison-heading {
                margin-bottom: 1.25rem;
              }

              .comparison-list {
                gap: 0.9rem;
              }
            }

            /* Large Mobile / Small Tablet (601px-768px) - Start tightening */
            @media (max-width: 768px) {
              .comparison-container {
                grid-template-columns: 1fr;
                gap: 2.5rem;
                padding: 1.5rem;
                max-width: 100%;
              }

              .comparison-heading {
                margin-bottom: 1.25rem;
                font-size: clamp(1.15rem, 4vw, 1.3rem);
              }

              .comparison-list {
                gap: 1rem;
              }

              .comparison-item {
                gap: 0.65rem;
              }
            }

            /* Small Mobile (481px-600px) - Compact but readable */
            @media (max-width: 600px) {
              .comparison-container {
                padding: 1.25rem;
                gap: 2rem;
              }

              .comparison-heading {
                margin-bottom: 1rem;
                font-size: 1.15rem;
              }

              .comparison-list {
                gap: 0.85rem;
              }

              .comparison-item {
                font-size: 0.9rem;
                line-height: 1.5;
                gap: 0.6rem;
              }

              .comparison-bullet {
                font-size: 1.1rem;
                margin-top: 0.1rem;
              }
            }

            /* Extra Small Mobile (320px-480px) - Maximum compactness */
            @media (max-width: 480px) {
              .comparison-container {
                padding: 1rem;
                gap: 1.75rem;
              }

              .comparison-heading {
                margin-bottom: 0.9rem;
                font-size: 1.05rem;
                letter-spacing: -0.01em;
              }

              .comparison-list {
                gap: 0.75rem;
              }

              .comparison-item {
                font-size: 0.875rem;
                line-height: 1.5;
                gap: 0.55rem;
              }

              .comparison-bullet {
                font-size: 1rem;
                margin-top: 0.05rem;
              }
            }

            /* Ultra Small Devices (< 360px) - Emergency fallback */
            @media (max-width: 360px) {
              .comparison-container {
                padding: 0.85rem;
                gap: 1.5rem;
              }

              .comparison-heading {
                font-size: 1rem;
                margin-bottom: 0.8rem;
              }

              .comparison-item {
                font-size: 0.85rem;
                gap: 0.5rem;
              }

              .comparison-bullet {
                font-size: 0.95rem;
              }
            }
          </style>

        </div>

      </div>
    </section>


    <!-- TESTIMONIALS REMOVED - PRE-LAUNCH -->







    <!-- INTERACTIVE DEMO -->

    <section class="section">

      <div class="container stack">

        <div data-reveal="fade-up">

        <div style="text-align:center;max-width:800px;margin:0 auto 1.5rem">
          <span class="badge" style="margin-bottom:1rem">インタラクティブデモ</span>
          <h2 class="headline lg">違い</h2>
          <p style="color:var(--muted);font-size:1.1rem;line-height:1.6;margin-top:1rem">
            <strong style="color:var(--brand)">👆 スライダーをドラッグ</strong>して、<span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span>を使用した場合と使用しない場合のトレードを比較。同じチャート。同じ時間足。まったく異なる明瞭さ。
          </p>
        </div>

        <!-- Slider Controls -->
        <div style="display:flex;justify-content:center;gap:0.8rem;margin-bottom:1.5rem;flex-wrap:nowrap;align-items:center">
          <button id="btn-before" class="btn btn-secondary" style="padding:0.5rem 1rem;font-size:0.85rem;min-height:38px;height:38px;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;line-height:1">
            ← 導入前
          </button>
          <button id="btn-autoplay" class="btn btn-primary" style="padding:0.5rem 1rem;font-size:0.85rem;min-height:38px;height:38px;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;line-height:1">
            ▶ 自動再生
          </button>
          <button id="btn-after" class="btn btn-secondary" style="padding:0.5rem 1rem;font-size:0.85rem;min-height:38px;height:38px;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;line-height:1">
            導入後 →
          </button>
        </div>

        <!-- Interactive Slider Container -->
        <div id="comparison-slider" role="region" aria-label="Before and after comparison slider" style="position:relative;max-width:1400px;width:100%;margin:0 auto;border-radius:16px;overflow:hidden;border:3px solid rgba(91,138,255,.4);box-shadow:0 30px 80px rgba(0,0,0,.6);touch-action:pan-x">

          <!-- Without Signal Pilot (Background) -->
          <div class="comparison-image" style="position:relative;width:100%;min-height:600px;aspect-ratio:16/9;background:#0a0e18">
            <img
              src="/assets/showcase/chart-without.jpg"
              alt="Chart without Signal Pilot"
              loading="eager"
              style="width:100%;height:100%;object-fit:contain;display:block"
              onerror="this.parentElement.innerHTML='<div style=\'display:flex;align-items:center;justify-content:center;height:100%;background:rgba(10,12,20,1);color:rgba(255,255,255,.5);flex-direction:column;gap:1rem\'><svg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'1.5\'><rect x=\'3\' y=\'3\' width=\'18\' height=\'18\' rx=\'2\'/><path d=\'M3 9h18\'/><path d=\'M9 21V9\'/></svg><span style=\'font-size:1.1rem;font-weight:600\'>WITHOUT Signal Pilot</span><span style=\'font-size:.9rem;opacity:.7\'>Add your chart image to:<br/>/assets/showcase/chart-without.jpg</span></div>'"
            />
          </div>

          <!-- With Signal Pilot (Overlay - slides over) -->
          <div id="slider-overlay" class="comparison-image" style="position:absolute;top:0;left:0;width:50%;height:100%;overflow:hidden;z-index:10">
            <img
              id="overlay-image"
              src="/assets/showcase/chart-with.jpg"
              alt="Chart with Signal Pilot"
              loading="eager"
              style="position:absolute;top:0;left:0;width:100%;height:100%;max-width:none;object-fit:contain;display:block;pointer-events:none"
              onerror="this.parentElement.innerHTML='<div style=\'display:flex;align-items:center;justify-content:center;height:100%;background:rgba(10,30,20,1);color:rgba(255,255,255,.5);flex-direction:column;gap:1rem\'><svg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'1.5\'><polyline points=\'20 6 9 17 4 12\'/></svg><span style=\'font-size:1.1rem;font-weight:600;color:#3ed598\'>WITH Signal Pilot</span><span style=\'font-size:.9rem;opacity:.7\'>Add your chart image to:<br/>assets/showcase/chart-with.jpg</span></div>'"
            />
          </div>

          <!-- Slider Handle with Pulse Animation -->
          <div id="slider-handle" role="slider" aria-label="Comparison slider position" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0" style="position:absolute;top:0;left:50%;width:48px;height:100%;transform:translateX(-50%);z-index:100;cursor:ew-resize;touch-action:pan-x">
            <!-- Hit area (wider for easier grabbing) -->
            <div style="position:absolute;top:0;left:50%;transform:translateX(-50%);width:48px;height:100%;cursor:ew-resize"></div>
            <!-- Visual line -->
            <div style="position:absolute;top:0;left:50%;transform:translateX(-50%);width:4px;height:100%;background:#0a0e18;box-shadow:0 0 20px rgba(10,14,24,.5);pointer-events:none"></div>
            <!-- Handle circle -->
            <div id="handle-circle" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:48px;height:48px;background:#0a0e18;border-radius:50%;box-shadow:0 4px 16px rgba(0,0,0,.3),0 0 0 0 rgba(10,14,24,.7);display:flex;align-items:center;justify-content:center;pointer-events:none">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0a0e18" stroke-width="2" style="margin-left:-12px">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </div>
          </div>

        </div>

      </div>

    </section>

    <style>
      /* Pulse animation for handle */
      @keyframes pulse {
        0% { box-shadow: 0 4px 16px rgba(0,0,0,.3), 0 0 0 0 rgba(10,14,24,.7); }
        50% { box-shadow: 0 4px 16px rgba(0,0,0,.3), 0 0 0 8px rgba(10,14,24,0); }
        100% { box-shadow: 0 4px 16px rgba(0,0,0,.3), 0 0 0 0 rgba(10,14,24,.7); }
      }
      .pulse-animate { animation: pulse 2s ease-in-out infinite; }

      /* Smooth transition for non-dragging movements */

      /* Remove focus outline and any white backgrounds from slider handle */
      #slider-handle, #slider-handle *, #slider-handle:focus {
        outline: none !important;
        background: transparent !important;
      }
      #handle-circle {
        background: #0a0e18 !important;
      }
      .smooth-transition { transition: left 0.3s ease, width 0.3s ease !important; }
    </style>

    <script>
    // Interactive Before/After Slider
    (function() {
      const slider = document.getElementById('comparison-slider');
      const handle = document.getElementById('slider-handle');
      const handleCircle = document.getElementById('handle-circle');
      const overlay = document.getElementById('slider-overlay');
      const overlayImage = document.getElementById('overlay-image');

      if (!slider || !handle || !overlay) return;

      let isDragging = false;
      let hasInteracted = false;
      let lastTapTime = 0;

      // Feature 1: Auto-animation on page load
      function autoSweep() {
        let progress = 0;
        const duration = 3000; // 3 seconds
        const startTime = Date.now();

        function animate() {
          const elapsed = Date.now() - startTime;
          progress = Math.min(elapsed / duration, 1);

          // Ease in-out
          const eased = progress < 0.5
            ? 2 * progress * progress
            : 1 - Math.pow(-2 * progress + 2, 2) / 2;

          const percentage = eased * 100;
          setSliderPosition(percentage, true);

          if (progress < 1 && !hasInteracted) {
            requestAnimationFrame(animate);
          }
          // Animation completes at 100% and stays there to show the final "with Signal Pilot" result
        }

        animate();
      }

      // Feature 3: Animated pulse on handle (starts pulsing, stops on interact)
      handleCircle.classList.add('pulse-animate');

      // Core function to update slider position
      function setSliderPosition(percentage, smooth = false) {
        percentage = Math.max(0, Math.min(percentage, 100));

        if (smooth && !isDragging) {
          handle.classList.add('smooth-transition');
          overlay.classList.add('smooth-transition');
          setTimeout(() => {
            handle.classList.remove('smooth-transition');
            overlay.classList.remove('smooth-transition');
          }, 300);
        }

        handle.style.left = percentage + '%';
        overlay.style.width = percentage + '%';

        // Update ARIA value for accessibility
        handle.setAttribute('aria-valuenow', Math.round(percentage));
      }

      // Update overlay image width to match slider container
      function updateOverlayImageWidth() {
        if (overlayImage && slider) {
          const width = slider.clientWidth;
          if (width > 0) {
            overlayImage.style.width = width + 'px';
          } else {
            // Retry if width is 0 (layout not ready yet)
            setTimeout(() => updateOverlayImageWidth(), 100);
          }
        }
      }

      // Feature 2: Click anywhere to position (enhanced)
      function updateSliderFromPosition(clientX, smooth = false) {
        const rect = slider.getBoundingClientRect();
        let x = clientX - rect.left;
        const percentage = (x / rect.width) * 100;
        setSliderPosition(percentage, smooth);
      }

      function markInteraction() {
        hasInteracted = true;
        handleCircle.classList.remove('pulse-animate');
      }

      // Initialize
      function initSlider() {
        updateOverlayImageWidth();
        setSliderPosition(50, false);
      }

      // Update overlay width when images load
      const backgroundImage = slider.querySelector('img[alt="Chart without Signal Pilot"]');
      const foregroundImage = overlayImage;

      if (backgroundImage) {
        backgroundImage.addEventListener('load', updateOverlayImageWidth);
      }
      if (foregroundImage) {
        foregroundImage.addEventListener('load', updateOverlayImageWidth);
      }

      // Feature 8: Keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (!slider) return;

        const rect = slider.getBoundingClientRect();
        const isInView = rect.top < window.innerHeight && rect.bottom > 0;

        if (isInView) {
          let currentPercentage = parseFloat(handle.style.left) || 50;

          if (e.key === 'ArrowLeft') {
            e.preventDefault();
            markInteraction();
            setSliderPosition(currentPercentage - 5, true);
          } else if (e.key === 'ArrowRight') {
            e.preventDefault();
            markInteraction();
            setSliderPosition(currentPercentage + 5, true);
          }
        }
      });

      // Feature 4: Larger draggable area + Feature 7: Cursor changes
      handle.addEventListener('mousedown', (e) => {
        isDragging = true;
        markInteraction();
        document.body.style.cursor = 'ew-resize';
      });

      document.addEventListener('mousemove', (e) => {
        if (isDragging) {
          updateSliderFromPosition(e.clientX, false);
        }
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
        document.body.style.cursor = '';
      });

      // Touch support with Feature 13: Double-tap to center
      handle.addEventListener('touchstart', (e) => {
        e.preventDefault(); // Prevent scrolling immediately
        const currentTime = Date.now();
        const tapGap = currentTime - lastTapTime;

        if (tapGap < 300 && tapGap > 0) {
          // Double tap detected
          setSliderPosition(50, true);
        } else {
          isDragging = true;
          markInteraction();
        }

        lastTapTime = currentTime;
      }, { passive: false });

      // Also add touch support directly on slider for easier mobile interaction
      slider.addEventListener('touchstart', (e) => {
        if (!handle.contains(e.target)) {
          e.preventDefault(); // Prevent scrolling
          isDragging = true;
          markInteraction();
          updateSliderFromPosition(e.touches[0].clientX, false);
        }
      }, { passive: false });

      document.addEventListener('touchmove', (e) => {
        if (isDragging) {
          e.preventDefault(); // Critical: prevent page scroll while dragging
          updateSliderFromPosition(e.touches[0].clientX, false);
        }
      }, { passive: false });

      document.addEventListener('touchend', () => {
        isDragging = false;
      });

      // Feature 2: Click anywhere on slider or scrubber
      slider.addEventListener('click', (e) => {
        if (!isDragging && e.target !== handle && !handle.contains(e.target)) {
          markInteraction();
          updateSliderFromPosition(e.clientX, true);
        }
      });

      // Initialize and start auto-sweep
      window.addEventListener('load', () => {
        initSlider();
        // Start auto-sweep after a short delay
        setTimeout(() => {
          if (!hasInteracted) autoSweep();
        }, 500);
      });

      window.addEventListener('resize', initSlider);
      initSlider();

      // Intersection Observer for auto-sweep when section comes into view
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries) => {
          try {
            entries.forEach(entry => {
              if (entry.isIntersecting && !hasInteracted) {
                setTimeout(() => {
                  if (!hasInteracted) autoSweep();
                }, 300);
              }
            });
          } catch(e) {
            // Silently handle observer errors
          }
        }, { threshold: 0.5 });

        observer.observe(slider);
      }

      // Button Controls
      const btnBefore = document.getElementById('btn-before');
      const btnAutoplay = document.getElementById('btn-autoplay');
      const btnAfter = document.getElementById('btn-after');

      let autoplayInterval = null;
      let isAutoPlaying = false;

      // Before button - snap to 0%
      if (btnBefore) {
        btnBefore.addEventListener('click', () => {
          stopAutoPlay();
          markInteraction();
          setSliderPosition(0, true);
        });
      }

      // After button - snap to 100%
      if (btnAfter) {
        btnAfter.addEventListener('click', () => {
          stopAutoPlay();
          markInteraction();
          setSliderPosition(100, true);
        });
      }

      // Auto Play button - toggle continuous animation
      if (btnAutoplay) {
        btnAutoplay.addEventListener('click', () => {
          if (isAutoPlaying) {
            stopAutoPlay();
          } else {
            startAutoPlay();
          }
        });
      }

      function startAutoPlay() {
        stopAutoPlay(); // Clear any existing interval
        isAutoPlaying = true;
        btnAutoplay.innerHTML = '⏸ 一時停止';
        btnAutoplay.classList.remove('btn-primary');
        btnAutoplay.classList.add('btn-ghost');

        let direction = 1; // 1 = forward, -1 = backward
        let currentPos = 50;

        autoplayInterval = setInterval(() => {
          currentPos += (direction * 2); // Move 2% per frame

          if (currentPos >= 100) {
            currentPos = 100;
            direction = -1; // Reverse direction
          } else if (currentPos <= 0) {
            currentPos = 0;
            direction = 1; // Reverse direction
          }

          setSliderPosition(currentPos, false);
        }, 30); // Update every 30ms for smooth animation
      }

      function stopAutoPlay() {
        if (autoplayInterval) {
          clearInterval(autoplayInterval);
          autoplayInterval = null;
        }
        isAutoPlaying = false;
        btnAutoplay.innerHTML = '▶ 自動再生';
        btnAutoplay.classList.remove('btn-ghost');
        btnAutoplay.classList.add('btn-primary');
      }

      // Stop auto play if user manually interacts
      const originalMarkInteraction = markInteraction;
      markInteraction = function() {
        stopAutoPlay();
        originalMarkInteraction();
      };
    })();
    </script>


    <!-- CHRONICLE -->

    <section id="chronicle" class="section" style="padding:5rem 0;background:linear-gradient(180deg,transparent 0%,rgba(91,138,255,.03) 50%,transparent 100%)">
      <div class="container stack">
        <div data-reveal="fade-up" style="text-align:center;margin-bottom:3rem">
          <p style="font-size:0.85rem;font-weight:600;text-transform:uppercase;letter-spacing:0.15em;color:var(--accent);margin-bottom:1rem;display:inline-block;padding:0.4rem 1rem;border:1px solid rgba(118,221,255,0.3);border-radius:999px;background:rgba(118,221,255,0.1)">SignalPilotクロニクル</p>
          <h2 class="headline lg" style="max-width:20ch;margin-left:auto;margin-right:auto"><span class="shimmer-text">七人の背後にある物語</span></h2>
          <p class="note" style="max-width:600px;margin:1rem auto 0;font-size:1.15rem;color:var(--muted);line-height:1.6;font-family:'EB Garamond',Georgia,serif;font-style:italic">"市場に名前がつく前、ローソク足が物語を語る前、そこにはノイズだけがあった。そして七人が現れた。"</p>
        </div>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;max-width:1100px;margin:0 auto">
          <a href="/ja/chronicle/birth-of-the-elite-seven/" class="chronicle-card featured" data-reveal="fade-up" data-reveal-delay="100" style="grid-column:1/-1;display:grid;grid-template-columns:1fr 1fr;gap:0;background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.05));border:1px solid var(--border);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;position:relative;transition:all 0.3s ease">
            <div style="position:absolute;inset:-2px;background:linear-gradient(135deg,var(--brand),var(--accent),var(--brand-2));border-radius:18px;z-index:-1;opacity:0.4;animation:chronicle-glow 4s ease-in-out infinite alternate;pointer-events:none"></div>
            <div style="height:100%;min-height:280px;position:relative;overflow:hidden">
              <div style="position:absolute;inset:0;background-image:url('/chronicle/elite-seven-council-preview.jpg');background-size:cover;background-position:center;transition:transform 0.5s ease"></div>
              <div style="position:absolute;inset:0;background:linear-gradient(to right,transparent 60%,rgba(5,7,13,0.9) 100%)"></div>
            </div>
            <div style="padding:2.5rem;display:flex;flex-direction:column;justify-content:center">
              <span style="display:inline-flex;align-items:center;gap:0.4rem;background:linear-gradient(115deg,var(--brand),var(--accent));color:#fff;font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:0.1em;padding:0.3rem 0.6rem;border-radius:4px;margin-bottom:1rem;width:fit-content">★ 起源</span>
              <h3 style="font-family:'EB Garamond',Georgia,serif;font-size:1.8rem;font-weight:500;line-height:1.2;margin-bottom:0.75rem;color:var(--text)">Elite Sevenの誕生</h3>
              <p style="color:var(--muted);font-size:1rem;line-height:1.6;margin-bottom:1.25rem">天空のシグナルが価格の数学から生まれた方法 — そしてなぜ彼らは市場の混沌を通じてパイロットを導くために現れたのか。</p>
              <span style="display:inline-flex;align-items:center;gap:0.5rem;color:var(--brand);font-weight:600;font-size:0.95rem">起源を読む <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></span>
            </div>
          </a>
          <a href="/ja/chronicle/the-pilots-oath/" class="chronicle-card" data-reveal="fade-up" data-reveal-delay="200" style="background:linear-gradient(135deg,rgba(168,85,247,.06),rgba(168,85,247,.02));border:1px solid var(--border);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;transition:all 0.3s ease;display:flex;flex-direction:column">
            <div style="height:180px;position:relative;overflow:hidden;border-bottom:1px solid var(--border)">
              <div style="position:absolute;inset:0;background-image:url('/chronicle/pilots-oath-preview.jpg');background-size:cover;background-position:center;transition:transform 0.5s ease"></div>
              <div style="position:absolute;inset:0;background:linear-gradient(to bottom,transparent 40%,rgba(5,7,13,0.7) 100%)"></div>
              <span style="position:absolute;bottom:0;left:0;right:0;height:3px;background:#a855f7;transform:scaleX(0);transition:transform 0.3s ease"></span>
            </div>
            <div style="padding:1.5rem;flex:1;display:flex;flex-direction:column">
              <span style="color:#a855f7;font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem;background:rgba(168,85,247,0.15);padding:0.2rem 0.5rem;border-radius:4px;width:fit-content">哲学</span>
              <h3 style="font-family:'EB Garamond',Georgia,serif;font-size:1.35rem;font-weight:500;line-height:1.25;margin-bottom:0.5rem;color:var(--text)">パイロットの誓い</h3>
              <p style="color:var(--muted);font-size:0.9rem;line-height:1.5;flex:1">"Elite Sevenを使うあなたはトレーダーではない。あなたはパイロットだ。"</p>
              <span style="display:inline-flex;align-items:center;gap:0.4rem;color:var(--brand);font-weight:500;font-size:0.85rem;margin-top:1rem">続きを読む →</span>
            </div>
          </a>
          <a href="/ja/chronicle/meet-the-sovereign/" class="chronicle-card" data-reveal="fade-up" data-reveal-delay="300" style="background:linear-gradient(135deg,rgba(239,68,68,.06),rgba(239,68,68,.02));border:1px solid var(--border);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;transition:all 0.3s ease;display:flex;flex-direction:column">
            <div style="height:180px;position:relative;overflow:hidden;border-bottom:1px solid var(--border)">
              <div style="position:absolute;inset:0;background-image:url('/chronicle/sovereign-pentarch-preview.jpg');background-size:cover;background-position:center;transition:transform 0.5s ease"></div>
              <div style="position:absolute;inset:0;background:linear-gradient(to bottom,transparent 40%,rgba(5,7,13,0.7) 100%)"></div>
              <span style="position:absolute;bottom:0;left:0;right:0;height:3px;background:#ef4444;transform:scaleX(0);transition:transform 0.3s ease"></span>
            </div>
            <div style="padding:1.5rem;flex:1;display:flex;flex-direction:column">
              <span style="color:#ef4444;font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem;background:rgba(239,68,68,0.15);padding:0.2rem 0.5rem;border-radius:4px;width:fit-content">7つの1番目</span>
              <h3 style="font-family:'EB Garamond',Georgia,serif;font-size:1.35rem;font-weight:500;line-height:1.25;margin-bottom:0.5rem;color:var(--text)">支配者に会う：Pentarch</h3>
              <p style="color:var(--muted);font-size:0.9rem;line-height:1.5;flex:1">"私がサイクルだ。サイクルが私だ。" — 五つの永遠のフェーズを読む旗艦インジケーター。</p>
              <span style="display:inline-flex;align-items:center;gap:0.4rem;color:var(--brand);font-weight:500;font-size:0.85rem;margin-top:1rem">続きを読む →</span>
            </div>
          </a>
          <a href="/ja/chronicle/the-council-assembles/" class="chronicle-card" data-reveal="fade-up" data-reveal-delay="400" style="background:linear-gradient(135deg,rgba(245,158,11,.06),rgba(245,158,11,.02));border:1px solid var(--border);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;transition:all 0.3s ease;display:flex;flex-direction:column">
            <div style="height:180px;position:relative;overflow:hidden;border-bottom:1px solid var(--border)">
              <div style="position:absolute;inset:0;background-image:url('/chronicle/council-assembles-preview.jpg');background-size:cover;background-position:center;transition:transform 0.5s ease"></div>
              <div style="position:absolute;inset:0;background:linear-gradient(to bottom,transparent 40%,rgba(5,7,13,0.7) 100%)"></div>
              <span style="position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#f59e0b,#fbbf24);transform:scaleX(0);transition:transform 0.3s ease"></span>
            </div>
            <div style="padding:1.5rem;flex:1;display:flex;flex-direction:column">
              <span style="color:#f59e0b;font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem;background:rgba(245,158,11,0.15);padding:0.2rem 0.5rem;border-radius:4px;width:fit-content">フィナーレ</span>
              <h3 style="font-family:'EB Garamond',Georgia,serif;font-size:1.35rem;font-weight:500;line-height:1.25;margin-bottom:0.5rem;color:var(--text)">評議会が集結する</h3>
              <p style="color:var(--muted);font-size:0.9rem;line-height:1.5;flex:1">七つの声がひとつとして語るとき — 統一されたシグナルの力を目撃せよ。</p>
              <span style="display:inline-flex;align-items:center;gap:0.4rem;color:var(--brand);font-weight:500;font-size:0.85rem;margin-top:1rem">続きを読む →</span>
            </div>
          </a>
        </div>
        <div data-reveal="fade-up" data-reveal-delay="500" style="text-align:center;margin-top:2.5rem">
          <a href="/ja/chronicle/" style="display:inline-flex;align-items:center;gap:0.75rem;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;font-weight:600;font-size:1rem;padding:0.9rem 1.8rem;border-radius:10px;text-decoration:none;transition:all 0.3s ease;box-shadow:0 4px 20px rgba(91,138,255,0.3)">
            <span style="font-family:'EB Garamond',Georgia,serif;font-style:italic">全12クロニクルを探索</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
          <p style="margin-top:1rem;font-size:0.9rem;color:var(--muted-2)">深い魔法使いの声による音声ナレーション付き</p>
        </div>
      </div>
    </section>

    <style>
      @keyframes chronicle-glow { 0% { opacity: 0.3; filter: blur(8px); } 100% { opacity: 0.6; filter: blur(12px); } }
      .chronicle-card:hover { transform: translateY(-6px); box-shadow: 0 20px 40px rgba(0,0,0,0.3); border-color: var(--brand); }
      .chronicle-card:hover div[style*="background-image"] { transform: scale(1.08); }
      .chronicle-card:hover span[style*="scaleX(0)"] { transform: scaleX(1) !important; }
      .chronicle-card.featured:hover { box-shadow: 0 20px 60px rgba(91,138,255,0.3); }
      .chronicle-card.featured:hover div[style*="chronicle-glow"] { opacity: 0.8; }
      @media (max-width: 768px) {
        .chronicle-card.featured { grid-template-columns: 1fr !important; grid-template-rows: 180px auto !important; display: grid !important; }
        .chronicle-card.featured > div:nth-child(2) { min-height: unset !important; height: 180px !important; max-height: 180px !important; grid-row: 1 !important; }
        .chronicle-card.featured > div:nth-child(2) > div:last-child { background: linear-gradient(to bottom, transparent 40%, rgba(5,7,13,0.9) 100%) !important; }
        .chronicle-card.featured > div:nth-child(3) { padding: 1.5rem !important; grid-row: 2 !important; }
        .chronicle-card:hover { transform: none; }
      }
      html[data-theme="light"] .chronicle-card { background: linear-gradient(135deg,rgba(10,20,40,.03),rgba(10,20,40,.01)) !important; }
      html[data-theme="light"] .chronicle-card div[style*="rgba(5,7,13"] { background: linear-gradient(to bottom,transparent 40%,rgba(255,255,255,0.7) 100%) !important; }
      html[data-theme="light"] .chronicle-card.featured div[style*="to right"] { background: linear-gradient(to right,transparent 60%,rgba(255,255,255,0.9) 100%) !important; }
      @media (max-width: 768px) { html[data-theme="light"] .chronicle-card.featured > div:nth-child(2) > div:last-child { background: linear-gradient(to bottom, transparent 40%, rgba(255,255,255,0.9) 100%) !important; } }
    </style>


    <!-- PRICING -->

    <section id="pricing" class="section">

      <div class="container stack">

        <h2 class="headline lg" style="text-align:center"><span class="shimmer-text">あなたの優位性を選ぶ</span></h2>
        <p style="text-align:center;font-size:1.1rem;color:var(--muted);margin-top:1rem;margin-bottom:2rem">
          利用されています： <span class="typewriter-pricing" style="color:var(--brand);font-weight:600"></span>
        </p>

        <!-- What's Included - ALL Plans Identical -->
        <div style="text-align:center;max-width:900px;margin:1.5rem auto;padding:1.75rem 2rem;background:linear-gradient(135deg,rgba(91,138,255,.1),rgba(91,138,255,.05));border:2px solid rgba(91,138,255,.25);border-radius:12px" data-reveal="scale" data-reveal-delay="200">
          <p style="font-size:1.05rem;color:var(--text);margin:0 0 1rem 0;font-weight:700">
            ✨ すべてのプランに同じ機能が含まれます：
          </p>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:0.75rem;text-align:left;max-width:800px;margin:0 auto">
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">エリート7種類のインジケーターすべて</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">今後のすべてのインジケーター</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">今後のすべてのアップデート</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">優先サポート</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">完全なドキュメント</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">82の無料レッスン</span>
            </div>
          </div>
          <p style="font-size:.85rem;color:var(--muted-2);margin:1rem 0 0 0;font-style:italic">
            プラン間の唯一の違い：支払い方法（月額、年間、または一度だけ）
          </p>
        </div>

        <!-- TRUST BADGES -->
        <div style="display:flex;justify-content:center;gap:2rem;flex-wrap:wrap;margin-bottom:2rem;opacity:.85" data-reveal="fade-up" data-reveal-delay="300">
          <div style="display:flex;align-items:center;gap:.5rem">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg>
            <span style="font-size:.9rem;font-weight:600">100%ノンリペイント（監査済み）</span>
          </div>
        </div>



        <div class="pricing-grid" id="plans-grid" data-reveal-stagger>



          <!-- MONTHLY -->

          <article class="card plan" id="plan-monthly" data-plan="monthly" role="group" aria-labelledby="plan-monthly-title" style="position:relative;border:2px solid rgba(118,221,255,0.4);box-shadow:0 0 30px rgba(118,221,255,.15)">

            <div style="position:absolute;top:-12px;left:1rem;background:linear-gradient(135deg,#76ddff,#5bc0de);color:#fff;padding:.4rem .9rem;border-radius:999px;font-weight:800;font-size:.75rem;box-shadow:0 4px 12px rgba(118,221,255,.4);white-space:nowrap">
              🌊 フレキシブル
            </div>

            <div class="pill" id="plan-monthly-title" style="background:rgba(118,221,255,0.15);color:#76ddff;font-weight:700">月額</div>

            <div class="price">$99 <span class="pill">/月</span></div>

            <div style="text-align:center;margin:1.5rem 0;padding:1.25rem;background:rgba(91,138,255,.06);border:1px solid rgba(91,138,255,.2);border-radius:8px">
              <p style="font-size:1rem;color:var(--text);margin:0 0 .5rem 0;font-weight:600">
                月額払い、いつでもキャンセル可能
              </p>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">
                最も柔軟なオプション。契約不要。
              </p>
            </div>

            <div class="actions stack">

              <!-- Step 1: Username -->
              <div style="background:rgba(91,138,255,.08);border:1px solid rgba(91,138,255,.2);border-radius:8px;padding:1rem;margin-bottom:.5rem">
                <label style="font-weight:600;color:var(--brand);font-size:.9rem;margin-bottom:.5rem;display:block">
                  TradingViewユーザー名
                </label>
                <div class="input-wrapper">
                  <input id="tv-monthly" placeholder="@あなたのTradingView" required style="width:100%;padding:.75rem;padding-right:3rem;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:6px;color:#fff;font-size:1rem">
                  <div class="checkmark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                  </div>
                </div>
                <div id="error-tv-monthly" style="display:none;color:#ff6b6b;font-size:.85rem;margin-top:.5rem;font-weight:500">⚠️ TradingViewユーザー名が必要です</div>
              </div>

              <!-- Step 2: Consent -->
              <label class="consent" style="margin-bottom:1rem"><input class="tick" type="checkbox" id="consent-monthly"><span><span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span>が教育目的であり、金融アドバイスではないことを理解しています。</span></label>
              <div id="error-consent-monthly" style="display:none;color:#ff6b6b;font-size:.85rem;margin-bottom:1rem;font-weight:500">⚠️ 同意が必要です</div>

              <!-- PayPal Branding -->
              <div style="text-align:center;margin-bottom:1rem">
                <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="PayPal対応カード" style="margin:0 auto;height:24px;" loading="lazy" width="120" height="24" />
                <div style="font-size:0.75rem;opacity:0.7;margin-top:0.25rem">PayPal提供</div>
              </div>

              <!-- Step 3: Subscribe -->
              <button type="button" id="btn-monthly-paypal" class="btn btn-primary" style="width:100%;padding:1rem;font-size:.95rem;font-weight:700">
                💳 PayPalで登録<br><span style="font-size:.85rem">$99/月</span>
              </button>

              <div style="text-align:center;margin-top:1rem">
                <a href="https://signalpilotlabs.lemonsqueezy.com/buy/272cee92-d8d5-4259-866b-e7cf95f5d7ee" class="btn btn-secondary" style="width:100%;display:block" target="_blank" rel="noopener">💳 カードで支払う</a>
              </div>

            </div>

          </article>




          <!-- YEARLY -->

          <article class="card plan" id="plan-yearly" data-plan="yearly" role="group" aria-labelledby="plan-yearly-title" style="position:relative;border:3px solid var(--brand);box-shadow:0 0 60px rgba(91,138,255,.35);transform:scale(1.05);z-index:2">

            <div style="position:absolute;top:-12px;right:1rem;background:linear-gradient(135deg,#3ed598,#2ec98a);color:#fff;padding:.4rem .9rem;border-radius:999px;font-weight:800;font-size:.8rem;box-shadow:0 4px 12px rgba(62,213,152,.4);white-space:nowrap">
              節約： <span data-count="489" data-prefix="$">489</span>
            </div>

            <div class="pill" id="plan-yearly-title" style="background:linear-gradient(135deg,#5b8aff,#764ba2);color:#fff;font-size:.95rem;padding:.7rem 1.2rem">最もお得</div>

            <div class="price">
              $699 <span class="pill">/年</span>
            </div>

            <div style="text-align:center;margin:1.5rem 0;padding:1.25rem;background:rgba(62,213,152,.08);border:1px solid rgba(62,213,152,.25);border-radius:8px">
              <p style="font-size:1.1rem;margin:0 0 .5rem 0;font-weight:700">
                <span style="background:linear-gradient(135deg,#3ed598,#2ec98a);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">年間<span data-count="489" data-prefix="$">489</span>節約</span>
              </p>
              <p style="font-size:.9rem;color:var(--text);margin:0 0 .25rem 0">
                月額$58相当
              </p>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">
                年間$699の請求。本格的なトレーダーに最適な価値。
              </p>
            </div>

            <div class="actions stack">

              <!-- Step 1: Username -->
              <div style="background:rgba(91,138,255,.08);border:1px solid rgba(91,138,255,.2);border-radius:8px;padding:1rem;margin-bottom:.5rem">
                <label style="font-weight:600;color:var(--brand);font-size:.9rem;margin-bottom:.5rem;display:block">
                  TradingViewユーザー名
                </label>
                <div class="input-wrapper">
                  <input id="tv-yearly" placeholder="@あなたのTradingView" required style="width:100%;padding:.75rem;padding-right:3rem;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:6px;color:#fff;font-size:1rem">
                  <div class="checkmark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                  </div>
                </div>
                <div id="error-tv-yearly" style="display:none;color:#ff6b6b;font-size:.85rem;margin-top:.5rem;font-weight:500">⚠️ TradingViewユーザー名が必要です</div>
              </div>

              <!-- Step 2: Consent -->
              <label class="consent" style="margin-bottom:1rem"><input class="tick" type="checkbox" id="consent-yearly"><span><span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span>が教育目的であり、金融アドバイスではないことを理解しています。</span></label>
              <div id="error-consent-yearly" style="display:none;color:#ff6b6b;font-size:.85rem;margin-bottom:1rem;font-weight:500">⚠️ 同意が必要です</div>

              <!-- PayPal Branding -->
              <div style="text-align:center;margin-bottom:1rem">
                <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="PayPal対応カード" style="margin:0 auto;height:24px;" loading="lazy" width="120" height="24" />
                <div style="font-size:0.75rem;opacity:0.7;margin-top:0.25rem">PayPal提供</div>
              </div>

              <!-- Step 3: Subscribe -->
              <button type="button" id="btn-yearly-paypal" class="btn btn-primary" style="width:100%;padding:1rem;font-size:.95rem;font-weight:700">
                💳 PayPalで登録<br><span style="font-size:.85rem">$699/年</span>
              </button>

              <div style="text-align:center;margin-top:1rem">
                <a href="https://signalpilotlabs.lemonsqueezy.com/buy/bb59d34b-20bb-478d-9db3-533b7e84930b" class="btn btn-secondary" style="width:100%;display:block" target="_blank" rel="noopener">💳 カードで支払う</a>
              </div>

            </div>

          </article>



          <!-- LIFETIME -->

          <article class="card plan" id="plan-lifetime" data-plan="lifetime" role="group" aria-labelledby="plan-lifetime-title" style="position:relative;border:2px solid rgba(249,162,60,0.3)">

            <div style="position:absolute;top:-14px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,#f9a23c,#ff8c42);color:#fff;padding:.5rem 1.1rem;border-radius:999px;font-weight:800;font-size:.82rem;box-shadow:0 4px 16px rgba(249,162,60,.5);white-space:nowrap;max-width:90%">
              限定 • <span data-count="150">150</span> 残り枠
            </div>

            <div class="pill" id="plan-lifetime-title" style="background:rgba(249,162,60,0.15);color:var(--warn);font-weight:700">ライフタイム</div>

            <div class="price" style="white-space:nowrap"><span id="lifetime-display-price">$1,799</span> <span class="pill">買い切り</span></div>

            <div style="text-align:center;margin:1.5rem 0;padding:1.25rem;background:rgba(249,162,60,.08);border:1px solid rgba(249,162,60,.25);border-radius:8px">
              <p style="font-size:1rem;color:var(--text);margin:0 0 .5rem 0;font-weight:600">
                1回の支払いで永久に
              </p>
              <p style="font-size:.9rem;color:var(--muted);margin:0 0 .25rem 0">
                今日$1,799 = 以降$0/月
              </p>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">
                今すぐ確保
              </p>
            </div>



            <div class="actions stack">

              <!-- Step 1: Username -->
              <div style="background:rgba(91,138,255,.08);border:1px solid rgba(91,138,255,.2);border-radius:8px;padding:1rem;margin-bottom:.5rem">
                <label style="font-weight:600;color:var(--brand);font-size:.9rem;margin-bottom:.5rem;display:block">
                  TradingViewユーザー名
                </label>
                <div class="input-wrapper">
                  <input id="tv-lifetime" type="text" placeholder="@あなたのTradingView" required style="width:100%;padding:.75rem;padding-right:3rem;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:6px;color:#fff;font-size:1rem">
                  <div class="checkmark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                  </div>
                </div>
                <div id="error-tv-lifetime" style="display:none;color:#ff6b6b;font-size:.85rem;margin-top:.5rem;font-weight:500">⚠️ TradingViewユーザー名が必要です</div>
              </div>

              <!-- Step 2: Consent -->
              <label class="consent" style="margin-bottom:1rem"><input class="tick" type="checkbox" id="consent-lifetime"><span><span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span>が教育目的であり、金融アドバイスではないことを理解しています。</span></label>
              <div id="error-consent-lifetime" style="display:none;color:#ff6b6b;font-size:.85rem;margin-bottom:1rem;font-weight:500">⚠️ 同意が必要です</div>

              <!-- PayPal Branding -->
              <div style="text-align:center;margin-bottom:1rem">
                <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="PayPal対応カード" style="margin:0 auto;height:24px;" loading="lazy" width="120" height="24" />
                <div style="font-size:0.75rem;opacity:0.7;margin-top:0.25rem">PayPal提供</div>
              </div>

              <!-- Step 3: Buy Now -->
              <button type="button" id="btn-lifetime-paypal" class="btn btn-primary" style="width:100%;padding:1rem;font-size:.95rem;font-weight:700">
                💳 今すぐ購入 - PayPal<br><span style="font-size:.85rem">$1,799 一度きりの支払い</span>
              </button>

              <div style="text-align:center;margin-top:1rem">
                <a href="https://signalpilotlabs.lemonsqueezy.com/buy/81822d54-6e08-4c26-b2f0-d5d5e3cdd25e" class="btn btn-secondary" style="width:100%;display:block" target="_blank" rel="noopener">💳 カードで支払う</a>
              </div>

              <div id="error-soldout-lifetime" style="display:none;color:#ff6b6b;font-size:.85rem;margin-top:1rem;font-weight:500;text-align:center">⚠️ ライフタイムプランは完売しました。以下のウェイトリストをご利用ください。</div>

              <button class="btn btn-disabled" id="lt-soldout" type="button" style="display:none">売り切れ — 下記のウェイトリストに参加</button>

            </div>

          </article>



        </div>



        <!-- MONEY-BACK GUARANTEE (after pricing cards for maximum conversion impact) -->
        <div style="max-width:900px;margin:3rem auto 1rem;padding:2rem 2.5rem;background:linear-gradient(135deg,rgba(62,213,152,.15),rgba(62,213,152,.08));border:2px solid rgba(62,213,152,.4);border-radius:12px;text-align:center">
          <div style="display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:1rem">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="2.5">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              <path d="M9 12l2 2 4-4"/>
            </svg>
            <h3 style="font-size:1.5rem;font-weight:700;color:#3ed598;margin:0">7日間返金保証</h3>
          </div>
          <p style="font-size:1.05rem;color:var(--text);line-height:1.6;margin:0;max-width:700px;margin:0 auto">
            <strong>7日間返金保証 - 全額返金のためメールでご連絡ください。</strong> 理由不要、手間なし。トライアル期間中はアクセスを維持できます。
          </p>
          <div style="display:flex;justify-content:center;gap:2rem;margin-top:1.5rem;flex-wrap:wrap">
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.95rem;color:var(--muted)">理由不要</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.95rem;color:var(--muted)">7日以内の全額返金</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.95rem;color:var(--muted)">トライアル中はアクセス維持</span>
            </div>
          </div>
        </div>

      </div>

    </section>

    <!-- FAQ -->

    <section id="faq" class="section" role="region" aria-labelledby="faq-heading" style="padding-top:1.5rem">
  <div class="container stack">
    <h2 id="faq-heading" class="headline lg" style="text-align:center">FAQ</h2>
    <p style="text-align:center;color:var(--muted);margin:-0.5rem 0 1.5rem 0;font-size:.9rem">購入前の質問に回答。設定ガイドについては： <a href="https://docs.signalpilot.io/" target="_blank" rel="noopener">ドキュメント</a>または<a href="https://education.signalpilot.io/" target="_blank" rel="noopener">トレーニングセンター</a>。</p>

    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem;max-width:1100px;margin:0 auto" data-reveal-stagger="slow">

      <!-- EDUCATION HUB -->
      <div class="card" role="button" aria-expanded="true" tabindex="0" aria-controls="faq-answer-0">
        <strong id="faq-question-0">これらのインジケーターの使い方をどこで学べますか？</strong>
        <p id="faq-answer-0" class="note"><strong>82レッスンの無料トレーニングセンター</strong>を提供しており、初心者向けの基礎から機関投資家向け戦略まですべてをカバーしています。<br>すべての方が利用可能—購入不要。<br><a href="https://education.signalpilot.io" target="_blank" rel="noopener">無料で学習を開始 →</a></p>
      </div>

      <!-- CORE VALUE PROP -->
      <div class="card" role="button" aria-expanded="true" tabindex="0" aria-controls="faq-answer-1">
        <strong id="faq-question-1">シグナルはリペイントしますか？</strong>
        <p id="faq-answer-1" class="note"><strong>ノンリペイント。保証します。</strong><br>すべてのシグナルはローソク足のクローズ時に確定します。<br>各インジケーターをルックアヘッドバイアスについて監査しています。<br>リペイントを証明できれば<strong>$100 USD</strong>をお支払いします。<br>履歴で表示されるものは、リアルタイムで見たであろうものと正確に一致します。<br><a href="https://blog.signalpilot.io/articles/the-repainting-problem/" target="_blank" rel="noopener" style="color:var(--brand)">リペイントの仕組みを学ぶ →</a></p>
      </div>

      <div class="card" role="button" aria-expanded="true" tabindex="0" aria-controls="faq-answer-2">
        <strong id="faq-question-2">これは金融アドバイスですか？</strong>
        <p id="faq-answer-2" class="note"><strong>いいえ。</strong><br><span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span>は<strong>教育ツールセットのみ</strong>です。<br>テクニカル分析ツールを提供していますが、投資アドバイス、トレード推奨、保証されたリターンは提供していません。<br>お客様のトレード決定についてはお客様自身が責任を負います。</p>
      </div>

      <!-- TECHNICAL -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-3">
        <strong id="faq-question-3">無料のTradingViewで動作しますか？</strong>
        <p id="faq-answer-3" class="note"><strong>はい！</strong><br>設定に十分なインジケータースロットがあれば大丈夫です。<br><strong>無料アカウントは3スロット</strong>で、Pentarch + 1-2フィルターには十分です。<br>Pro/Premiumアカウントはより多くのスロットと無制限のアラートが利用できます。</p>
      </div>

      <!-- PRICING & ACCESS -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-4">
        <strong id="faq-question-4">アクティベーションの速度は？</strong>
        <p id="faq-answer-4" class="note"><strong>通常12-24時間。</strong><br>TradingViewへの招待制アクセスはメールで届きます。<br>TradingView通知に招待が表示されます。<br>緊急のリクエストについては、<a href="mailto:support@signalpilot.io">support@signalpilot.io</a>までメールでお問い合わせください</p>
      </div>

      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-5">
        <strong id="faq-question-5">プランには何が含まれますか？</strong>
        <p id="faq-answer-5" class="note">すべてのプランに含まれるもの： <strong>エリート7種類</strong>、すべての将来のアップデート、継続的なサポート、ドキュメント、プリセット、新しいインジケーターのリリース時のアクセス。<br>ライフタイムプランはすべてを永久に含みます。</p>
      </div>

      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-6">
        <strong id="faq-question-6">何台のデバイスで使用できますか？</strong>
        <p id="faq-answer-6" class="note">ライセンスごとに1つのTradingViewユーザー名。<br>そのユーザー名で無制限のデバイスにログインできます。<br><strong>アカウント共有は禁止</strong>—各サブスクリプションは1つのTradingViewアカウントに紐付けられます。</p>
      </div>

      <!-- PAYMENT -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-7">
        <strong id="faq-question-7">キャンセルと返金</strong>
        <p id="faq-answer-7" class="note"><strong>7日間返金保証：</strong><br>初回お支払いから7日以内であれば、質問なしで全額返金いたします。<br>7日経過後は、いつでもキャンセル可能—ペナルティなし、部分返金なし。<br>現在の請求期間の終了までアクセスは維持されます。<br><br><strong>カード利用のお客様：</strong> <a href="manage-subscription.html">セルフサービスポータル</a>で管理（一時停止、キャンセル、支払い方法の更新）。<br><strong>PayPal利用のお客様：</strong> PayPal設定で管理。<br><a href="refund.html">返金ポリシーの詳細</a>をご覧ください。</p>
      </div>

      <!-- TRADING & STRATEGY -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-8">
        <strong id="faq-question-8">どの時間足が最適ですか？</strong>
        <p id="faq-answer-8" class="note">すべての時間足をサポート—1分足から年足チャートまで。<br><strong>最も人気：</strong> デイトレードは15分〜1時間足、スイングトレードは4時間〜日足。<br>Pentarchの5フェーズサイクルは時間足に自動的に適応します。<br>トレーニングセンターでは時間足最適化戦略をカバーしています。<br><a href="https://blog.signalpilot.io/articles/multi-timeframe-confirmation/" target="_blank" rel="noopener" style="color:var(--brand)">マルチタイムフレーム分析をマスターする →</a></p>
      </div>

      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-9">
        <strong id="faq-question-9">複数のインジケーターを一緒に使えますか？</strong>
        <p id="faq-answer-9" class="note"><strong>もちろんです！</strong><br>エリート7種類は連携して機能するように設計されています。<br>人気の組み合わせ： <strong>Pentarch + Volume Oracle</strong> でサイクルタイミングとスマートマネー確認、または <strong>OmniDeck + Janus Atlas</strong> で主要レベルと市場構造の完全な分析。<br><a href="https://blog.signalpilot.io/articles/inside-signal-pilot/" target="_blank" rel="noopener" style="color:var(--brand)">インジケーターの連携を見る →</a></p>
      </div>

      <!-- EDUCATION & SUPPORT -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-10">
        <strong id="faq-question-10">コーディングスキルは必要ですか？</strong>
        <p id="faq-answer-10" class="note"><strong>コーディング不要。</strong><br>すべてのインジケーターはプラグアンドプレイ。<br><strong>200以上の事前設定</strong>（ライフタイムプラン）が含まれており、さまざまな戦略に事前調整されています。<br>プリセットを読み込み、チャートに適用するだけです。<br>上級ユーザーは設定をカスタマイズできますが、これはオプションです。</p>
      </div>

      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-11">
        <strong id="faq-question-11">どのようなサポートチャネルがありますか？</strong>
        <p id="faq-answer-11" class="note"><strong>月額：</strong> メールサポート（48時間以内に返信）。<br><strong>年間+：</strong> 優先メールサポート（24時間以内に返信）。<br><strong>ライフタイム：</strong> プライベートDiscordコミュニティ + 優先サポート。<br>すべてのプランには、50ページ以上のドキュメントとビデオチュートリアルへのアクセスが含まれます。</p>
      </div>

    </div>

    <!-- View All FAQs Link -->
    <div style="text-align:center;margin-top:2.5rem">
      <a href="/ja/faq.html" class="btn btn-primary" style="display:inline-flex;align-items:center;gap:.5rem">
        完全なFAQ（30以上の質問）を見る →
      </a>
      <p style="color:var(--muted-2);font-size:.85rem;margin-top:.8rem">セットアップガイド、戦略、技術詳細</p>
    </div>

  </div>
</section>



    <!-- THANK YOU -->

    <section id="thanks" class="section" style="display:none">

      <div class="container stack"><div class="card">

        <h2 class="headline lg">ありがとうございます — 登録完了です！</h2>

        <p class="note measure">TradingViewの招待をアクティベートします：<strong>PayPal/カード決済は1〜8時間</strong>。この時間枠を過ぎても招待が表示されない場合は、取引詳細とTradingViewユーザー名を添えて<a href="mailto:support@signalpilot.io">support@signalpilot.io</a>までご報告ください。</p>

        <ol class="note measure" style="margin:.3rem 0 0 1.2rem"><li>TradingViewの招待は<em>インジケーター Invite-only scripts</em>の下に表示されます。</li><li>スタータープリセットが読み込まれます（メールで送信）。</li><li>2つのアラートが追加されます：EC ProとScreener。</li></ol>

        <div style="margin-top:.8rem"><a class="btn btn-primary" href="https://education.signalpilot.io/" target="_blank" rel="noopener">プレイブック</a></div>

      </div></div>

    </section>



  </main>



  <!-- LATEST ARTICLES CAROUSEL -->
  <section style="padding:4rem 0;background:var(--bg-elev);border-top:1px solid var(--border)">
    <div class="container">
      <div style="text-align:center;margin-bottom:2rem">
        <h2 style="font-size:2rem;font-weight:700;margin:0 0 .5rem 0">最新の記事</h2>
        <p style="color:var(--muted);font-size:1rem;margin:0">トレーディングの洞察、戦略、市場分析</p>
      </div>

      <div id="blog-carousel" class="articles-carousel" style="display:flex;gap:1.5rem;overflow-x:auto;scroll-snap-type:x mandatory;padding:1rem 0;-webkit-overflow-scrolling:touch;scrollbar-width:thin">
        <!-- Loading skeleton -->
        <div class="article-card article-skeleton" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem">
          <div style="width:80px;height:20px;background:var(--border);border-radius:4px;margin-bottom:.75rem;animation:pulse 1.5s infinite"></div>
          <div style="width:100%;height:24px;background:var(--border);border-radius:4px;margin-bottom:.5rem;animation:pulse 1.5s infinite"></div>
          <div style="width:90%;height:16px;background:var(--border);border-radius:4px;animation:pulse 1.5s infinite"></div>
        </div>
        <div class="article-card article-skeleton" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem">
          <div style="width:80px;height:20px;background:var(--border);border-radius:4px;margin-bottom:.75rem;animation:pulse 1.5s infinite"></div>
          <div style="width:100%;height:24px;background:var(--border);border-radius:4px;margin-bottom:.5rem;animation:pulse 1.5s infinite"></div>
          <div style="width:90%;height:16px;background:var(--border);border-radius:4px;animation:pulse 1.5s infinite"></div>
        </div>
        <div class="article-card article-skeleton" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem">
          <div style="width:80px;height:20px;background:var(--border);border-radius:4px;margin-bottom:.75rem;animation:pulse 1.5s infinite"></div>
          <div style="width:100%;height:24px;background:var(--border);border-radius:4px;margin-bottom:.5rem;animation:pulse 1.5s infinite"></div>
          <div style="width:90%;height:16px;background:var(--border);border-radius:4px;animation:pulse 1.5s infinite"></div>
        </div>

      </div>

      <div style="text-align:center;margin-top:1.5rem">
        <a href="https://blog.signalpilot.io/" target="_blank" rel="noopener" class="btn btn-primary" style="display:inline-flex;align-items:center;gap:.5rem">
          すべての記事を見る <span style="font-size:1.1rem">→</span>
        </a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->

  <footer style="border-top:1px solid var(--border);margin-top:2rem;padding:2.5rem 0 1.5rem">

    <div class="container">

      <!-- Main footer grid - horizontal layout -->
      <div style="display:grid;grid-template-columns:1.5fr 1fr 1fr 1fr;gap:2.5rem;margin-bottom:2.5rem" data-reveal-stagger>

        <div>
          <h4 style="margin:0 0 .8rem 0;font-size:1.1rem;font-weight:700"><span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;background:linear-gradient(135deg,#5b8aff,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Signal Pilot</span></h4>
          <p style="color:var(--muted);font-size:.85rem;line-height:1.6;margin:0 0 1rem 0">
            対象： <span class="typewriter-footer" style="color:var(--brand);font-weight:600"></span>
          </p>
          <p style="color:var(--muted);font-size:.85rem;line-height:1.6;margin:0 0 1rem 0">
            82の無料レッスン + 7つのプレミアムTradingViewインジケーター
          </p>
          <div style="display:flex;gap:.8rem;margin-top:1rem">
            <a href="mailto:support@signalpilot.io" style="color:var(--muted);text-decoration:none;font-size:.9rem;transition:color .2s" title="メール">メール</a>
          </div>
        </div>

        <div>
          <h4 style="margin:0 0 .8rem 0;font-size:.95rem;font-weight:600;color:var(--text)">製品</h4>
          <ul style="list-style:none;padding:0;margin:0">
            <li style="margin-bottom:.4rem"><a href="#inside" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">インジケーター</a></li>
            <li style="margin-bottom:.4rem"><a href="#pricing" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">料金プラン</a></li>
            <li style="margin-bottom:.4rem"><a href="https://docs.signalpilot.io/" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">ドキュメント</a></li>
            <li style="margin-bottom:.4rem"><a href="https://education.signalpilot.io/" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">トレーニングセンター</a></li>
            <li style="margin-bottom:.4rem"><a href="https://blog.signalpilot.io/" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">ブログ</a></li>
            <li style="margin-bottom:.4rem"><a href="#faq" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">FAQ</a></li>
          </ul>
        </div>

        <div>
          <h4 style="margin:0 0 .8rem 0;font-size:.95rem;font-weight:600;color:var(--text)">法務</h4>
          <ul style="list-style:none;padding:0;margin:0">
            <li style="margin-bottom:.4rem"><a href="/ja/privacy.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">プライバシーポリシー</a></li>
            <li style="margin-bottom:.4rem"><a href="/ja/terms.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">利用規約</a></li>
            <li style="margin-bottom:.4rem"><a href="/ja/refund.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">返金ポリシー</a></li>
            <li style="margin-bottom:.4rem"><a href="/ja/manage-subscription.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">サブスクリプション管理</a></li>
          </ul>
        </div>

        <div>
          <h4 style="margin:0 0 .8rem 0;font-size:.95rem;font-weight:600;color:var(--text)">接続</h4>
          <ul style="list-style:none;padding:0;margin:0">
            <li style="margin-bottom:.4rem"><a href="https://github.com/Signalpilot/signalpilot.io" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">GitHub</a></li>
            <li style="margin-bottom:.4rem"><a href="mailto:support@signalpilot.io" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">support@signalpilot.io</a></li>
            <li style="margin-bottom:.4rem"><a href="/ja/roadmap.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">ロードマップ</a></li>
            <li style="margin-bottom:.4rem"><a href="/ja/affiliates.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">アフィリエイトプログラム</a></li>
          </ul>
        </div>

      </div>

      <!-- Compact disclaimer + copyright bar -->
      <div style="border-top:1px solid var(--border);padding-top:1.5rem;display:flex;flex-direction:column;gap:1rem">

        <div style="background:linear-gradient(135deg,rgba(249,162,60,.06),rgba(249,162,60,.02));border:1px solid rgba(249,162,60,.15);border-radius:8px;padding:1rem 1.25rem">
          <p style="color:var(--muted);font-size:.8rem;margin:0;line-height:1.5">
            <strong style="color:#f9a23c;font-size:.82rem">⚠️ 教育的免責事項：</strong> Signal Pilotは学習のみを目的とした教育ツールを提供します。金融アドバイスではありません。トレーディングには重大なリスクが伴います。過去の実績は将来の結果を保証しません。
          </p>
        </div>

        <div style="display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.5rem;text-align:center">
          <p style="color:var(--muted-2);font-size:.8rem;margin:0">
            © 2025 <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.08em;font-weight:400">Signal Pilot</span> Labs. 無断複写・転載を禁じます。
          </p>
          <p style="color:var(--muted-2);font-size:.75rem;margin:0;opacity:.6">v202510301807</p>
        </div>

      </div>

    </div>

  </footer>



  <div id="live" class="sr-only" aria-live="polite"></div>



  <!-- Modal -->

  <div class="modal" id="cardNotify" role="dialog" aria-modal="true" aria-labelledby="cardNotifyTitle">

    <div class="modal-card">

      <header><h3 id="cardNotifyTitle">カード決済通知</h3><button class="modal-close" data-close aria-label="閉じる">✕</button></header>

      <form id="card-notify-form" action="https://formspree.io/f/mldpnrop" method="POST">

        <input type="hidden" name="source" value="card-notify"><input type="hidden" name="plan" id="card-notify-plan" value=""><input type="hidden" name="ref" id="card-notify-ref" value=""><input type="hidden" name="utm" id="card-notify-utm" value="">

        <div class="grid two-col" style="gap:.8rem">
          <div>
            <label for="cn-name">Name</label>
            <input id="cn-name" name="name" required>
          </div>
          <div>
            <label for="cn-email">Email</label>
            <input id="cn-email" name="email" type="email" required>
          </div>
        </div>

        <label for="cn-tv">TradingViewユーザー名</label>
        <input id="cn-tv" name="tradingview" placeholder="@あなたのTradingView" required>

        <button class="btn btn-primary" type="submit">通知に登録</button><a class="btn btn-ghost" href="#waitlist" style="margin-left:.4rem">ウェイトリスト</a>

      </form>

    </div>

  </div>



  <!-- =======================================================================
       SCRIPT: CONFIG + UTILITIES
       ======================================================================= -->

  <script>

    /* ======================== Config ======================== */

    const EDU_URL_OVERRIDE = 'https://education.signalpilot.io/';  // subdomain established

    const SP_WEBHOOK='https://script.google.com/macros/s/AKfycbyrv-tCAhfPbr1qRvMYqu55Iqlof9kgsvN_QjjWrQ7SHxl5suoSRMew7vAZ7rR05coasg/exec';

    const SP_SECRET='';

    const LT_CAP = 100;

    const LT_STATUS_URL = SP_WEBHOOK ? (SP_WEBHOOK + '?fn=lt_status') : '';



    function postWebhook(d){ if(!SP_WEBHOOK) return; const p={...d}; if(SP_SECRET.trim()) p.secret=SP_SECRET;

      fetch(SP_WEBHOOK,{method:'POST',mode:'no-cors',headers:{'Content-Type':'text/plain;charset=UTF-8'},body:JSON.stringify(p)}).catch(()=>{}); }

    function live(msg){ const el=document.getElementById('live'); if(!el) return; el.textContent=''; setTimeout(()=>el.textContent=msg,10); }

    /* ======================== Dynamic Blog Carousel ======================== */
    (function(){
      const carousel = document.getElementById('blog-carousel');
      if (!carousel) return;

      const tagColors = {
        'indicators': { bg: 'rgba(91,138,255,.15)', color: 'var(--brand)' },
        'psychology': { bg: 'rgba(118,75,162,.15)', color: '#a78bfa' },
        'market-cycles': { bg: 'rgba(52,211,153,.15)', color: '#34d399' },
        'practical': { bg: 'rgba(251,191,36,.15)', color: '#fbbf24' },
        'strategy': { bg: 'rgba(236,72,153,.15)', color: '#ec4899' },
        'beginner': { bg: 'rgba(59,130,246,.15)', color: '#3b82f6' },
        'intermediate': { bg: 'rgba(168,85,247,.15)', color: '#a855f7' },
        'advanced': { bg: 'rgba(239,68,68,.15)', color: '#ef4444' },
        'backtesting': { bg: 'rgba(20,184,166,.15)', color: '#14b8a6' },
        'risk-management': { bg: 'rgba(249,115,22,.15)', color: '#f97316' }
      };

      function createArticleCard(article) {
        const tag = (article.tags && article.tags[0]) || 'indicators';
        const displayTag = tag.replace(/-/g, ' ').toUpperCase();
        const colors = tagColors[tag] || tagColors['indicators'];
        const a = document.createElement('a');
        a.href = article.url || `https://blog.signalpilot.io/articles/${article.slug}/`;
        a.target = '_blank';
        a.rel = 'noopener';
        a.className = 'article-card';
        a.style.cssText = 'flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;transition:transform .2s,box-shadow .2s';
        a.innerHTML = `
          <span style="display:inline-block;padding:.25rem .5rem;background:${colors.bg};color:${colors.color};border-radius:4px;font-size:.75rem;font-weight:600;margin-bottom:.75rem">${displayTag}</span>
          <h3 style="font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 .5rem 0;line-height:1.3">${article.title}</h3>
          <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">${article.description || ''}</p>
        `;
        return a;
      }

      fetch('https://blog.signalpilot.io/api/articles.json')
        .then(r => r.json())
        .then(data => {
          const articles = Array.isArray(data) ? data : (data.articles || []);
          if (articles.length === 0) return;
          carousel.innerHTML = '';
          articles.slice(0, 8).forEach(article => {
            carousel.appendChild(createArticleCard(article));
          });
        })
        .catch(() => {
          // Fallback to static content on error
          carousel.innerHTML = `
            <a href="https://blog.signalpilot.io/articles/why-your-indicators-keep-failing/" target="_blank" rel="noopener" class="article-card" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;transition:transform .2s,box-shadow .2s">
              <span style="display:inline-block;padding:.25rem .5rem;background:rgba(91,138,255,.15);color:var(--brand);border-radius:4px;font-size:.75rem;font-weight:600;margin-bottom:.75rem">INDICATORS</span>
              <h3 style="font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 .5rem 0;line-height:1.3">Why Your Indicators Keep Failing</h3>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">Explores why traders with multiple indicators still struggle.</p>
            </a>
            <a href="https://blog.signalpilot.io/articles/the-repainting-problem/" target="_blank" rel="noopener" class="article-card" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;transition:transform .2s,box-shadow .2s">
              <span style="display:inline-block;padding:.25rem .5rem;background:rgba(91,138,255,.15);color:var(--brand);border-radius:4px;font-size:.75rem;font-weight:600;margin-bottom:.75rem">INDICATORS</span>
              <h3 style="font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 .5rem 0;line-height:1.3">The Repainting Problem</h3>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">How most indicators cheat with lookahead bias.</p>
            </a>
            <a href="https://blog.signalpilot.io/articles/how-smart-money-moves/" target="_blank" rel="noopener" class="article-card" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;transition:transform .2s,box-shadow .2s">
              <span style="display:inline-block;padding:.25rem .5rem;background:rgba(52,211,153,.15);color:#34d399;border-radius:4px;font-size:.75rem;font-weight:600;margin-bottom:.75rem">MARKET CYCLES</span>
              <h3 style="font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 .5rem 0;line-height:1.3">How Smart Money Actually Moves</h3>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">Decode institutional movement patterns.</p>
            </a>
          `;
        });
    })();


    // Capture ref/UTM

    (function(){ const q=new URLSearchParams(location.search);

      const ref=q.get('ref')||q.get('affiliate'); const utm=['utm_source','utm_medium','utm_campaign','utm_content','utm_term'].reduce((o,k)=>{const v=q.get(k);if(v)o[k]=v;return o;}, {});

      if(ref) localStorage.setItem('sp_ref', ref); if(Object.keys(utm).length) localStorage.setItem('sp_utm', JSON.stringify(utm)); })();

    function getRef(){return localStorage.getItem('sp_ref')||''}

    function getUTM(){try{return JSON.parse(localStorage.getItem('sp_utm')||'{}')}catch(_){return{}}}



    /* ======================== Theme toggle ======================== */

    (function(){

      const KEY='sp_theme';

      const btn=document.getElementById('themeToggle');

      const system = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches ? 'light':'dark';

      setTheme(localStorage.getItem(KEY) || system);

      if (btn) btn.addEventListener('click',()=>{ const cur=document.documentElement.getAttribute('data-theme')==='light'?'light':'dark'; setTheme(cur==='light'?'dark':'light'); });

      function setTheme(t){

        document.documentElement.setAttribute('data-theme',t);

        localStorage.setItem(KEY,t);

        // Update theme icon
        const icon = document.getElementById('theme-icon');
        if(icon) {
          // Sun icon for light mode, Moon icon for dark mode
          if(t === 'light') {
            icon.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;vertical-align:middle;opacity:0.7"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>';
          } else {
            icon.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;vertical-align:middle;opacity:0.7"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>';
          }
        }

        let m=document.querySelector('meta[name="theme-color"]');

        if(!m){m=document.createElement('meta');m.setAttribute('name','theme-color');document.head.appendChild(m);}

        m.setAttribute('content', t==='light' ? '#eef1f6' : '#05070d');

      }

    })();



    /* ======================== Education link override + theme handoff ======================== */

    (function(){

      const a=document.getElementById('eduLink'); if(!a) return;

      if(EDU_URL_OVERRIDE && /^https?:/.test(EDU_URL_OVERRIDE)) a.href=EDU_URL_OVERRIDE;

      a.addEventListener('click', function(e){

        if(!/^https?:/.test(a.href)) return;

        const theme=document.documentElement.getAttribute('data-theme')==='light'?'light':'dark';

        try{ const url=new URL(a.href); url.searchParams.set('t', theme); a.href=url.toString(); }catch(_){}

      }, {once:true});

    })();



    /* ======================== Mobile menu - Direct child of body ======================== */

    // Mobile menu - create as direct child of body to escape stacking context
    (function() {
      const menuBtn = document.getElementById('menuToggle');
      if (!menuBtn) return;

      // Create backdrop
      const backdrop = document.createElement('div');
      backdrop.className = 'mobile-nav-backdrop';

      // Create mobile nav container
      const mobileNav = document.createElement('div');
      mobileNav.className = 'mobile-nav';

      // Create header with close button
      const header = document.createElement('div');
      header.className = 'mobile-nav-header';
      header.innerHTML = `
        <span style="color:#fff;font-weight:700;font-size:1.1rem">Menu</span>
        <button class="mobile-nav-close">&times;</button>
      `;

      // Create links container
      const links = document.createElement('div');
      links.className = 'mobile-nav-links';
      links.innerHTML = `
        <a href="#trial" style="display:block;background:linear-gradient(135deg,#5b8aff,#764ba2);color:#fff !important;padding:1rem 1.5rem;border-radius:10px;font-weight:700;text-align:center;margin:1rem 1.25rem;box-shadow:0 4px 16px rgba(91,138,255,.35)">7日間無料トライアル →</a>
        <a href="#inside">アドベントカレンダー</a>
        <a href="/ja/chronicle/">クロニクル</a>
        <a href="https://docs.signalpilot.io/" target="_blank" rel="noopener">ドキュメント</a>
        <a href="https://education.signalpilot.io/" target="_blank" rel="noopener">トレーニングセンター</a>
        <a href="/ja/faq.html">FAQセンター</a>
        <a href="#pricing">料金プラン</a>
        <a href="/ja/affiliates.html">アフィリエイト</a>
      `;

      // Assemble menu
      mobileNav.appendChild(header);
      mobileNav.appendChild(links);

      // CRITICAL: Append directly to body (escapes header's stacking context)
      document.body.appendChild(backdrop);
      document.body.appendChild(mobileNav);

      const closeBtn = header.querySelector('.mobile-nav-close');

      // Open/close functions
      function open() {
        backdrop.classList.add('active');
        mobileNav.classList.add('active');
        menuBtn.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
      }

      function close() {
        backdrop.classList.remove('active');
        mobileNav.classList.remove('active');
        menuBtn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      }

      function toggle() {
        const isOpen = mobileNav.classList.contains('active');
        if (isOpen) {
          close();
        } else {
          open();
        }
      }

      // Event listeners
      menuBtn.addEventListener('click', toggle); // Changed from open to toggle
      closeBtn.addEventListener('click', close);
      backdrop.addEventListener('click', close);

      // Close menu when clicking any link
      links.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', close);
      });
    })();


    /* ======================== Resources Dropdown ======================== */

    // Use event delegation
    (function() {
      let dropdownOpen = false;

      // Toggle dropdown on button click using event delegation
      document.addEventListener('click', function(e) {
        const toggle = e.target.closest('.nav-dropdown-toggle');

        if (toggle) {
          e.preventDefault();
          e.stopPropagation();

          const dropdown = toggle.closest('.nav-dropdown');
          const menu = dropdown ? dropdown.querySelector('.nav-dropdown-menu') : null;

          if (menu) {
            dropdownOpen = !dropdownOpen;

            if (dropdownOpen) {
              menu.classList.add('show');
              toggle.setAttribute('aria-expanded', 'true');
            } else {
              menu.classList.remove('show');
              toggle.setAttribute('aria-expanded', 'false');
            }
          }
          return;
        }

        // Close dropdown when clicking outside
        if (dropdownOpen && !e.target.closest('.nav-dropdown')) {
          const menu = document.querySelector('.nav-dropdown-menu');
          const toggle = document.querySelector('.nav-dropdown-toggle');

          if (menu) menu.classList.remove('show');
          if (toggle) toggle.setAttribute('aria-expanded', 'false');
          dropdownOpen = false;
        }
      });

      // Close on escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && dropdownOpen) {
          const menu = document.querySelector('.nav-dropdown-menu');
          const toggle = document.querySelector('.nav-dropdown-toggle');

          if (menu) menu.classList.remove('show');
          if (toggle) toggle.setAttribute('aria-expanded', 'false');
          dropdownOpen = false;
        }
      });
    })();



    /* ======================== Copy to clipboard (wallets) ======================== */

    document.querySelectorAll('[data-copy]').forEach(btn=>btn.addEventListener('click',()=>{

      const el=document.querySelector(btn.getAttribute('data-copy')); if(!el) return;

      el.select(); el.setSelectionRange(0,99999); document.execCommand('copy'); const old=btn.textContent; btn.textContent='Copied';

      setTimeout(()=>btn.textContent=old,1400); live('Wallet address copied'); }));



    /* ======================== Sticky CTA ======================== */

    (function(){

      const ctaBar=document.getElementById('ctaBar'), ctaClose=document.getElementById('ctaClose');

      if (!ctaBar) return;

      let dismissed=false, suppressed=false, focusing=false, ticking=false;

      function update(){ const y=window.scrollY; const t=(window.innerWidth<480)?1200:650;

        if(dismissed||suppressed||focusing||y<=t){ctaBar.classList.remove('show'); ctaBar.classList.add('hide');}

        else{ctaBar.classList.add('show'); ctaBar.classList.remove('hide');}}

      function onScroll(){ if(ticking) return; ticking=true; requestAnimationFrame(()=>{update(); ticking=false;});}

      window.addEventListener('scroll',onScroll,{passive:true}); update();

      if (ctaClose) ctaClose.addEventListener('click',()=>{dismissed=true;update();});

      (function(){const targets=['#pricing','#waitlist'];

        // Feature detection for IntersectionObserver (older mobile browsers)

        if('IntersectionObserver' in window){

          const io2=new IntersectionObserver(entries=>{
            try {
              suppressed=entries.some(e=>e.isIntersecting);
              update();
            } catch(e) {
              // Silently handle observer errors
            }
          },{root:null,rootMargin:'0px 0px -55% 0px',threshold:0});

          targets.forEach(sel=>{const el=document.querySelector(sel); if(el) io2.observe(el);});

        }

      })();

      document.addEventListener('focusin',e=>{ if(/^(INPUT|TEXTAREA|SELECT)$/.test(e.target.tagName)){focusing=true;update();}});

      document.addEventListener('focusout',e=>{ if(/^(INPUT|TEXTAREA|SELECT)$/.test(e.target.tagName)){focusing=false;update();}});

    })();



    /* ======================== Thanks screen ======================== */

    (function(){function show(){const s=document.getElementById('thanks'); if(location.hash==='#thanks') s.style.display='block';}

      window.addEventListener('hashchange',show); show();})();



  </script>



  <!-- PayPal SDK - For Subscriptions -->
  <script src="https://www.paypal.com/sdk/js?client-id=AdNRKUpEsMiKJgMEmeD08QEwN_3MK4o5y_fABsd6z4TYA4rsN7TDgiI-FH5jc8rjSxVpxCrBzhzdHM6L&vault=true&intent=subscription&currency=USD&disable-funding=venmo"></script>

  <script>

    function renderSub(planId, containerId, tvInputId, planKey, consentId){

      if(!window.paypal) return;

      paypal.Buttons({

        style:{
          shape:'pill',
          color:'black',
          layout:'vertical',
          label:'subscribe',
          tagline:false,
          height:44
        },

        createSubscription: function(_, actions){

          const tvEl=document.getElementById(tvInputId);
          const tv=(tvEl && tvEl.value||'').trim();

          const consentEl=consentId ? document.getElementById(consentId) : null;
          const ok=consentEl ? consentEl.checked : true;

          // Clear previous errors
          const errorTvId = 'error-' + tvInputId;
          const errorConsentId = 'error-' + consentId;
          document.getElementById(errorTvId).style.display = 'none';
          if(consentId) document.getElementById(errorConsentId).style.display = 'none';

          if(!tv){
            document.getElementById(errorTvId).style.display = 'block';
            return;
          }

          if(!ok){
            document.getElementById(errorConsentId).style.display = 'block';
            return;
          }

          const ref=localStorage.getItem('sp_ref')||''; const custom=`tv:${tv}|plan:${planKey}${ref?`|ref:${ref}`:''}`;

          localStorage.setItem('sp_last_tv', tv); localStorage.setItem('sp_last_plan', planKey);

          return actions.subscription.create({ plan_id:planId, custom_id:custom, application_context:{shipping_preference:'NO_SHIPPING'} });

        },

        onApprove: function(data){

          fetch('https://script.google.com/macros/s/AKfycbyrv-tCAhfPbr1qRvMYqu55Iqlof9kgsvN_QjjWrQ7SHxl5suoSRMew7vAZ7rR05coasg/exec',

            {method:'POST',mode:'no-cors',headers:{'Content-Type':'text/plain'},body:JSON.stringify({ type:'subscription', plan: localStorage.getItem('sp_last_plan')||'unknown', tv: localStorage.getItem('sp_last_tv')||'', subscription_id: data.subscriptionID, ref: localStorage.getItem('sp_ref')||'', utm: (localStorage.getItem('sp_utm')||'{}') })});

          location.hash='#thanks';

        },

        onError: function(){ alert('支払いに失敗しました。再試行可能、またはsupport@signalpilot.ioまでお問い合わせください'); }

      }).render('#'+containerId).then(function(){

        // AGGRESSIVE: Remove all white backgrounds from PayPal button after render
        function forceTransparentBg(){
          const container = document.getElementById(containerId);
          if (container) {
            // Force transparent background on all descendants
            container.querySelectorAll('*').forEach(function(el){
              el.style.setProperty('background', 'transparent', 'important');
              el.style.setProperty('background-color', 'transparent', 'important');
            });
            // Force on container itself
            container.style.setProperty('background', 'transparent', 'important');
            container.style.setProperty('background-color', 'transparent', 'important');
          }
        }

        // Run multiple times to catch async PayPal updates
        setTimeout(forceTransparentBg, 50);
        setTimeout(forceTransparentBg, 150);
        setTimeout(forceTransparentBg, 500);
        setTimeout(forceTransparentBg, 1000);

        // Watch for PayPal injecting white backgrounds dynamically
        const container = document.getElementById(containerId);
        if (container && window.MutationObserver) {
          const observer = new MutationObserver(forceTransparentBg);
          observer.observe(container, {
            attributes: true,
            childList: true,
            subtree: true,
            attributeFilter: ['style', 'class']
          });
        }

      }).catch(function(err){
        console.warn('PayPal button render issue:', err);
      });

    }



    function lazyRenderSub(planId, containerId, tvInputId, planKey, consentId){

      const el=document.getElementById(containerId); if(!el) return; let rendered=false;

      // Feature detection - render immediately if IntersectionObserver not supported (older mobile browsers)

      if(!('IntersectionObserver' in window)){

        renderSub(planId,containerId,tvInputId,planKey,consentId);

        return;

      }

      const obs=new IntersectionObserver(entries=>{
        try {
          entries.forEach(e=>{if(!rendered&&e.isIntersecting){renderSub(planId,containerId,tvInputId,planKey,consentId); rendered=true; obs.disconnect();}});
        } catch(err) {
          // Silently handle observer errors
        }
      },{root:null, rootMargin:'300px', threshold:0});

      obs.observe(el);

    }



    // ===== LIFETIME BUTTON VALIDATION =====
    // Safari-compatible: No async/await before window.open() to avoid popup blocker

    (function(){
      const lifetimeBtn = document.getElementById('btn-lifetime-paypal');
      const tvInput = document.getElementById('tv-lifetime');
      const consentCheck = document.getElementById('consent-lifetime');

      if(!lifetimeBtn) {
        console.error('Lifetime button not found!');
        return;
      }

      console.log('✅ Lifetime button handler attached');

      lifetimeBtn.addEventListener('click', function(e){
        console.log('🔵 Lifetime button clicked');
        e.preventDefault();

        const tv = (tvInput && tvInput.value || '').trim();
        const consentOk = consentCheck && consentCheck.checked;

        console.log('Username:', tv, 'Consent:', consentOk);

        // Clear previous errors
        document.getElementById('error-tv-lifetime').style.display = 'none';
        document.getElementById('error-consent-lifetime').style.display = 'none';
        document.getElementById('error-soldout-lifetime').style.display = 'none';

        // Validate TradingView username
        if(!tv) {
          console.log('❌ Missing username');
          document.getElementById('error-tv-lifetime').style.display = 'block';
          return;
        }

        // Validate consent
        if(!consentOk) {
          console.log('❌ Missing consent');
          document.getElementById('error-consent-lifetime').style.display = 'block';
          return;
        }

        // Store for tracking BEFORE opening PayPal (synchronous)
        const ref = localStorage.getItem('sp_ref') || '';
        localStorage.setItem('sp_last_tv', tv);
        localStorage.setItem('sp_last_plan', 'lifetime');
        console.log('💾 Saved to localStorage');

        // CRITICAL FOR SAFARI: Open PayPal IMMEDIATELY (synchronous)
        // Safari blocks window.open() after async operations
        console.log('✅ Opening PayPal...');
        const paypalWindow = window.open('https://www.paypal.com/ncp/payment/436WMS3WRY2ZL', '_blank');

        if (!paypalWindow) {
          console.error('❌ Popup blocked! Please allow popups for this site.');
          alert('ポップアップがブロックされました。ポップアップを許可してもう一度お試しください。');
          return;
        }

        // Check availability and log tracking AFTER window opens (non-blocking)
        // This won't affect the PayPal window that's already open
        fetch('https://script.google.com/macros/s/AKfycbyrv-tCAhfPbr1qRvMYqu55Iqlof9kgsvN_QjjWrQ7SHxl5suoSRMew7vAZ7rR05coasg/exec?fn=lt_status', {
          method: 'GET',
          mode: 'cors',
          cache: 'no-store'
        }).then(function(res){
          if(res.ok) {
            return res.json();
          }
        }).then(function(j){
          if(j) {
            const claimed = Number(j.claimed || 0);
            console.log('📊 Availability: ' + claimed + '/350 claimed');
          }
        }).catch(function(err){
          console.warn('⚠️ Availability check failed:', err);
        });

        // Log tracking (non-blocking)
        fetch('https://script.google.com/macros/s/AKfycbyrv-tCAhfPbr1qRvMYqu55Iqlof9kgsvN_QjjWrQ7SHxl5suoSRMew7vAZ7rR05coasg/exec', {
          method: 'POST',
          mode: 'no-cors',
          headers: {'Content-Type': 'text/plain'},
          body: JSON.stringify({
            type: 'lifetime_start',
            plan: 'lifetime',
            tv: tv,
            ref: ref,
            utm: (localStorage.getItem('sp_utm') || '{}')
          })
        }).then(function(){
          console.log('📊 Tracking logged');
        }).catch(function(err){
          console.warn('⚠️ Tracking failed:', err);
        });
      });
    })();


    // ===== PAYPAL LIVE =====
    const PAYPAL_LIVE = true;

    /*
     * TODO: FIX PAYPAL BUTTON RENDERING - CURRENTLY DISABLED DUE TO MOBILE CRASH
     *
     * ROOT CAUSE: The renderSub() function causes mobile browsers to crash when scrolling
     * past the pricing section due to extremely aggressive DOM manipulation:
     *
     * 1. querySelectorAll('*') - Selects EVERY element in button container (very expensive)
     * 2. MutationObserver watching entire subtree - Fires on every style/class change
     * 3. forceTransparentBg() runs 4 times via setTimeout (50ms, 150ms, 500ms, 1000ms)
     * 4. Each run manipulates styles on EVERY descendant element
     * 5. This happens when IntersectionObserver fires (300px before pricing section visible)
     *
     * RECOMMENDED FIX OPTIONS:
     * A) Remove aggressive style manipulation entirely (accept PayPal's white background)
     * B) Use more specific selectors instead of querySelectorAll('*')
     * C) Remove MutationObserver, run forceTransparentBg() only once after render
     * D) Delay PayPal rendering until user actually clicks/interacts with form
     * E) Use PayPal's hosted buttons instead of SDK (like lifetime plan)
     *
     * Until fixed, monthly/年ly PayPal buttons are disabled.
     * Users can still purchase via lifetime plan form or contact support.
     */
    /*if (PAYPAL_LIVE) {
      // MONTHLY = $99 = P-1WW85539FH424981JND52S7A
      lazyRenderSub('P-1WW85539FH424981JND52S7A','paypal-button-container-P-1WW85539FH424981JND52S7A','tv-monthly','monthly','consent-monthly');

      // Quarterly removed

      // YEARLY = $699 = P-1S895034P48824141ND52VBA
      lazyRenderSub('P-1S895034P48824141ND52VBA','paypal-button-container-P-1S895034P48824141ND52VBA','tv-yearly','yearly','consent-yearly');

      // Lifetime button - using simple form (no SDK conflict)
    }*/






    // Lifetime form guard removed - now using Hosted Button

    // ===== LIGHTWEIGHT MONTHLY/YEARLY SUBSCRIPTION BUTTONS =====
    // Simple click handlers - NO DOM manipulation, NO MutationObserver, NO performance issues

    (function() {
      const monthlyBtn = document.getElementById('btn-monthly-paypal');
      const yearlyBtn = document.getElementById('btn-yearly-paypal');

      if (monthlyBtn) {
        monthlyBtn.addEventListener('click', function() {
          const tvInput = document.getElementById('tv-monthly');
          const consentCheck = document.getElementById('consent-monthly');
          const tv = (tvInput && tvInput.value || '').trim();
          const consentOk = consentCheck && consentCheck.checked;

          // Clear errors
          document.getElementById('error-tv-monthly').style.display = 'none';
          document.getElementById('error-consent-monthly').style.display = 'none';

          // Validate
          if (!tv) {
            document.getElementById('error-tv-monthly').style.display = 'block';
            return;
          }
          if (!consentOk) {
            document.getElementById('error-consent-monthly').style.display = 'block';
            return;
          }

          // Save for tracking
          localStorage.setItem('sp_last_tv', tv);
          localStorage.setItem('sp_last_plan', 'monthly');

          // Redirect to PayPal subscription page
          // Plan ID: P-1WW85539FH424981JND52S7A
          window.open('https://www.paypal.com/webapps/billing/plans/subscribe?plan_id=P-1WW85539FH424981JND52S7A', '_blank');
        });
      }

      if (yearlyBtn) {
        yearlyBtn.addEventListener('click', function() {
          const tvInput = document.getElementById('tv-yearly');
          const consentCheck = document.getElementById('consent-yearly');
          const tv = (tvInput && tvInput.value || '').trim();
          const consentOk = consentCheck && consentCheck.checked;

          // Clear errors
          document.getElementById('error-tv-yearly').style.display = 'none';
          document.getElementById('error-consent-yearly').style.display = 'none';

          // Validate
          if (!tv) {
            document.getElementById('error-tv-yearly').style.display = 'block';
            return;
          }
          if (!consentOk) {
            document.getElementById('error-consent-yearly').style.display = 'block';
            return;
          }

          // Save for tracking
          localStorage.setItem('sp_last_tv', tv);
          localStorage.setItem('sp_last_plan', 'yearly');

          // Redirect to PayPal subscription page
          // Plan ID: P-1S895034P48824141ND52VBA
          window.open('https://www.paypal.com/webapps/billing/plans/subscribe?plan_id=P-1S895034P48824141ND52VBA', '_blank');
        });
      }
    })();

    /* ======================== MOBILE-FRIENDLY: Simple PayPal styling ======================== */
    /* No JavaScript manipulation - pure CSS only for mobile performance */

  </script>

<script>
// Jump Navigation - Show/Hide and Active State
(function() {
  const jumpNav = document.getElementById('jumpNav');
  const jumpLinks = document.querySelectorAll('.jump-link');
  const sections = document.querySelectorAll('section[id]');
  
  if (!jumpNav) return;

  let ticking = false;

  // Show jump nav after scrolling past hero
  function updateJumpNavVisibility() {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        try {
          const scrollY = window.scrollY;
          const heroHeight = 600; // approximate hero height

          if (scrollY > heroHeight) {
            jumpNav.classList.add('visible');
          } else {
            jumpNav.classList.remove('visible');
          }
        } catch(e) {
          // Silently fail - don't break page on scroll
        }

        ticking = false;
      });
      ticking = true;
    }
  }

  // Update active link based on scroll position
  function updateActiveLink() {
    try {
      const scrollY = window.scrollY + 150; // offset for sticky nav

      let currentSection = '';

      sections.forEach(section => {
        if (!section) return;
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;

        if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
          currentSection = section.getAttribute('id');
        }
      });

      jumpLinks.forEach(link => {
        if (!link) return;
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${currentSection}`) {
          link.classList.add('active');
        }
      });
    } catch(e) {
      // Silently fail - don't break page on scroll
    }
  }

  // Smooth scroll to sections
  jumpLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const targetId = link.getAttribute('href').substring(1);
      const targetSection = document.getElementById(targetId);
      
      if (targetSection) {
        const offset = 140; // account for sticky header + jump nav
        const targetPosition = targetSection.offsetTop - offset;
        
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });

  // Listen for scroll events with error handling
  window.addEventListener('scroll', () => {
    try {
      updateJumpNavVisibility();
      updateActiveLink();
    } catch(e) {
      // Prevent scroll errors from breaking the page
      console.error('Scroll handler error:', e);
    }
  }, { passive: true });

  // Initial check
  updateJumpNavVisibility();
  updateActiveLink();
})();
</script>

<script>
// Universal Anchor Link Handler - Fixes #pricing and all other # links
(function() {
  function scrollToHash(hash, smooth) {
    if (!hash) return;

    const targetId = hash.startsWith('#') ? hash.substring(1) : hash;
    const targetSection = document.getElementById(targetId);

    if (targetSection) {
      // Calculate offset for sticky header
      const header = document.querySelector('header');
      const headerHeight = header ? header.offsetHeight : 80;
      const offset = headerHeight + 20; // Add 20px extra padding

      const targetPosition = targetSection.getBoundingClientRect().top + window.pageYOffset - offset;

      // Scroll
      window.scrollTo({
        top: targetPosition,
        behavior: smooth ? 'smooth' : 'auto'
      });

      return true;
    }
    return false;
  }

  // Handle clicks on anchor links
  document.addEventListener('click', function(e) {
    const link = e.target.closest('a[href^="#"]');
    if (!link) return;

    const href = link.getAttribute('href');
    if (!href || href === '#') return;

    if (scrollToHash(href, true)) {
      e.preventDefault();

      // Update URL hash without jumping
      if (history.pushState) {
        history.pushState(null, null, href);
      }
    }
  });

  // Handle page load with hash in URL (e.g., signalpilot.io/#pricing)
  function handleInitialHash() {
    const hash = window.location.hash;
    if (hash) {
      // Prevent default browser jump
      if (history.replaceState) {
        history.replaceState(null, null, ' ');
      }

      // Wait a bit for content to load, then scroll
      setTimeout(function() {
        if (scrollToHash(hash, true)) {
          // Restore hash to URL after scrolling
          if (history.replaceState) {
            history.replaceState(null, null, hash);
          }
        }
      }, 100);
    }
  }

  // Run on page load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', handleInitialHash);
  } else {
    handleInitialHash();
  }
})();
</script>

<script>
// Load SignalPilot Theme System with cache busting
(function() {
  // IMPORTANT: Update VERSION on each deployment (format: YYYYMMDDHHmm)
  // This ensures users get fresh JS/CSS after updates
  var VERSION = '202510301943'; // Last updated: 2025-10-30 19:43 UTC

  function loadScript(src, callback) {
    var s = document.createElement('script');
    s.src = src + '?v=' + VERSION;
    s.defer = true;
    s.onload = callback || function(){};
    s.onerror = function(){ /* Script failed to load */ };
    document.body.appendChild(s);
  }

  // Load in sequence: device-capability -> themes -> particles -> theme-switcher
  const cacheBust = '?v=' + Date.now();
  loadScript('assets/device-capability.js' + cacheBust, function() {
    loadScript('assets/themes.js' + cacheBust, function() {
      loadScript('assets/particles.js' + cacheBust, function() {
        loadScript('assets/theme-switcher.js' + cacheBust);
      });
    });
  });
})();
</script>

<script>
// UNREGISTER SERVICE WORKER - Permanently remove PWA caching
// Service worker was causing constant cache issues. Landing pages don't need offline mode.
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.getRegistrations().then(function(registrations) {
      for (let registration of registrations) {
        registration.unregister();
      }
    });

    // Clear all caches
    if ('caches' in window) {
      caches.keys().then(function(cacheNames) {
        return Promise.all(
          cacheNames.map(function(cacheName) {
            return caches.delete(cacheName);
          })
        );
      }).then(function() {
        // All caches cleared
      });
    }
  });
}
</script>

<script>
// Force scroll to top on page load/refresh (Mobile fix)
// But respect URL hash anchors for direct linking (e.g., /#faq)
(function() {
  var hasHash = window.location.hash && window.location.hash.length > 1;

  if ('scrollRestoration' in history) {
    // Only disable scroll restoration if no hash anchor
    history.scrollRestoration = hasHash ? 'auto' : 'manual';
  }

  // Only scroll to top if no hash anchor
  if (!hasHash) {
    window.scrollTo(0, 0);
  }

  // Also on page load (but respect hash)
  window.addEventListener('load', function() {
    if (!window.location.hash || window.location.hash.length <= 1) {
      window.scrollTo(0, 0);
    }
  });

  // And on beforeunload (catches refresh)
  window.addEventListener('beforeunload', function() {
    window.scrollTo(0, 0);
  });
})();
</script>

<script>
// Toggle indicator details
(function() {
  document.addEventListener('DOMContentLoaded', function() {
    const toggleButtons = document.querySelectorAll('.toggle-details');
    
    toggleButtons.forEach(button => {
      button.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        const targetDiv = document.getElementById(targetId);
        
        if (targetDiv) {
          const isVisible = targetDiv.style.display !== 'none';

          if (isVisible) {
            targetDiv.style.display = 'none';
            this.textContent = '詳細 ▼';
          } else {
            targetDiv.style.display = 'block';
            this.textContent = '詳細を隠す ▲';
          }
        }
      });
    });
  });
})();
</script>

<!-- Lemon Squeezy Checkout -->
<script src="https://assets.lemonsqueezy.com/lemon.js" defer></script>
<script>
  window.addEventListener('DOMContentLoaded', function() {
    // Initialize Lemon Squeezy when ready
    if (window.createLemonSqueezy) {
      window.createLemonSqueezy();
    } else {
      // Wait for script to load
      window.addEventListener('load', function() {
        if (window.createLemonSqueezy) {
          window.createLemonSqueezy();
        }
      });
    }
  });
</script>

<!-- Google Analytics 4 - Custom Event Tracking -->
<script>
(function() {
  // Wait for GA to be ready
  function trackEvent(eventName, eventParams) {
    if (typeof gtag === 'function') {
      gtag('event', eventName, eventParams);
    }
  }

  document.addEventListener('DOMContentLoaded', function() {

    // 1. TRACK CTA BUTTON CLICKS
    // "Try Risk-Free" buttons
    document.querySelectorAll('a[href="#pricing"], .cta-header').forEach(function(btn) {
      btn.addEventListener('click', function() {
        trackEvent('cta_click', {
          button_text: this.textContent.trim(),
          button_location: this.classList.contains('cta-header') ? 'header' : 'page',
          link_url: this.href
        });
      });
    });

    // 2. TRACK PRICING PLAN SELECTIONS
    // PayPal forms
    document.querySelectorAll('form[action*="paypal"]').forEach(function(form) {
      form.addEventListener('submit', function() {
        const submitBtn = this.querySelector('input[type="submit"]');
        const planName = submitBtn && submitBtn.value || 'Unknown Plan';
        trackEvent('select_plan', {
          plan_name: planName,
          payment_method: 'paypal'
        });
      });
    });

    // Lemon Squeezy / Card payment links
    document.querySelectorAll('a[href*="lemonsqueezy"], .btn-primary[href*="pricing"]').forEach(function(link) {
      link.addEventListener('click', function() {
        trackEvent('select_plan', {
          plan_name: this.textContent.trim(),
          payment_method: 'card'
        });
      });
    });

    // 3. FAQ COLLAPSIBLE + TRACKING
    document.querySelectorAll('#faq .card').forEach(function(card, index) {
      // Mark first 3 as expanded initially
      if (index < 3) {
        card.classList.add('expanded');
      }

      // Toggle function
      function toggleFAQ() {
        // Toggle expanded class
        card.classList.toggle('expanded');
        const isExpanded = card.classList.contains('expanded');

        // Update ARIA attribute for accessibility
        card.setAttribute('aria-expanded', isExpanded);

        const strongEl = card.querySelector('strong');
        const question = strongEl && strongEl.textContent || 'FAQ ' + (index + 1);

        trackEvent('faq_interaction', {
          question_number: index + 1,
          question_text: question.substring(0, 100) // Limit to 100 chars
        });
      }

      // Click handler
      card.addEventListener('click', toggleFAQ);

      // Keyboard support (Enter and Space)
      card.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleFAQ();
        }
      });
    });

    // 4. TRACK SCROLL DEPTH
    let scrollDepths = { 25: false, 50: false, 75: false, 100: false };

    window.addEventListener('scroll', function() {
      try {
        const scrollPercent = Math.round((window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100);

        Object.keys(scrollDepths).forEach(function(depth) {
          if (scrollPercent >= depth && !scrollDepths[depth]) {
            scrollDepths[depth] = true;
            trackEvent('scroll_depth', {
              percent: depth + '%'
            });
          }
        });
      } catch(e) {
        // Silently fail
      }
    }, { passive: true });

    // 5. TRACK NAVIGATION DROPDOWN INTERACTIONS
    const resourcesDropdown = document.querySelector('.nav-dropdown-toggle');
    if (resourcesDropdown) {
      resourcesDropdown.addEventListener('click', function() {
        trackEvent('dropdown_open', {
          dropdown_name: 'resources'
        });
      });
    }

    // Track dropdown link clicks
    document.querySelectorAll('.nav-dropdown-menu a').forEach(function(link) {
      link.addEventListener('click', function() {
        trackEvent('navigation_click', {
          link_text: this.textContent.trim(),
          link_url: this.href,
          dropdown: 'resources'
        });
      });
    });

    // 6. TRACK THEME TOGGLE
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
      themeToggle.addEventListener('click', function() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        trackEvent('theme_toggle', {
          from_theme: currentTheme,
          to_theme: newTheme
        });
      });
    }

    // 8. TRACK VIDEO PLAYS
    const heroVideo = document.getElementById('heroVideo');
    if (heroVideo) {
      let videoPlayed = false;
      heroVideo.addEventListener('play', function() {
        if (!videoPlayed) {
          videoPlayed = true;
          trackEvent('video_play', {
            video_id: 'hero_video',
            video_location: 'hero_section'
          });
        }
      });
    }

    // 9. TRACK EXTERNAL LINKS
    document.querySelectorAll('a[target="_blank"]').forEach(function(link) {
      link.addEventListener('click', function() {
        trackEvent('outbound_link', {
          link_text: this.textContent.trim(),
          link_url: this.href,
          link_domain: new URL(this.href).hostname
        });
      });
    });

    // 10. TRACK EMAIL/SUPPORT LINKS
    document.querySelectorAll('a[href^="mailto:"]').forEach(function(link) {
      link.addEventListener('click', function() {
        trackEvent('email_click', {
          email_address: this.href.replace('mailto:', '')
        });
      });
    });
  });
})();
</script>

<!-- Dynamic Lifetime Pricing System -->
<script>
(function() {
  'use strict';

  // Configuration: Define pricing tiers
  const PRICING_TIERS = [
    { min: 0, max: 50, price: 1799, name: 'Tier 1' },
    { min: 51, max: 150, price: 2499, name: 'Tier 2' },
    { min: 151, max: 350, price: 3499, name: 'Tier 3' },
    { min: 351, max: Infinity, price: null, name: 'Removed' }
  ];

  const TOTAL_SLOTS = 350;

  // Manual update: Change this number when you make a sale
  let currentSalesCount = 0; // UPDATE THIS MANUALLY FOR NOW

  // DOM Elements
  const elements = {
    progressFill: document.getElementById('lifetime-progress-fill'),
    progressText: document.getElementById('lifetime-progress-text'),
    currentPrice: document.getElementById('lifetime-current-price'),
    nextPrice: document.getElementById('lifetime-next-price'),
    slotsRemaining: document.getElementById('lifetime-slots-remaining'),
    displayPrice: document.getElementById('lifetime-display-price'),
    buyButton: document.getElementById('lifetime-buy-button')
  };

  // Get current tier based on sales count
  function getCurrentTier(salesCount) {
    return PRICING_TIERS.find(tier => salesCount >= tier.min && salesCount <= tier.max);
  }

  // Get next tier
  function getNextTier(currentTier) {
    const currentIndex = PRICING_TIERS.indexOf(currentTier);
    return PRICING_TIERS[currentIndex + 1] || null;
  }

  // Update UI with current pricing data
  function updatePricingUI(salesCount) {
    const currentTier = getCurrentTier(salesCount);
    const nextTier = getNextTier(currentTier);

    if (!currentTier) return;

    // Calculate progress percentage
    const progressPercent = Math.min((salesCount / TOTAL_SLOTS) * 100, 100);

    // Calculate slots remaining in current tier
    const slotsRemainingInTier = currentTier.max - salesCount;

    // Update UI elements
    if (elements.progressFill) {
      elements.progressFill.style.width = progressPercent + '%';
    }

    if (elements.progressText) {
      elements.progressText.innerHTML = `<strong style="color:#fff">${salesCount} of ${TOTAL_SLOTS}</strong> founding member slots claimed`;
    }

    if (elements.currentPrice && currentTier.price) {
      elements.currentPrice.textContent = `$${currentTier.price.toLocaleString()}`;
    }

    if (elements.displayPrice && currentTier.price) {
      elements.displayPrice.textContent = `$${currentTier.price.toLocaleString()}`;
    }

    if (elements.buyButton && currentTier.price) {
      elements.buyButton.value = `今すぐ購入 - $${currentTier.price.toLocaleString()}`;
    }

    if (nextTier && nextTier.price) {
      if (elements.nextPrice) {
        elements.nextPrice.textContent = `$${nextTier.price.toLocaleString()}`;
      }
      if (elements.slotsRemaining) {
        elements.slotsRemaining.textContent = slotsRemainingInTier;
      }
    } else {
      // Last tier or removed
      if (elements.nextPrice) {
        elements.nextPrice.textContent = '削除済み';
      }
      if (elements.slotsRemaining) {
        elements.slotsRemaining.textContent = slotsRemainingInTier;
      }
    }
  }

  // Optional: Fetch from API (implement this later)
  async function fetchLifetimeSalesCount() {
    try {
      // Replace with your actual API endpoint
      const response = await fetch('/api/lifetime-slots-remaining');
      const data = await response.json();
      return data.sales_count || currentSalesCount;
    } catch (error) {
      console.warn('⚠️ API not available, using manual count:', currentSalesCount);
      return currentSalesCount;
    }
  }

  // Initialize pricing on page load
  async function init() {
    // Try to fetch from API, fallback to manual count
    const salesCount = await fetchLifetimeSalesCount();
    updatePricingUI(salesCount);

    // Optional: Auto-refresh every 60 seconds
    // setInterval(async () => {
    //   const updatedCount = await fetchLifetimeSalesCount();
    //   updatePricingUI(updatedCount);
    // }, 60000);
  }

  // Run on page load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

  // Export function for manual updates (from browser console)
  window.updateLifetimePricing = function(newSalesCount) {
    currentSalesCount = newSalesCount;
    updatePricingUI(newSalesCount);
  };
})();
</script>

<!-- Global Lazy Loading Fix - Preload images aggressively -->
<script>
(function() {
  'use strict';

  // Fix lazy loading issues when scrolling fast
  if ('IntersectionObserver' in window) {
    const lazyImages = document.querySelectorAll('img[loading="lazy"]');

    // Create observer with large margin to preload before visible
    const globalImageObserver = new IntersectionObserver((entries) => {
      try {
        entries.forEach(entry => {
          if (entry.isIntersecting || entry.intersectionRatio > 0) {
            const img = entry.target;

            // Remove lazy loading to force immediate load
            img.removeAttribute('loading');

            // If using data-src pattern, load it
            if (img.dataset.src && !img.src) {
              img.src = img.dataset.src;
            }

            // Stop observing once loaded
            globalImageObserver.unobserve(img);
          }
        });
      } catch(e) {
        // Silently handle image loading errors
      }
    }, {
      root: null,
      rootMargin: '1000px', // Very large margin - preload well before visible
      threshold: 0
    });

    // Observe all lazy images
    lazyImages.forEach(img => {
      globalImageObserver.observe(img);
    });
  } else {
    // Fallback: remove lazy loading from all images
    document.querySelectorAll('img[loading="lazy"]').forEach(img => {
      img.removeAttribute('loading');
    });
  }
})();
</script>

<!-- Cookie Consent System - Re-enabled after finding real issue (PayPal rendering) -->
<script src="/assets/cookie-consent.js"></script>

<!-- AI Chatbot - Re-enabled after finding real issue (PayPal rendering) -->
<script src="/assets/chatbot.js" defer></script>

<!-- Device Optimization System DISABLED - FPS detection was breaking mobile rendering -->
<!-- TODO: Re-implement without FPS detection that sets data-capability="low" -->
<!--
<script src="/assets/device-optimizations.js" defer></script>
-->

<!-- Section Lazy Loading DISABLED - Causing mobile rendering issues -->
<!-- TODO: Re-implement lazy loading properly after fixing mobile issues -->
<!--
<script>
(function() {
  'use strict';
  // Lazy loading disabled - all sections load immediately
})();
</script>
-->

<!-- Cookie Consent Banner - Re-enabled after fixing scroll issue -->
<div id="cookie-consent-banner">
  <div class="cookie-consent-container">
    <div class="cookie-consent-text">
      <h3>🍪 クッキー</h3>
      <p>
        当社は、お客様の体験を向上させるために分析クッキー（Clarity & GA4）を使用しています。<a href="/ja/privacy.html">プライバシーポリシー</a>
      </p>
    </div>
    <div class="cookie-consent-actions">
      <button id="cookie-accept-all" class="cookie-consent-btn cookie-consent-btn-accept">同意する</button>
      <button id="cookie-decline-all" class="cookie-consent-btn cookie-consent-btn-decline">拒否する</button>
      <button id="cookie-settings" class="cookie-consent-btn cookie-consent-btn-settings">設定</button>
    </div>
  </div>
</div>

<!-- クッキー設定モーダル -->
<div id="cookie-preferences-modal">
  <div class="cookie-preferences-content">
    <div class="cookie-preferences-header">
      <h2>クッキー設定</h2>
      <button id="cookie-preferences-close" class="cookie-preferences-close" aria-label="閉じる">&times;</button>
    </div>

    <div class="cookie-preferences-body">
      <div class="cookie-category">
        <div class="cookie-category-header">
          <h3 class="cookie-category-title">
            必須クッキー
            <span class="cookie-category-badge badge-required">必須</span>
          </h3>
          <label class="cookie-toggle">
            <input type="checkbox" checked disabled>
            <span class="cookie-toggle-slider"></span>
          </label>
        </div>
        <p class="cookie-category-description">
          これらのクッキーは、ウェブサイトの機能に必要であり、無効にすることはできません。セッション管理、支払い処理、セキュリティ機能が含まれます。
        </p>
      </div>

      <div class="cookie-category">
        <div class="cookie-category-header">
          <h3 class="cookie-category-title">分析クッキー</h3>
          <label class="cookie-toggle">
            <input type="checkbox" id="analytics-toggle">
            <span class="cookie-toggle-slider"></span>
          </label>
        </div>
        <p class="cookie-category-description">
          当社は、訪問者がサイトとどのようにやり取りするかを理解するために、Microsoft ClarityとGoogle Analyticsを使用しています。これにより、お客様の体験を向上させることができます。これらのクッキーは、ページビュー、滞在時間、ナビゲーションパターンなどの匿名化されたデータを収集します。
        </p>
      </div>
    </div>

    <div class="cookie-preferences-footer">
      <button id="cookie-cancel-preferences" class="cookie-consent-btn cookie-consent-btn-decline">キャンセル</button>
      <button id="cookie-save-preferences" class="cookie-consent-btn cookie-consent-btn-accept">設定を保存</button>
    </div>
  </div>
</div>

<!-- Trial Form Handler -->
<script>
(function() {
  'use strict';

  const trialForm = document.getElementById('trialForm');
  const trialSuccess = document.getElementById('trialSuccess');
  const formLoadTime = Date.now();

  if (trialForm) {
    trialForm.addEventListener('submit', async function(e) {
      e.preventDefault();

      const submitBtn = trialForm.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.textContent = '処理中...';

      // Anti-spam: Check honeypot field
      const honeypot = document.getElementById('website');
      if (honeypot && honeypot.value !== '') {
        console.log('Spam detected: honeypot filled');
        return; // Silent fail for bots
      }

      // Anti-spam: Check submission time (bots submit too fast)
      const timeSinceLoad = Date.now() - formLoadTime;
      if (timeSinceLoad < 2000) {
        console.log('Spam detected: too fast');
        return; // Silent fail for bots
      }

      const email = document.getElementById('trialEmail').value.trim();
      const tvUsername = document.getElementById('trialTvUsername').value.trim();

      // Validate required fields
      if (!email || !tvUsername) {
        alert('すべての必須項目を入力してください');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
        return;
      }

      // Validate email format
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('有効なメールアドレスを入力してください');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
        return;
      }

      const formData = {
        email: email,
        tradingview_username: tvUsername,
        consent: document.getElementById('trialConsent').checked,
        timestamp: new Date().toISOString(),
        source: 'website_trial_form'
      };

      try {
        // Send to your backend endpoint (you'll need to set this up)
        // For now, we'll use a simple webhook or email service
        const response = await fetch('https://hook.eu1.make.com/7klx329gnfpknko32nubiu43nadwoouz', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData)
        });

        if (response.ok) {
          // Hide form, show success message
          trialForm.style.display = 'none';
          trialSuccess.style.display = 'block';

          // Optional: Track conversion
          if (typeof gtag !== 'undefined') {
            gtag('event', 'trial_signup', {
              event_category: 'engagement',
              event_label: 'free_trial'
            });
          }
        } else {
          throw new Error('Submission failed');
        }
      } catch (error) {
        console.error('Trial signup error:', error);
        alert('問題が発生しました。もう一度お試しいただくか、support@signalpilot.ioまでメールでお問い合わせください。');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });
  }

  // Newsletter signup handler
  const footerNewsletterBtn = document.getElementById('footerNewsletterBtn');
  const footerNewsletterEmail = document.getElementById('footerNewsletterEmail');

  if (footerNewsletterBtn && footerNewsletterEmail) {
    footerNewsletterBtn.addEventListener('click', async function() {
      const email = footerNewsletterEmail.value.trim();

      // Basic email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!email || !emailRegex.test(email)) {
        alert('有効なメールアドレスを入力してください');
        footerNewsletterEmail.focus();
        return;
      }

      const originalText = footerNewsletterBtn.textContent;
      footerNewsletterBtn.disabled = true;
      footerNewsletterBtn.textContent = '登録中...';

      try {
        // For now, show success message
        // TODO: 接続 to newsletter service (ConvertKit, Mailchimp, etc.)

        // Simulate API call
        await new Promise(resolve => setTimeout(resolve, 800));

        // Show success
        footerNewsletterEmail.value = '';
        footerNewsletterBtn.textContent = '✓ 登録完了！';
        footerNewsletterBtn.style.background = 'var(--good)';

        // Optional: Track conversion
        if (typeof gtag !== 'undefined') {
          gtag('event', 'newsletter_signup', {
            event_category: 'engagement',
            event_label: 'footer_newsletter'
          });
        }

        // Reset button after 3 seconds
        setTimeout(() => {
          footerNewsletterBtn.textContent = originalText;
          footerNewsletterBtn.disabled = false;
          footerNewsletterBtn.style.background = '';
        }, 3000);

      } catch (error) {
        console.error('Newsletter signup error:', error);
        alert('問題が発生しました。もう一度お試しいただくか、support@signalpilot.ioまでメールでお問い合わせください。');
        footerNewsletterBtn.disabled = false;
        footerNewsletterBtn.textContent = originalText;
      }
    });

    // Allow Enter key to submit
    footerNewsletterEmail.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        footerNewsletterBtn.click();
      }
    });
  }
})();
</script>

<style>
  /* Affiliate Elements Responsive Optimization */

  /* Affiliate Banner Section - Mobile */
  @media (max-width: 768px) {
    #affiliate-banner .card {
      padding: 1.5rem 1rem !important;
    }
    #affiliate-banner h2 {
      font-size: 1.5rem !important;
    }
    #affiliate-banner p {
      font-size: 1rem !important;
    }
    #affiliate-banner .btn {
      width: 100%;
      justify-content: center;
    }
  }

  /* Tablet Optimization */
  @media (min-width: 641px) and (max-width: 1024px) {
    #affiliate-banner h2 {
      font-size: 2rem !important;
    }
  }
</style>

<script>
// Scroll-triggered animations and stats counter
(function() {
  'use strict';

  // Add scroll animation classes to key sections
  function initScrollAnimations() {
    // Detect mobile for performance optimizations
    const isMobile = window.innerWidth <= 768;

    // Add CSS for scroll animations
    const style = document.createElement('style');
    // Reduce animation distance on mobile
    const distance = isMobile ? '20px' : '30px';
    style.textContent = `
      .scroll-fade-in {
        opacity: 0;
        transform: translateY(${distance});
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .scroll-fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .scroll-fade-in-left {
        opacity: 0;
        transform: translateX(-${distance});
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .scroll-fade-in-left.visible {
        opacity: 1;
        transform: translateX(0);
      }
      .scroll-fade-in-right {
        opacity: 0;
        transform: translateX(${distance});
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .scroll-fade-in-right.visible {
        opacity: 1;
        transform: translateX(0);
      }
    `;
    document.head.appendChild(style);

    // Add animation classes to pricing cards
    const pricingCards = document.querySelectorAll('.pricing-grid .card.plan');
    pricingCards.forEach((card, i) => {
      if (i === 0) card.classList.add('scroll-fade-in-left');
      else if (i === 2) card.classList.add('scroll-fade-in-right');
      else card.classList.add('scroll-fade-in');
    });

    // Add animation classes to indicator cards
    const indicatorCards = document.querySelectorAll('.card.product');
    indicatorCards.forEach(card => card.classList.add('scroll-fade-in'));

    // Intersection Observer for scroll animations
    // Use lower threshold on mobile for better performance
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          // Trigger stats counter if this is a pricing section
          if (entry.target.classList.contains('plan') && !entry.target.dataset.counted) {
            entry.target.dataset.counted = 'true';
          }
        }
      });
    }, {
      threshold: isMobile ? 0.05 : 0.1,
      rootMargin: isMobile ? '0px 0px -20px 0px' : '0px 0px -50px 0px'
    });

    // Observe all animated elements
    document.querySelectorAll('.scroll-fade-in, .scroll-fade-in-left, .scroll-fade-in-right').forEach(el => {
      observer.observe(el);
    });
  }

  // Stats counter animation
  function initStatsCounter() {
    const statElements = document.querySelectorAll('.stat-value, .price');

    function animateNumber(element) {
      const text = element.textContent.trim();
      const match = text.match(/(\$)?(\d+(?:,\d+)?)/);

      if (!match) return;

      const prefix = match[1] || '';
      const numberStr = match[2].replace(/,/g, '');
      const target = parseInt(numberStr);
      const suffix = text.replace(match[0], '').trim();

      if (isNaN(target) || target < 10) return;

      let current = 0;
      const increment = Math.ceil(target / 50);
      const duration = 1000;
      const stepTime = duration / 50;

      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          current = target;
          clearInterval(timer);
        }

        const formattedNumber = current.toLocaleString();
        element.textContent = prefix + formattedNumber + (suffix ? ' ' + suffix : '');
      }, stepTime);
    }

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !entry.target.dataset.animated) {
          entry.target.dataset.animated = 'true';
          setTimeout(() => animateNumber(entry.target), 200);
        }
      });
    }, {
      threshold: 0.5
    });

    statElements.forEach(el => observer.observe(el));
  }

  // Initialize on DOMContentLoaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      initScrollAnimations();
      initStatsCounter();
      initLightbox();
      initParallax();
      initTypingEffect();
      initScrollProgress();
    });
  } else {
    initScrollAnimations();
    initStatsCounter();
    initLightbox();
    initParallax();
    initTypingEffect();
    initScrollProgress();
  }

  // Scroll progress indicator
  function initScrollProgress() {
    const progressBar = document.querySelector('.scroll-progress');
    if (!progressBar) return;

    // Force visibility
    progressBar.style.display = 'block';
    progressBar.style.position = 'fixed';
    progressBar.style.top = '0';
    progressBar.style.left = '0';
    progressBar.style.zIndex = '10000';

    let ticking = false;

    function updateProgress() {
      const windowHeight = window.innerHeight || document.documentElement.clientHeight;
      // Use Math.max for better mobile compatibility
      const documentHeight = Math.max(
        document.documentElement.scrollHeight,
        document.body.scrollHeight
      );
      const scrollTop = window.pageYOffset || window.scrollY || document.documentElement.scrollTop || document.body.scrollTop || 0;

      // Calculate scroll percentage
      const scrollable = documentHeight - windowHeight;
      const scrolled = scrollable > 0 ? (scrollTop / scrollable) * 100 : 0;

      progressBar.style.width = Math.min(Math.max(scrolled, 0), 100) + '%';

      ticking = false;
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(updateProgress);
        ticking = true;
      }
    }

    window.addEventListener('scroll', requestTick, { passive: true });
    window.addEventListener('resize', requestTick, { passive: true });
    // For iOS Safari elastic scrolling
    window.addEventListener('touchmove', requestTick, { passive: true });

    // Initial update with delay for mobile
    updateProgress();
    setTimeout(updateProgress, 100);
  }

  // Typing animation for hero headline
  function initTypingEffect() {
    const textElement = document.getElementById('typed-text');
    if (!textElement) return;

    const words = [
      '本格的なトレーダー向け',
      'デイトレーダー向け',
      'スイングトレーダー向け',
      'スキャルパー向け',
      'ポジショントレーダー向け',
      'すべてのトレーダー向け'
    ];

    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let typingSpeed = 100;

    function type() {
      const currentWord = words[wordIndex];

      if (isDeleting) {
        // Delete character
        textElement.textContent = currentWord.substring(0, charIndex - 1);
        charIndex--;
        typingSpeed = 50;
      } else {
        // Add character
        textElement.textContent = currentWord.substring(0, charIndex + 1);
        charIndex++;
        typingSpeed = 100;
      }

      // If word is complete
      if (!isDeleting && charIndex === currentWord.length) {
        // Pause at end of word
        typingSpeed = 2000;
        isDeleting = true;
      } else if (isDeleting && charIndex === 0) {
        // Move to next word
        isDeleting = false;
        wordIndex = (wordIndex + 1) % words.length;
        typingSpeed = 500;
      }

      setTimeout(type, typingSpeed);
    }

    // Start typing after a brief delay
    setTimeout(type, 1000);
  }

  // Parallax scroll effect for gradient orbs
  function initParallax() {
    const orb1 = document.getElementById('parallax-orb-1');
    const orb2 = document.getElementById('parallax-orb-2');

    if (!orb1 || !orb2) return;

    // Disable parallax on mobile for performance
    const isMobile = window.innerWidth <= 768;
    if (isMobile) return;

    let ticking = false;

    function updateParallax() {
      const scrolled = window.pageYOffset;

      // Move orb1 at 0.3x speed downward
      const orb1Offset = scrolled * 0.3;
      orb1.style.transform = `translateY(${orb1Offset}px)`;

      // Move orb2 at 0.5x speed downward (different speed for depth)
      const orb2Offset = scrolled * 0.5;
      orb2.style.transform = `translateY(${orb2Offset}px)`;

      ticking = false;
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(updateParallax);
        ticking = true;
      }
    }

    // Listen to scroll with requestAnimationFrame for performance
    window.addEventListener('scroll', requestTick, { passive: true });

    // Initial position
    updateParallax();
  }

  // Lightbox for indicator images
  function initLightbox() {
    // Create lightbox container
    const lightbox = document.createElement('div');
    lightbox.className = 'lightbox-overlay';
    lightbox.innerHTML = `
      <div class="lightbox-content">
        <button class="lightbox-close" aria-label="Close lightbox">×</button>
        <img src="" alt="">
      </div>
    `;
    document.body.appendChild(lightbox);

    const lightboxImg = lightbox.querySelector('img');
    const closeBtn = lightbox.querySelector('.lightbox-close');

    // Make all indicator images clickable
    const indicatorImages = document.querySelectorAll('.card.product img');
    indicatorImages.forEach(img => {
      // Only if image has actual src (not placeholder)
      if (img.src && !img.src.includes('data:image')) {
        img.addEventListener('click', () => {
          lightboxImg.src = img.src;
          lightboxImg.alt = img.alt || 'Indicator preview';
          lightbox.classList.add('active');
          document.body.style.overflow = 'hidden';
        });
      }
    });

    // Close lightbox on click outside, close button, or ESC key
    closeBtn.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && lightbox.classList.contains('active')) {
        closeLightbox();
      }
    });

    function closeLightbox() {
      lightbox.classList.remove('active');
      document.body.style.overflow = '';
    }
  }
})();
</script>

<script>
  // Typewriter animation for pricing subheading
  (function() {
    const words = ['世界中のトレーダー', '本格的な投資家', 'プロフェッショナル', 'あなたのようなトレーダー'];
    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    const typewriterElement = document.querySelector('.typewriter-pricing');

    if (!typewriterElement) return;

    function type() {
      const currentWord = words[wordIndex];

      if (isDeleting) {
        typewriterElement.textContent = currentWord.substring(0, charIndex - 1);
        charIndex--;
      } else {
        typewriterElement.textContent = currentWord.substring(0, charIndex + 1);
        charIndex++;
      }

      let typeSpeed = isDeleting ? 50 : 100;

      if (!isDeleting && charIndex === currentWord.length) {
        typeSpeed = 2000; // Pause at end
        isDeleting = true;
      } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        wordIndex = (wordIndex + 1) % words.length;
        typeSpeed = 500; // Pause before next word
      }

      setTimeout(type, typeSpeed);
    }

    type();
  })();

  // Typewriter animation for footer
  (function() {
    const words = ['トレーダー', '投資家', 'プロフェッショナル', 'あなた'];
    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    const typewriterElement = document.querySelector('.typewriter-footer');

    if (!typewriterElement) return;

    function type() {
      const currentWord = words[wordIndex];

      if (isDeleting) {
        typewriterElement.textContent = currentWord.substring(0, charIndex - 1);
        charIndex--;
      } else {
        typewriterElement.textContent = currentWord.substring(0, charIndex + 1);
        charIndex++;
      }

      let typeSpeed = isDeleting ? 50 : 100;

      if (!isDeleting && charIndex === currentWord.length) {
        typeSpeed = 2000; // Pause at end
        isDeleting = true;
      } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        wordIndex = (wordIndex + 1) % words.length;
        typeSpeed = 500; // Pause before next word
      }

      setTimeout(type, typeSpeed);
    }

    type();
  })();

  // Form field validation with success checkmarks
  (function() {
    const inputs = ['tv-monthly', 'tv-yearly', 'tv-lifetime'];

    inputs.forEach(id => {
      const input = document.getElementById(id);
      if (!input) return;

      input.addEventListener('input', function() {
        const value = this.value.trim();
        // Valid if at least 3 characters
        if (value.length >= 3) {
          this.classList.add('valid');
        } else {
          this.classList.remove('valid');
        }
      });

      // Also check on blur
      input.addEventListener('blur', function() {
        const value = this.value.trim();
        if (value.length >= 3) {
          this.classList.add('valid');
        }
      });
    });
  })();

  // Loading states for payment buttons
  (function() {
    const paymentButtons = [
      'btn-monthly-paypal',
      'btn-yearly-paypal',
      'btn-lifetime-paypal'
    ];

    paymentButtons.forEach(id => {
      const btn = document.getElementById(id);
      if (!btn) return;

      btn.addEventListener('click', function() {
        // Add loading state
        this.classList.add('btn-loading');
        const originalText = this.innerHTML;
        this.innerHTML = '⏳ 処理中...';

        // Remove loading state after 5 seconds (fallback)
        setTimeout(() => {
          this.classList.remove('btn-loading');
          this.innerHTML = originalText;
        }, 5000);
      });
    });
  })();

  // Animated number count-ups on scroll into view
  (function() {
    // Text numbers for word-based counting
    const textNumbers = ['Zero', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten'];

    // Quality progression sequences
    const qualityProgressions = {
      'elite': ['basic', 'good', 'great', 'premium', 'Elite'],
      'professional': ['beginner', 'intermediate', 'advanced', 'Professional'],
      'premium': ['standard', 'enhanced', 'superior', 'Premium']
    };

    function animateNumber(element, start, end, duration) {
      const range = end - start;
      const increment = range / (duration / 16); // 60fps
      let current = start;

      const timer = setInterval(() => {
        current += increment;
        if (current >= end) {
          element.textContent = end;
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(current);
        }
      }, 16);
    }

    // Intersection Observer to trigger animations
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !entry.target.classList.contains('animated')) {
          entry.target.classList.add('animated');
          const targetNumber = parseInt(entry.target.getAttribute('data-count'));
          const prefix = entry.target.getAttribute('data-prefix') || '';
          const suffix = entry.target.getAttribute('data-suffix') || '';
          const useTextMode = entry.target.hasAttribute('data-text-mode');
          const qualityType = entry.target.getAttribute('data-quality');

          // Quality progression animation
          if (qualityType && qualityProgressions[qualityType]) {
            const sequence = qualityProgressions[qualityType];
            let currentIndex = 0;

            const animateSequence = () => {
              if (currentIndex < sequence.length) {
                entry.target.textContent = sequence[currentIndex];

                // Faster progression through early stages, stop at final word
                const isLastItem = currentIndex === sequence.length - 1;
                const delay = isLastItem ? 0 : 180; // 180ms for each step, stop at last

                currentIndex++;
                if (!isLastItem) {
                  setTimeout(animateSequence, delay);
                }
              }
            };

            animateSequence();
            return;
          }

          // Skip animation for text mode - just show final value
          if (useTextMode) {
            const finalValue = targetNumber <= 10 ? textNumbers[targetNumber] : targetNumber;
            entry.target.textContent = prefix + finalValue + suffix;
            return;
          }

          // Animate with prefix/suffix support (only for non-text-mode)
          const tempContent = entry.target.textContent;
          const range = targetNumber;
          const increment = range / 90; // 1.5 seconds at 60fps
          let current = 0;

          const timer = setInterval(() => {
            current += increment;
            if (current >= targetNumber) {
              entry.target.textContent = prefix + targetNumber + suffix;
              clearInterval(timer);
            } else {
              const currentValue = Math.floor(current);
              entry.target.textContent = prefix + currentValue + suffix;
            }
          }, 16);
        }
      });
    }, { threshold: 0.3 });

    // Auto-detect and animate numbers on page load
    setTimeout(() => {
      // Find all text containing common numbers and wrap them
      const numbersToAnimate = [
        { text: '82', selector: 'contains "82"' },
        { text: '7', selector: 'contains " 7 "' },
        { text: '489', selector: 'contains "489"' },
        { text: '350', selector: 'contains "350"' },
        { text: '10', selector: 'contains " 10 "' },
        { text: '4', selector: 'contains " 4 "' }
      ];

      // Manually observe specific elements we know exist
      document.querySelectorAll('[data-count]').forEach(el => {
        observer.observe(el);
      });

      // Observe quality progression elements
      document.querySelectorAll('[data-quality]').forEach(el => {
        observer.observe(el);
      });
    }, 100);
  })();
</script>

<!-- Back to Top Button -->
<button id="backToTop" aria-label="トップに戻る" title="トップに戻る">↑</button>

<script>
  // Back to top button functionality
  (function() {
    const backToTopBtn = document.getElementById('backToTop');

    // Force sticky positioning with inline styles
    backToTopBtn.style.position = 'fixed';
    backToTopBtn.style.bottom = '160px';
    backToTopBtn.style.right = '20px';
    backToTopBtn.style.zIndex = '998';

    // Show button when user scrolls down 400px
    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 400) {
        backToTopBtn.classList.add('show');
      } else {
        backToTopBtn.classList.remove('show');
      }
    });

    // Scroll to top when clicked
    backToTopBtn.addEventListener('click', function() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  })();
</script>

<!-- Scroll Reveal Animations - Premium scroll-into-view effects -->
<script src="/assets/scroll-reveal.js" defer></script>

</body>

</html>
