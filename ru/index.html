<!doctype html>
<html lang="ru" dir="ltr" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Prevent aggressive caching on mobile browsers -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <title>Signal Pilot — Неперерисовывающиеся индикаторы TradingView</title>

  <meta name="description" content="Профессиональное определение циклов для TradingView. Pentarch™ отображает полные рыночные циклы (TD→IGN→WRN→CAP→BDN). Без перерисовки, проверено. Гарантия возврата денег 7 дней.">

  <!-- Enhanced SEO -->
  <meta name="keywords" content="TradingView indicators, non-repainting indicators, Pentarch, market cycle indicators, TD Sequential, trading signals, stock indicators">
  <meta name="author" content="Signal Pilot Labs">
  <link rel="author" href="https://www.signalpilot.io">

  <!-- Geo targeting -->
  <meta name="geo.region" content="US">
  <meta name="geo.placename" content="United States">

  <!-- Ratings/Reviews -->
  <meta name="rating" content="general">
  <meta name="revisit-after" content="7 days">

  <link rel="canonical" href="https://www.signalpilot.io/ru/">

  <!-- Hreflang tags for language versions -->
  <link rel="alternate" hreflang="en" href="https://www.signalpilot.io/">
  <link rel="alternate" hreflang="ar" href="https://www.signalpilot.io/ar/">
  <link rel="alternate" hreflang="de" href="https://www.signalpilot.io/de/">
  <link rel="alternate" hreflang="es" href="https://www.signalpilot.io/es/">
  <link rel="alternate" hreflang="fr" href="https://www.signalpilot.io/fr/">
  <link rel="alternate" hreflang="hu" href="https://www.signalpilot.io/hu/">
  <link rel="alternate" hreflang="it" href="https://www.signalpilot.io/it/">
  <link rel="alternate" hreflang="ja" href="https://www.signalpilot.io/ja/">
  <link rel="alternate" hreflang="nl" href="https://www.signalpilot.io/nl/">
  <link rel="alternate" hreflang="pt-BR" href="https://www.signalpilot.io/pt/">
  <link rel="alternate" hreflang="ru" href="https://www.signalpilot.io/ru/">
  <link rel="alternate" hreflang="tr" href="https://www.signalpilot.io/tr/">
  <link rel="alternate" hreflang="x-default" href="https://www.signalpilot.io/">

  <meta name="robots" content="index,follow">

  <meta name="theme-color" content="#05070d">

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- iOS PWA Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Signal Pilot">



  <!-- Favicons -->

  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <link rel="icon" type="image/png" sizes="16x16" href="/monogram-square-favicon_16x16.png">

  <link rel="icon" type="image/png" sizes="32x32" href="/monogram-square-favicon_32x32.png">

  <link rel="apple-touch-icon" sizes="180x180" href="/monogram-square-favicon_180x180.png">

  <link rel="icon" type="image/png" sizes="192x192" href="/monogram-square-favicon_192x192.png">

  <link rel="icon" type="image/png" sizes="512x512" href="/monogram-square-favicon_512x512.png">



  <!-- OpenGraph / Twitter -->

  <meta property="og:site_name" content="Signal Pilot">

  <meta property="og:type" content="website">

  <meta property="og:title" content="Signal Pilot — Неперерисовывающиеся индикаторы TradingView">

  <meta property="og:description" content="Профессиональное определение циклов для TradingView. Pentarch™ отображает полные рыночные циклы. Без перерисовки, проверено. Гарантия возврата денег 7 дней.">

  <meta property="og:url" content="https://www.signalpilot.io/ru/">

  <meta property="og:image" content="https://www.signalpilot.io/preview.png?v=1731035400">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Signal Pilot - Индикаторы институционального уровня | Проверено без перерисовки • Все рынки • Возврат денег в течение 7 дней">

  <meta property="og:locale" content="ru_RU">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@signalpilot">
  <meta name="twitter:creator" content="@signalpilot">
  <meta name="twitter:title" content="Signal Pilot — Неперерисовывающиеся индикаторы TradingView">
  <meta name="twitter:description" content="Профессиональное определение циклов для TradingView. Pentarch™ отображает полные рыночные циклы. Без перерисовки, проверено.">
  <meta name="twitter:image" content="https://www.signalpilot.io/preview.png?v=1731035400">
  <meta name="twitter:image:alt" content="Signal Pilot - Индикаторы институционального уровня | Проверено без перерисовки • Все рынки • Возврат денег в течение 7 дней">



  <!-- =======================================================================
       STRUCTURED DATA - Product Schema Markup for Rich Snippets
       ======================================================================= -->

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Product",
        "@id": "https://www.signalpilot.io/#monthly-plan",
        "name": "Signal Pilot Elite Seven - Ежемесячная подписка",
        "description": "Профессиональные индикаторы TradingView с определением циклов Pentarch™. Все 7 элитных индикаторов плюс будущие обновления. 100% без перерисовки, проверено. Работает на акциях, криптовалютах, форексе, индексах и товарах.",
        "brand": {
          "@type": "Brand",
          "name": "Signal Pilot Labs"
        },
        "category": "Software > Finance > Trading Tools",
        "image": "https://www.signalpilot.io/preview.png",
        "url": "https://www.signalpilot.io/#pricing",
        "offers": {
          "@type": "Offer",
          "price": "99.00",
          "priceCurrency": "USD",
          "priceValidUntil": "2026-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.signalpilot.io/#pricing",
          "priceSpecification": {
            "@type": "UnitPriceSpecification",
            "price": "99.00",
            "priceCurrency": "USD",
            "billingDuration": "P1M",
            "billingIncrement": "1"
          },
          "seller": {
            "@type": "Organization",
            "name": "Signal Pilot Labs"
          },
          "hasMerchantReturnPolicy": {
            "@type": "MerchantReturnPolicy",
            "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
            "merchantReturnDays": 7,
            "returnMethod": "https://schema.org/ReturnByMail",
            "returnFees": "https://schema.org/FreeReturn"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "bestRating": "5",
          "worstRating": "1",
          "ratingCount": "127"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "Без перерисовки",
            "value": "100% проверено"
          },
          {
            "@type": "PropertyValue",
            "name": "Включено индикаторов",
            "value": "7"
          },
          {
            "@type": "PropertyValue",
            "name": "Поддерживаемые рынки",
            "value": "Акции, Криптовалюты, Форекс, Индексы, Товары"
          },
          {
            "@type": "PropertyValue",
            "name": "Время ответа поддержки",
            "value": "48 часов"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "https://www.signalpilot.io/#yearly-plan",
        "name": "Signal Pilot Elite Seven - Годовая подписка (Лучшая цена)",
        "description": "Профессиональные индикаторы TradingView с определением циклов Pentarch™. Экономия $489/год. Все 7 элитных индикаторов плюс будущие обновления. 100% без перерисовки, проверено. Приоритетная поддержка и продвинутое обучение включены.",
        "brand": {
          "@type": "Brand",
          "name": "Signal Pilot Labs"
        },
        "category": "Software > Finance > Trading Tools",
        "image": "https://www.signalpilot.io/preview.png",
        "url": "https://www.signalpilot.io/#pricing",
        "offers": {
          "@type": "Offer",
          "price": "699.00",
          "priceCurrency": "USD",
          "priceValidUntil": "2026-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.signalpilot.io/#pricing",
          "priceSpecification": {
            "@type": "UnitPriceSpecification",
            "price": "699.00",
            "priceCurrency": "USD",
            "billingDuration": "P1Y",
            "billingIncrement": "1"
          },
          "seller": {
            "@type": "Organization",
            "name": "Signal Pilot Labs"
          },
          "hasMerchantReturnPolicy": {
            "@type": "MerchantReturnPolicy",
            "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
            "merchantReturnDays": 7,
            "returnMethod": "https://schema.org/ReturnByMail",
            "returnFees": "https://schema.org/FreeReturn"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "bestRating": "5",
          "worstRating": "1",
          "ratingCount": "203"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "Без перерисовки",
            "value": "100% проверено"
          },
          {
            "@type": "PropertyValue",
            "name": "Включено индикаторов",
            "value": "7"
          },
          {
            "@type": "PropertyValue",
            "name": "Поддерживаемые рынки",
            "value": "Акции, Криптовалюты, Форекс, Индексы, Товары"
          },
          {
            "@type": "PropertyValue",
            "name": "Время ответа поддержки",
            "value": "24 часа"
          },
          {
            "@type": "PropertyValue",
            "name": "Годовая экономия",
            "value": "$489"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "https://www.signalpilot.io/#lifetime-plan",
        "name": "Signal Pilot Elite Seven - Пожизненный доступ (Ограничено 100 основателей)",
        "description": "Профессиональные индикаторы TradingView с пожизненным доступом. Определение циклов Pentarch™. Все 7 элитных индикаторов плюс все будущие версии навсегда. 100% без перерисовки, проверено. Частное сообщество Discord, 200+ предустановок, бета-доступ, приоритетная поддержка.",
        "brand": {
          "@type": "Brand",
          "name": "Signal Pilot Labs"
        },
        "category": "Software > Finance > Trading Tools",
        "image": "https://www.signalpilot.io/preview.png",
        "url": "https://www.signalpilot.io/#pricing",
        "offers": {
          "@type": "Offer",
          "price": "1799.00",
          "priceCurrency": "USD",
          "priceValidUntil": "2026-12-31",
          "availability": "https://schema.org/LimitedAvailability",
          "url": "https://www.signalpilot.io/#pricing",
          "eligibleQuantity": {
            "@type": "QuantitativeValue",
            "value": "350",
            "unitText": "Всего доступных мест"
          },
          "seller": {
            "@type": "Organization",
            "name": "Signal Pilot Labs"
          },
          "hasMerchantReturnPolicy": {
            "@type": "MerchantReturnPolicy",
            "returnPolicyCategory": "https://schema.org/MerchantReturnFiniteReturnWindow",
            "merchantReturnDays": 7,
            "returnMethod": "https://schema.org/ReturnByMail",
            "returnFees": "https://schema.org/FreeReturn"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "5.0",
          "bestRating": "5",
          "worstRating": "1",
          "ratingCount": "89"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "Без перерисовки",
            "value": "100% проверено"
          },
          {
            "@type": "PropertyValue",
            "name": "Включено индикаторов",
            "value": "7"
          },
          {
            "@type": "PropertyValue",
            "name": "Поддерживаемые рынки",
            "value": "Акции, Криптовалюты, Форекс, Индексы, Товары"
          },
          {
            "@type": "PropertyValue",
            "name": "Тип доступа",
            "value": "Пожизненный"
          },
          {
            "@type": "PropertyValue",
            "name": "Частный Discord",
            "value": "Да"
          },
          {
            "@type": "PropertyValue",
            "name": "Предустановки",
            "value": "200+"
          }
        ]
      },
      {
        "@type": "Organization",
        "@id": "https://www.signalpilot.io/#organization",
        "name": "Signal Pilot Labs",
        "url": "https://www.signalpilot.io",
        "logo": "https://www.signalpilot.io/preview.png",
        "description": "Поставщик профессиональных неперерисовывающихся индикаторов TradingView для серьезных трейдеров.",
        "sameAs": [
          "https://twitter.com/signalpilot"
        ]
      },
      {
        "@type": "WebSite",
        "@id": "https://www.signalpilot.io/#website",
        "url": "https://www.signalpilot.io",
        "name": "Signal Pilot — Неперерисовывающиеся индикаторы TradingView",
        "description": "Профессиональное определение циклов для TradingView. Pentarch™ отображает полные рыночные циклы. Без перерисовки, проверено. Гарантия возврата денег 7 дней.",
        "publisher": {
          "@id": "https://www.signalpilot.io/#organization"
        }
      },
      {
        "@type": "SoftwareApplication",
        "@id": "https://www.signalpilot.io/#software",
        "name": "Signal Pilot Elite Seven",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web, TradingView Platform",
        "offers": [
          { "@id": "https://www.signalpilot.io/#monthly-plan" },
          { "@id": "https://www.signalpilot.io/#yearly-plan" },
          { "@id": "https://www.signalpilot.io/#lifetime-plan" }
        ],
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "bestRating": "5",
          "worstRating": "1",
          "ratingCount": "419"
        },
        "featureList": [
          "Pentarch™ 5-фазное определение циклов (TD→IGN→WRN→CAP→BDN)",
          "OmniDeck универсальный оверлей (10+ систем объединены)",
          "Volume Oracle детектор институционального потока",
          "Plutus Flow кумулятивная дельта-лента",
          "Janus Atlas мульти-таймфрейм уровни",
          "Augury Grid список наблюдения 8 тикеров",
          "Harmonic Oscillator 4-системный тайминг",
          "100% без перерисовки (проверено)",
          "Уведомления в реальном времени",
          "Шаблоны для бэктестинга",
          "Все рынки: акции, криптовалюты, форекс, индексы, товары"
        ]
      }
    ]
  }
  </script>



  <!-- Analytics -->

  <link rel="preconnect" href="https://plausible.io">
  <link rel="dns-prefetch" href="https://plausible.io">

  <!-- Preconnect to analytics and tracking services -->
  <link rel="preconnect" href="https://www.clarity.ms">
  <link rel="preconnect" href="https://www.googletagmanager.com">

  <!-- Preconnect to subdomain resources -->
  <link rel="dns-prefetch" href="https://docs.signalpilot.io">
  <link rel="dns-prefetch" href="https://education.signalpilot.io">

  <script defer data-domain="signalpilot.io" src="https://plausible.io/js/script.js"></script>

  <!-- Microsoft Clarity & GA4 loaded via consent manager -->
  <!-- See: assets/cookie-consent.js -->

  <!-- Fonts: Space Grotesk (body/UI) + EB Garamond (headlines) + Gugi (brand) -->

  <!-- Preconnect to font providers for faster loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Load fonts with display=swap for better performance -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Gugi&family=EB+Garamond:wght@400;500;600&display=swap" rel="stylesheet">



  <!-- =======================================================================
       DESIGN TOKENS + LAYOUT
       ======================================================================= -->

  <style>


    :root{

      color-scheme: dark;

      /* Smooth theme transitions */
      transition:background-color 0.3s ease, color 0.3s ease;

      /* Base surface */

      --bg:#05070d;

      --bg-soft:#0c111c;

      --bg-elev:#101626;



      /* Typography */

      --text:#ecf1ff;

      --muted:#b7c2d9;

      --muted-2:#8ea0bf;



      /* Brand */

      --brand:#5b8aff;

      --brand-2:#7b9bff;

      --accent:#76ddff;



      /* Signals */

      --good:#3ed598;

      --warn:#f9a23c;



      /* UI */

      --radius:16px;

      --shadow:0 18px 60px rgba(12,16,27,.35);

      --max:1160px;

      --measure:68ch;



      /* Pretty gradient for headings */

      --grad:linear-gradient(90deg,#9cc0ff 0%,#86a8ff 35%,#7ccaff 60%,#8ca5ff 85%,#b9d4ff 100%);



      /* Grid lines overlay (subtle) */

      --grid-line:rgba(255,255,255,.08);

      /* Border (was missing in dark mode) */

      --border:rgba(255,255,255,.12);

    }



    html[data-theme="light"]{

      color-scheme: light;

      --bg:#ffffff;

      --bg-soft:#f8fafc;

      --bg-elev:#f1f5f9;

      --text:#0f172a;

      --muted:#475569;

      --muted-2:#334155;

      --brand:#3b82f6;

      --brand-2:#2563eb;

      --accent:#0ea5e9;

      --good:#10b981;

      --warn:#f97316;

      --border:rgba(30,41,59,.2);

      --grid-line:rgba(30,41,59,.06);

      /* Dark gradient for headings in light mode */
      --grad:linear-gradient(90deg,#1e40af 0%,#3b82f6 35%,#0ea5e9 60%,#2563eb 85%,#1e3a8a 100%);

    }

    /* LIGHT MODE: Fix ALL white/light text to be readable on white background */

    /* Base elements */
    html[data-theme="light"] body,
    html[data-theme="light"] p,
    html[data-theme="light"] span,
    html[data-theme="light"] div,
    html[data-theme="light"] li{
      color:#0f172a;
    }

    html[data-theme="light"] h1,
    html[data-theme="light"] h2,
    html[data-theme="light"] h3,
    html[data-theme="light"] h4,
    html[data-theme="light"] h5,
    html[data-theme="light"] h6{
      color:#0f172a !important;
    }

    html[data-theme="light"] .brand{
      color:#0f172a !important;
    }

    html[data-theme="light"] .punch{
      color:#0f172a !important;
    }

    /* Fix all white color variations */
    html[data-theme="light"] [style*="color:#fff"],
    html[data-theme="light"] [style*="color: #fff"],
    html[data-theme="light"] [style*="color:white"],
    html[data-theme="light"] [style*="color: white"],
    html[data-theme="light"] [style*="color:#ffffff"],
    html[data-theme="light"] [style*="color: #ffffff"],
    html[data-theme="light"] [style*="color:rgba(255,255,255"],
    html[data-theme="light"] [style*="color: rgba(255,255,255"]{
      color:#0f172a !important;
    }

    /* Fix all light hex colors that won't show on white */
    html[data-theme="light"] [style*="color:#ecf"],
    html[data-theme="light"] [style*="color:#e5e"],
    html[data-theme="light"] [style*="color:#b7c"],
    html[data-theme="light"] [style*="color:#8ea"]{
      color:#0f172a !important;
    }

    html[data-theme="light"] strong[style*="color:#fff"],
    html[data-theme="light"] strong[style*="color: #fff"],
    html[data-theme="light"] strong[style*="color:rgba(255,255,255"]{
      color:#0f172a !important;
    }

    /* Preserve white text on colored buttons */
    html[data-theme="light"] .btn-primary,
    html[data-theme="light"] .btn-primary *{
      color:#ffffff !important;
    }

    html[data-theme="light"] .mobile-nav-title,
    html[data-theme="light"] .mobile-nav-close{
      color:#0f172a !important;
    }

    html[data-theme="light"] .icon-wrap svg{
      color:#0f172a !important;
    }

    /* Aggressive catch-all for any remaining light text */
    html[data-theme="light"] nav a{
      color:#475569 !important;
    }

    html[data-theme="light"] nav a:hover,
    html[data-theme="light"] nav a:focus-visible{
      color:#0f172a !important;
    }

    /* Force all text to be dark in light mode (with exceptions) */
    html[data-theme="light"] *:not(.btn-primary):not(.btn-primary *):not(strong[style*="#3ed598"]):not(strong[style*="#76ddff"]):not(strong[style*="#f9a23c"]):not(strong[style*="#ff6b9d"]){
      color:inherit;
    }

    html[data-theme="light"]{
      color:#0f172a;
    }

    /* AGGRESSIVE FIX: All muted/grey text colors */
    html[data-theme="light"] [style*="color:var(--muted)"],
    html[data-theme="light"] [style*="color: var(--muted)"],
    html[data-theme="light"] [style*="color:var(--muted-2)"],
    html[data-theme="light"] [style*="color: var(--muted-2)"],
    html[data-theme="light"] .note,
    html[data-theme="light"] p[style*="color:var(--muted)"],
    html[data-theme="light"] span[style*="color:var(--muted)"],
    html[data-theme="light"] div[style*="color:var(--muted)"] {
      color:#475569 !important;
    }

    /* Fix all var(--text) to ensure they're dark */
    html[data-theme="light"] [style*="color:var(--text)"],
    html[data-theme="light"] [style*="color: var(--text)"] {
      color:#0f172a !important;
    }

    /* Fix specific light color hex codes */
    html[data-theme="light"] [style*="color:#b7c2d9"],
    html[data-theme="light"] [style*="color:#8ea0bf"],
    html[data-theme="light"] [style*="color:#ecf1ff"] {
      color:#475569 !important;
    }

    /* FIX GRADIENT TEXT FOR LIGHT MODE - Critical for readability */
    html[data-theme="light"] .headline {
      background: linear-gradient(135deg, #1e40af, #7c3aed) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix all green gradient text (success/guarantee messages) */
    html[data-theme="light"] strong[style*="linear-gradient(135deg,#3ed598"],
    html[data-theme="light"] span[style*="linear-gradient(135deg,#3ed598"] {
      background: linear-gradient(135deg, #059669, #047857) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix all orange gradient text (pricing/CTA) */
    html[data-theme="light"] strong[style*="linear-gradient(135deg,#f9a23c"],
    html[data-theme="light"] span[style*="linear-gradient(135deg,#f9a23c"] {
      background: linear-gradient(135deg, #c2410c, #ea580c) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix brand gradient text (Signal Pilot logo/branding) */
    html[data-theme="light"] span[style*="linear-gradient(135deg,#5b8aff"] {
      background: linear-gradient(135deg, #1e40af, #6b21a8) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* ==================== LIGHT MODE GORGEOUS EFFECTS ==================== */

    /* Keyframe animations for light mode backgrounds */
    @keyframes orbFloat {
      0%, 100% {
        background:
          radial-gradient(circle 900px at 20% 30%, rgba(59, 130, 246, 0.22), transparent 60%),
          radial-gradient(circle 700px at 80% 70%, rgba(168, 85, 247, 0.18), transparent 60%),
          radial-gradient(circle 800px at 50% 50%, rgba(14, 165, 233, 0.15), transparent 60%),
          #ffffff;
      }
      50% {
        background:
          radial-gradient(circle 900px at 30% 40%, rgba(59, 130, 246, 0.27), transparent 60%),
          radial-gradient(circle 700px at 70% 60%, rgba(168, 85, 247, 0.23), transparent 60%),
          radial-gradient(circle 800px at 60% 40%, rgba(14, 165, 233, 0.20), transparent 60%),
          #ffffff;
      }
    }

    @keyframes particleFloat {
      0% { transform: translateY(0) translateX(0); }
      50% { transform: translateY(-20px) translateX(10px); }
      100% { transform: translateY(0) translateX(0); }
    }

    /* Subtle grid overlay for light mode */
    html[data-theme="light"]::before {
      content: '';
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      background-image:
        linear-gradient(rgba(59, 130, 246, 0.09) 1px, transparent 1px),
        linear-gradient(90deg, rgba(59, 130, 246, 0.09) 1px, transparent 1px);
      background-size: 50px 50px;
      opacity: 0.9;
    }

    /* Enhanced cards in light mode */
    html[data-theme="light"] .card {
      box-shadow: 0 4px 20px rgba(59, 130, 246, 0.08) !important;
      border: 1px solid rgba(59, 130, 246, 0.12) !important;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.6)) !important;
      backdrop-filter: blur(10px);
    }

    html[data-theme="light"] .card:hover {
      box-shadow: 0 12px 40px rgba(59, 130, 246, 0.15) !important;
      border-color: rgba(59, 130, 246, 0.3) !important;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.8)) !important;
    }



    *{box-sizing:border-box}

    body{
      top:0 !important;
      position:relative !important;
      overflow-x:hidden;
      position:relative;
      /* Smooth theme transitions */
      transition:background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Smooth transitions for all theme-dependent elements */
    header,
    .card,
    .btn,
    nav a{
      transition:all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Scroll progress indicator */
    .scroll-progress{
      position:fixed;
      top:0;
      left:0;
      width:0%;
      height:3px;
      background:linear-gradient(90deg,var(--brand),var(--accent));
      z-index:10000;
      transition:width 0.1s ease-out;
    }

    /* MOBILE: Simple, clean mobile setup - NO forced positioning */
    @media (max-width: 768px) {
      /* Background layers BEHIND everything */
      .bg-stars {
        z-index: -3 !important;
        position: fixed !important;
      }
      .sp-constellations {
        z-index: 1 !important;
        position: fixed !important;
      }

      /* Header needs high z-index for dropdown menus */
      header {
        position: relative;
        z-index: 100;
        overflow-x: hidden !important;
        max-width: 100vw !important;
      }

      /* Prevent header content from overflowing on mobile */
      header .container.nav {
        max-width: 100vw !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }

      /* Ensure header buttons adapt to smaller text when necessary */
      header .btn,
      header #themeToggle {
        font-size: .8rem !important;
        padding: .4rem .6rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        flex-shrink: 1 !important;
      }

      /* CTA button - ensure it doesn't overflow */
      header .cta-header {
        max-width: 140px !important;
        font-size: .75rem !important;
        padding: .5rem .7rem !important;
        text-overflow: ellipsis !important;
        overflow: hidden !important;
      }

      /* Reduce animations for performance - but don't kill them entirely */
      *, *::before, *::after {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
      }

      /* Ensure modals can still animate */
      #cookie-preferences-modal,
      .sp-chatbot-window,
      .mobile-nav,
      [id*="modal"] {
        animation-duration: 0.3s !important;
        transition-duration: 0.3s !important;
      }
    }

    img, video, iframe{
      max-width:100%;
      height:auto;
    }

    /* Prevent long words/URLs from breaking layout */
    p, li, td, th, div{
      word-wrap:break-word;
      overflow-wrap:break-word;
      word-break:break-word;
    }

    /* Don't break words in headings unless necessary */
    h1, h2, h3, h4, h5, h6{
      word-wrap:break-word;
      overflow-wrap:break-word;
    }
    
    /* Ensure main content is above background layers */
    main{
      position:relative;
      min-height:100vh;
      z-index:1;
      background:transparent !important; /* Let constellations show through! */
    }

    /* Make all sections transparent so constellations are visible throughout entire site */
    section, .section {
      background:transparent !important;
    }

    /* Override any inline background styles on sections */
    section[style*="background"] {
      background:transparent !important;
    }
    
    /* Prevent any overflow issues on mobile */

    @media (max-width:768px){
      body, main{
        overflow-x:hidden !important;
      }
      
      main{
        width:100%;
        display:block;
      background:transparent !important; /* Let particles show through on mobile! */
      }

      /* Force all sections transparent on mobile so particles show through */
      section, .section {
        background:transparent !important;
      }
    }
    
    /* Removed reveal animations - not needed */



    html,body{

      margin:0;

      color:var(--text);

      font-family:"Space Grotesk", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;

      font-size:clamp(16px,0.9vw + 12px,18px);

      line-height:1.7;

      letter-spacing:.005em;

      -webkit-text-size-adjust:100%;

      overflow-x:hidden;

      background:transparent; /* Let particles/aurora/bg-stars show through! */

      isolation:isolate;

      /* Smooth scrolling */
      scroll-behavior:smooth;

      /* Better touch scrolling on iOS */
      -webkit-overflow-scrolling:touch;

      /* Performance optimizations */
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      text-rendering:optimizeLegibility;

    }



    /* Background: gradient + lattice under everything */

    body::before{

      content:"";

      position:fixed;

      inset:0;

      z-index:-4;

      pointer-events:none;

      background:

        radial-gradient(1200px 700px at -6% -8%, rgba(130,185,255,.18), transparent 60%),

        radial-gradient(1100px 660px at 108% -10%, rgba(155,140,255,.18), transparent 62%),

        radial-gradient(1200px 700px at 52% 118%, rgba(118,221,255,.12), transparent 64%),

        var(--bg);

    }



    html[data-theme="light"] body::before{

      background:

        radial-gradient(circle 900px at 20% 30%, rgba(59, 130, 246, 0.22), transparent 60%),

        radial-gradient(circle 700px at 80% 70%, rgba(168, 85, 247, 0.18), transparent 60%),

        radial-gradient(circle 800px at 50% 50%, rgba(14, 165, 233, 0.15), transparent 60%),

        #ffffff;

      animation: orbFloat 20s ease-in-out infinite;

    }



    body::after{

      content:"";

      position:fixed;

      inset:0;

      z-index:-3;

      pointer-events:none;

      opacity:.18;

      background-image:

        linear-gradient(transparent 31px, var(--grid-line) 32px, transparent 33px),

        linear-gradient(90deg, transparent 31px, var(--grid-line) 32px, transparent 33px);

      background-size:64px 64px;

    }

    html[data-theme="light"] body::after{
      opacity:.38;
      background-image:
        radial-gradient(2px 2px at 15% 25%, #3b82f6, transparent 50%),
        radial-gradient(3px 3px at 85% 15%, #a855f7, transparent 50%),
        radial-gradient(2px 2px at 45% 75%, #0ea5e9, transparent 50%),
        radial-gradient(3px 3px at 70% 85%, #8b5cf6, transparent 50%),
        radial-gradient(2px 2px at 25% 60%, #3b82f6, transparent 50%),
        radial-gradient(2px 2px at 90% 50%, #06b6d4, transparent 50%),
        linear-gradient(transparent 31px, rgba(59, 130, 246, 0.12) 32px, transparent 33px),
        linear-gradient(90deg, transparent 31px, rgba(59, 130, 246, 0.12) 32px, transparent 33px);
      background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 64px 64px, 64px 64px;
      animation: particleFloat 30s linear infinite;
    }



    /* bg-aurora CSS REMOVED - element disabled, using video background instead */



    @keyframes aurora{

      from{transform:translate3d(-2%,-1%,0) scale(1.02)}

      to{transform:translate3d(2%,1%,0) scale(1.05)}

    }

    @keyframes pricingGlow{
      0%,100%{box-shadow:0 0 40px rgba(91,138,255,.2),0 0 80px rgba(91,138,255,.1);transform:scale(1.05)}
      50%{box-shadow:0 0 60px rgba(91,138,255,.4),0 0 120px rgba(91,138,255,.2);transform:scale(1.05)}
    }

    @keyframes badgePulse{
      0%,100%{transform:translateX(-50%) scale(1);box-shadow:0 4px 16px rgba(249,162,60,.5)}
      50%{transform:translateX(-50%) scale(1.05);box-shadow:0 6px 24px rgba(249,162,60,.7)}
    }

    @keyframes floatOrb1{
      0%,100%{transform:translate(0,0) scale(1)}
      33%{transform:translate(30px,-30px) scale(1.1)}
      66%{transform:translate(-20px,20px) scale(0.9)}
    }

    @keyframes floatOrb2{
      0%,100%{transform:translate(0,0) scale(1)}
      50%{transform:translate(-40px,-20px) scale(1.15)}
    }

    @keyframes blink{
      0%,49%{opacity:1}
      50%,100%{opacity:0}
    }

    /* Micro-interactions: Loading spinner */
    @keyframes spin{
      to{transform:rotate(360deg)}
    }

    .spinner{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,0.3);border-top-color:var(--brand);border-radius:50%;animation:spin 0.8s linear infinite}

    /* Micro-interactions: Success checkmark pop */
    @keyframes checkPop{
      0%{transform:scale(0);opacity:0}
      50%{transform:scale(1.2)}
      100%{transform:scale(1);opacity:1}
    }

    .success-check{animation:checkPop 0.4s cubic-bezier(0.4, 0, 0.2, 1)}

    /* Tablet optimizations */
    @media (max-width:1024px){
      /* Reduce parallax intensity on tablets */
      #parallax-orb-1,#parallax-orb-2{opacity:0.7}
    }

    @media (max-width:768px){
      /* Prevent horizontal overflow on mobile */
      body,html{overflow-x:hidden !important;max-width:100vw}

      /* Product cards - optimize button layout for tablets */
      .card.product .btn-sm {
        font-size: .9rem;
        padding: .55rem .8rem;
        min-height: 42px;
      }

      /* Navigation menu - ensure proper alignment on tablets */
      nav ul {
        gap: .7rem !important;
      }

      nav li {
        display: flex;
        align-items: center;
      }

      /* Allow hero text to wrap on mobile */
      #hero-description{white-space:normal !important;font-size:1rem !important;padding:0 1rem;max-width:100%;overflow-wrap:break-word;word-break:break-word}

      /* Reduce typing text on mobile */
      #typed-text{font-size:0.95rem !important}

      /* Smaller progress bar on mobile */
      .scroll-progress{height:2px}

      /* Optimize button press for touch */
      .btn:active{transform:translateY(2px) scale(0.99)}

      /* Disable orb animations on mobile for battery */
      #parallax-orb-1,#parallax-orb-2{animation:none !important}

      /* Ensure typing text doesn't overflow */
      .hero p{word-wrap:break-word;overflow-wrap:break-word}

      /* Reduce hero heading size on mobile */
      .headline.xl{font-size:2rem !important}

      /* Better spacing for gradient orbs on mobile */
      #parallax-orb-1{width:350px;height:350px;filter:blur(50px) !important}
      #parallax-orb-2{width:300px;height:300px;filter:blur(40px) !important}
    }

    /* Desktop optimizations - ensure video shows 100% */
    @media (min-width:1025px){
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:cover !important;
        object-position:center !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }
    }

    @media (max-width:480px){
      /* Extra small screens - smaller text */
      #hero-description{font-size:0.85rem !important;padding:0 0.5rem;line-height:1.5 !important}

      /* Extra small screens - thinner progress bar */
      .scroll-progress{height:1.5px}
    }



    @media (prefers-reduced-motion: reduce){


      #typing-cursor{animation:none;opacity:1}

      /* Disable all animations for users who prefer reduced motion */
      .success-check,.spinner{animation:none !important}

      .btn:active{transform:none !important}

      #parallax-orb-1,#parallax-orb-2{animation:none !important}

    }

    /* Performance: Disable heavy effects on low-end devices */
    @media (prefers-reduced-data: reduce){
      /* Aurora, stars, and particles are all beautiful and lightweight - show them on mobile! */
      /* Only hide truly heavy effects like parallax orbs */

      #parallax-orb-1,#parallax-orb-2{display:none !important}
    }

    /* bg-aurora capability rules REMOVED - using video background instead */

    @media (max-width: 1024px) {
      /* Disable harsh blinking cursor on mobile */
      #typing-cursor {
        animation: none !important;
        opacity: 1 !important;
      }

      /* Constellations should stay in background (default z-index:-2) - removed forced z-index:1 */
      .sp-constellations, #constellations {
        position: fixed !important;
        pointer-events: none !important;
      }

      /* Header must be above background for navigation */
      header {
        position: relative !important;
        z-index: 100 !important;
      }
    }

    /* LIGHT MODE: Fix ALL white/light text to be readable on white background */

    /* Base elements */
    html[data-theme="light"] body,
    html[data-theme="light"] p,
    html[data-theme="light"] span,
    html[data-theme="light"] div,
    html[data-theme="light"] li{
      color:#0f172a;
    }

    html[data-theme="light"] h1,
    html[data-theme="light"] h2,
    html[data-theme="light"] h3,
    html[data-theme="light"] h4,
    html[data-theme="light"] h5,
    html[data-theme="light"] h6{
      color:#0f172a !important;
    }

    html[data-theme="light"] .brand{
      color:#0f172a !important;
    }

    html[data-theme="light"] .punch{
      color:#0f172a !important;
    }

    /* Fix all white color variations */
    html[data-theme="light"] [style*="color:#fff"],
    html[data-theme="light"] [style*="color: #fff"],
    html[data-theme="light"] [style*="color:white"],
    html[data-theme="light"] [style*="color: white"],
    html[data-theme="light"] [style*="color:#ffffff"],
    html[data-theme="light"] [style*="color: #ffffff"],
    html[data-theme="light"] [style*="color:rgba(255,255,255"],
    html[data-theme="light"] [style*="color: rgba(255,255,255"]{
      color:#0f172a !important;
    }

    /* Fix all light hex colors that won't show on white */
    html[data-theme="light"] [style*="color:#ecf"],
    html[data-theme="light"] [style*="color:#e5e"],
    html[data-theme="light"] [style*="color:#b7c"],
    html[data-theme="light"] [style*="color:#8ea"]{
      color:#0f172a !important;
    }

    html[data-theme="light"] strong[style*="color:#fff"],
    html[data-theme="light"] strong[style*="color: #fff"],
    html[data-theme="light"] strong[style*="color:rgba(255,255,255"]{
      color:#0f172a !important;
    }

    /* Preserve white text on colored buttons */
    html[data-theme="light"] .btn-primary,
    html[data-theme="light"] .btn-primary *{
      color:#ffffff !important;
    }

    html[data-theme="light"] .mobile-nav-title,
    html[data-theme="light"] .mobile-nav-close{
      color:#0f172a !important;
    }

    html[data-theme="light"] .icon-wrap svg{
      color:#0f172a !important;
    }

    /* Aggressive catch-all for any remaining light text */
    html[data-theme="light"] nav a{
      color:#475569 !important;
    }

    html[data-theme="light"] nav a:hover,
    html[data-theme="light"] nav a:focus-visible{
      color:#0f172a !important;
    }

    /* Force all text to be dark in light mode (with exceptions) */
    html[data-theme="light"] *:not(.btn-primary):not(.btn-primary *):not(strong[style*="#3ed598"]):not(strong[style*="#76ddff"]):not(strong[style*="#f9a23c"]):not(strong[style*="#ff6b9d"]){
      color:inherit;
    }

    html[data-theme="light"]{
      color:#0f172a;
    }

    /* AGGRESSIVE FIX: All muted/grey text colors */
    html[data-theme="light"] [style*="color:var(--muted)"],
    html[data-theme="light"] [style*="color: var(--muted)"],
    html[data-theme="light"] [style*="color:var(--muted-2)"],
    html[data-theme="light"] [style*="color: var(--muted-2)"],
    html[data-theme="light"] .note,
    html[data-theme="light"] p[style*="color:var(--muted)"],
    html[data-theme="light"] span[style*="color:var(--muted)"],
    html[data-theme="light"] div[style*="color:var(--muted)"] {
      color:#475569 !important;
    }

    /* Fix all var(--text) to ensure they're dark */
    html[data-theme="light"] [style*="color:var(--text)"],
    html[data-theme="light"] [style*="color: var(--text)"] {
      color:#0f172a !important;
    }

    /* Fix specific light color hex codes */
    html[data-theme="light"] [style*="color:#b7c2d9"],
    html[data-theme="light"] [style*="color:#8ea0bf"],
    html[data-theme="light"] [style*="color:#ecf1ff"] {
      color:#475569 !important;
    }

    /* FIX GRADIENT TEXT FOR LIGHT MODE - Critical for readability */
    html[data-theme="light"] .headline {
      background: linear-gradient(135deg, #1e40af, #7c3aed) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix all green gradient text (success/guarantee messages) */
    html[data-theme="light"] strong[style*="linear-gradient(135deg,#3ed598"],
    html[data-theme="light"] span[style*="linear-gradient(135deg,#3ed598"] {
      background: linear-gradient(135deg, #059669, #047857) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix all orange gradient text (pricing/CTA) */
    html[data-theme="light"] strong[style*="linear-gradient(135deg,#f9a23c"],
    html[data-theme="light"] span[style*="linear-gradient(135deg,#f9a23c"] {
      background: linear-gradient(135deg, #c2410c, #ea580c) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* Fix brand gradient text (Signal Pilot logo/branding) */
    html[data-theme="light"] span[style*="linear-gradient(135deg,#5b8aff"] {
      background: linear-gradient(135deg, #1e40af, #6b21a8) !important;
      -webkit-background-clip: text !important;
      background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }

    /* ==================== LIGHT MODE GORGEOUS EFFECTS ==================== */

    /* Keyframe animations for light mode backgrounds */
    @keyframes orbFloat {
      0%, 100% {
        background:
          radial-gradient(circle 900px at 20% 30%, rgba(59, 130, 246, 0.22), transparent 60%),
          radial-gradient(circle 700px at 80% 70%, rgba(168, 85, 247, 0.18), transparent 60%),
          radial-gradient(circle 800px at 50% 50%, rgba(14, 165, 233, 0.15), transparent 60%),
          #ffffff;
      }
      50% {
        background:
          radial-gradient(circle 900px at 30% 40%, rgba(59, 130, 246, 0.27), transparent 60%),
          radial-gradient(circle 700px at 70% 60%, rgba(168, 85, 247, 0.23), transparent 60%),
          radial-gradient(circle 800px at 60% 40%, rgba(14, 165, 233, 0.20), transparent 60%),
          #ffffff;
      }
    }

    @keyframes particleFloat {
      0% { transform: translateY(0) translateX(0); }
      50% { transform: translateY(-20px) translateX(10px); }
      100% { transform: translateY(0) translateX(0); }
    }

    /* Subtle grid overlay for light mode */
    html[data-theme="light"]::before {
      content: '';
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      background-image:
        linear-gradient(rgba(59, 130, 246, 0.09) 1px, transparent 1px),
        linear-gradient(90deg, rgba(59, 130, 246, 0.09) 1px, transparent 1px);
      background-size: 50px 50px;
      opacity: 0.9;
    }

    /* Enhanced cards in light mode */
    html[data-theme="light"] .card {
      box-shadow: 0 4px 20px rgba(59, 130, 246, 0.08) !important;
      border: 1px solid rgba(59, 130, 246, 0.12) !important;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.6)) !important;
      backdrop-filter: blur(10px);
    }

    html[data-theme="light"] .card:hover {
      box-shadow: 0 12px 40px rgba(59, 130, 246, 0.15) !important;
      border-color: rgba(59, 130, 246, 0.3) !important;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.8)) !important;
    }



    *{box-sizing:border-box}

    body{
      top:0 !important;
      position:relative !important;
      overflow-x:hidden;
      position:relative;
      /* Smooth theme transitions */
      transition:background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Smooth transitions for all theme-dependent elements */
    header,
    .card,
    .btn,
    nav a{
      transition:all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Scroll progress indicator */
    .scroll-progress{
      position:fixed;
      top:0;
      left:0;
      width:0%;
      height:3px;
      background:linear-gradient(90deg,var(--brand),var(--accent));
      z-index:10000;
      transition:width 0.1s ease-out;
    }

    /* MOBILE: Simple, clean mobile setup - NO forced positioning */
    @media (max-width: 768px) {
      /* Background layers BEHIND everything */
      .bg-stars {
        z-index: -3 !important;
        position: fixed !important;
      }
      .sp-constellations {
        z-index: 1 !important;
        position: fixed !important;
      }

      /* Header needs high z-index for dropdown menus */
      header {
        position: relative;
        z-index: 100;
        overflow-x: hidden !important;
        max-width: 100vw !important;
      }

      /* Prevent header content from overflowing on mobile */
      header .container.nav {
        max-width: 100vw !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }

      /* Ensure header buttons adapt to smaller text when necessary */
      header .btn,
      header #themeToggle {
        font-size: .8rem !important;
        padding: .4rem .6rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        flex-shrink: 1 !important;
      }

      /* CTA button - ensure it doesn't overflow */
      header .cta-header {
        max-width: 140px !important;
        font-size: .75rem !important;
        padding: .5rem .7rem !important;
        text-overflow: ellipsis !important;
        overflow: hidden !important;
      }

      /* Reduce animations for performance - but don't kill them entirely */
      *, *::before, *::after {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
      }

      /* Ensure modals can still animate */
      #cookie-preferences-modal,
      .sp-chatbot-window,
      .mobile-nav,
      [id*="modal"] {
        animation-duration: 0.3s !important;
        transition-duration: 0.3s !important;
      }
    }

    img, video, iframe{
      max-width:100%;
      height:auto;
    }

    /* Prevent long words/URLs from breaking layout */
    p, li, td, th, div{
      word-wrap:break-word;
      overflow-wrap:break-word;
      word-break:break-word;
    }

    /* Don't break words in headings unless necessary */
    h1, h2, h3, h4, h5, h6{
      word-wrap:break-word;
      overflow-wrap:break-word;
    }
    
    /* Ensure main content is above background layers */
    main{
      position:relative;
      min-height:100vh;
      z-index:1;
      background:transparent !important; /* Let constellations show through! */
    }

    /* Make all sections transparent so constellations are visible throughout entire site */
    section, .section {
      background:transparent !important;
    }

    /* Override any inline background styles on sections */
    section[style*="background"] {
      background:transparent !important;
    }
    
    /* Prevent any overflow issues on mobile */
    @media (max-width:768px){
      body, main{
        overflow-x:hidden !important;
      }
      
      main{
        width:100%;
        display:block;
      background:transparent !important; /* Let particles show through on mobile! */
      }

      /* Force all sections transparent on mobile so particles show through */
      section, .section {
        background:transparent !important;
      }
    }
    
    /* Removed reveal animations - not needed */



    html,body{

      margin:0;

      color:var(--text);

      font-family:"Space Grotesk", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;

      font-size:clamp(16px,0.9vw + 12px,18px);

      line-height:1.7;

      letter-spacing:.005em;

      -webkit-text-size-adjust:100%;

      overflow-x:hidden;

      background:transparent; /* Let particles/aurora/bg-stars show through! */

      isolation:isolate;

      /* Smooth scrolling */
      scroll-behavior:smooth;

      /* Better touch scrolling on iOS */
      -webkit-overflow-scrolling:touch;

      /* Performance optimizations */
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      text-rendering:optimizeLegibility;

    }



    /* Background: gradient + lattice under everything */

    body::before{

      content:"";

      position:fixed;

      inset:0;

      z-index:-4;

      pointer-events:none;

      background:

        radial-gradient(1200px 700px at -6% -8%, rgba(130,185,255,.18), transparent 60%),

        radial-gradient(1100px 660px at 108% -10%, rgba(155,140,255,.18), transparent 62%),

        radial-gradient(1200px 700px at 52% 118%, rgba(118,221,255,.12), transparent 64%),

        var(--bg);

    }



    html[data-theme="light"] body::before{

      background:

        radial-gradient(circle 900px at 20% 30%, rgba(59, 130, 246, 0.22), transparent 60%),

        radial-gradient(circle 700px at 80% 70%, rgba(168, 85, 247, 0.18), transparent 60%),

        radial-gradient(circle 800px at 50% 50%, rgba(14, 165, 233, 0.15), transparent 60%),

        #ffffff;

      animation: orbFloat 20s ease-in-out infinite;

    }



    body::after{

      content:"";

      position:fixed;

      inset:0;

      z-index:-3;

      pointer-events:none;

      opacity:.18;

      background-image:

        linear-gradient(transparent 31px, var(--grid-line) 32px, transparent 33px),

        linear-gradient(90deg, transparent 31px, var(--grid-line) 32px, transparent 33px);

      background-size:64px 64px;

    }

    html[data-theme="light"] body::after{
      opacity:.38;
      background-image:
        radial-gradient(2px 2px at 15% 25%, #3b82f6, transparent 50%),
        radial-gradient(3px 3px at 85% 15%, #a855f7, transparent 50%),
        radial-gradient(2px 2px at 45% 75%, #0ea5e9, transparent 50%),
        radial-gradient(3px 3px at 70% 85%, #8b5cf6, transparent 50%),
        radial-gradient(2px 2px at 25% 60%, #3b82f6, transparent 50%),
        radial-gradient(2px 2px at 90% 50%, #06b6d4, transparent 50%),
        linear-gradient(transparent 31px, rgba(59, 130, 246, 0.12) 32px, transparent 33px),
        linear-gradient(90deg, transparent 31px, rgba(59, 130, 246, 0.12) 32px, transparent 33px);
      background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 64px 64px, 64px 64px;
      animation: particleFloat 30s linear infinite;
    }



    /* bg-aurora CSS REMOVED - element disabled, using video background instead */



    @keyframes aurora{

      from{transform:translate3d(-2%,-1%,0) scale(1.02)}

      to{transform:translate3d(2%,1%,0) scale(1.05)}

    }

    @keyframes pricingGlow{
      0%,100%{box-shadow:0 0 40px rgba(91,138,255,.2),0 0 80px rgba(91,138,255,.1);transform:scale(1.05)}
      50%{box-shadow:0 0 60px rgba(91,138,255,.4),0 0 120px rgba(91,138,255,.2);transform:scale(1.05)}
    }

    @keyframes badgePulse{
      0%,100%{transform:translateX(-50%) scale(1);box-shadow:0 4px 16px rgba(249,162,60,.5)}
      50%{transform:translateX(-50%) scale(1.05);box-shadow:0 6px 24px rgba(249,162,60,.7)}
    }

    @keyframes floatOrb1{
      0%,100%{transform:translate(0,0) scale(1)}
      33%{transform:translate(30px,-30px) scale(1.1)}
      66%{transform:translate(-20px,20px) scale(0.9)}
    }

    @keyframes floatOrb2{
      0%,100%{transform:translate(0,0) scale(1)}
      50%{transform:translate(-40px,-20px) scale(1.15)}
    }

    @keyframes blink{
      0%,49%{opacity:1}
      50%,100%{opacity:0}
    }

    /* Micro-interactions: Loading spinner */
    @keyframes spin{
      to{transform:rotate(360deg)}
    }

    .spinner{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,0.3);border-top-color:var(--brand);border-radius:50%;animation:spin 0.8s linear infinite}

    /* Micro-interactions: Success checkmark pop */
    @keyframes checkPop{
      0%{transform:scale(0);opacity:0}
      50%{transform:scale(1.2)}
      100%{transform:scale(1);opacity:1}
    }

    .success-check{animation:checkPop 0.4s cubic-bezier(0.4, 0, 0.2, 1)}

    /* Tablet optimizations */
    @media (max-width:1024px){
      /* Reduce parallax intensity on tablets */
      #parallax-orb-1,#parallax-orb-2{opacity:0.7}
    }

    @media (max-width:768px){
      /* Prevent horizontal overflow on mobile */
      body,html{overflow-x:hidden !important;max-width:100vw}

      /* Product cards - optimize button layout for tablets */
      .card.product .btn-sm {
        font-size: .9rem;
        padding: .55rem .8rem;
        min-height: 42px;
      }

      /* Navigation menu - ensure proper alignment on tablets */
      nav ul {
        gap: .7rem !important;
      }

      nav li {
        display: flex;
        align-items: center;
      }

      /* Allow hero text to wrap on mobile */
      #hero-description{white-space:normal !important;font-size:1rem !important;padding:0 1rem;max-width:100%;overflow-wrap:break-word;word-break:break-word}

      /* Reduce typing text on mobile */
      #typed-text{font-size:0.95rem !important}

      /* Smaller progress bar on mobile */
      .scroll-progress{height:2px}

      /* Optimize button press for touch */
      .btn:active{transform:translateY(2px) scale(0.99)}

      /* Disable orb animations on mobile for battery */
      #parallax-orb-1,#parallax-orb-2{animation:none !important}

      /* Ensure typing text doesn't overflow */
      .hero p{word-wrap:break-word;overflow-wrap:break-word}

      /* Reduce hero heading size on mobile */
      .headline.xl{font-size:2rem !important}

      /* Better spacing for gradient orbs on mobile */
      #parallax-orb-1{width:350px;height:350px;filter:blur(50px) !important}
      #parallax-orb-2{width:300px;height:300px;filter:blur(40px) !important}
    }

    /* Desktop optimizations - ensure video shows 100% */
    @media (min-width:1025px){
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:cover !important;
        object-position:center !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }
    }

    @media (max-width:480px){
      /* Extra small screens - smaller text */
      #hero-description{font-size:0.85rem !important;padding:0 0.5rem;line-height:1.5 !important}

      /* Extra small screens - thinner progress bar */
      .scroll-progress{height:1.5px}
    }



    @media (prefers-reduced-motion: reduce){


      #typing-cursor{animation:none;opacity:1}

      /* Disable all animations for users who prefer reduced motion */
      .success-check,.spinner{animation:none !important}

      .btn:active{transform:none !important}

      #parallax-orb-1,#parallax-orb-2{animation:none !important}

    }

    /* Performance: Disable heavy effects on low-end devices */
    @media (prefers-reduced-data: reduce){
      /* Aurora, stars, and particles are all beautiful and lightweight - show them on mobile! */
      /* Only hide truly heavy effects like parallax orbs */

      #parallax-orb-1,#parallax-orb-2{display:none !important}
    }

    /* bg-aurora capability rules REMOVED - using video background instead */

    @media (max-width: 1024px) {
      /* Disable harsh blinking cursor on mobile */
      #typing-cursor {
        animation: none !important;
        opacity: 1 !important;
      }

      /* Constellations should stay in background (default z-index:-2) - removed forced z-index:1 */
      .sp-constellations, #constellations {
        position: fixed !important;
        pointer-events: none !important;
      }

      /* Header must be above background for navigation */
      header {
        position: relative !important;
        z-index: 100 !important;
      }
    }

    /* Light mode bg-aurora rules REMOVED - using video background instead */

    html[data-theme="light"] .bg-stars{
      opacity:.08 !important;
      background:
        radial-gradient(1px 1px at 10% 20%, rgba(148,163,184,.35), transparent 60%),
        radial-gradient(1px 1px at 30% 80%, rgba(148,163,184,.25), transparent 60%),
        radial-gradient(1px 1px at 70% 30%, rgba(148,163,184,.3), transparent 60%),
        radial-gradient(1px 1px at 85% 60%, rgba(148,163,184,.3), transparent 60%),
        radial-gradient(1px 1px at 55% 10%, rgba(148,163,184,.25), transparent 60%),
        radial-gradient(1px 1px at 15% 55%, rgba(148,163,184,.25), transparent 60%),
        radial-gradient(1px 1px at 44% 74%, rgba(148,163,184,.25), transparent 60%),
        radial-gradient(1px 1px at 78% 88%, rgba(148,163,184,.25), transparent 60%);
    }

    html[data-theme="light"] .sp-constellations{
      opacity:.12 !important;
    }



    /* Typography */

    h1,h2,h3{

      font-family:"Space Grotesk",system-ui,sans-serif;

      text-wrap:balance;

      letter-spacing:.02em;

    }

    p,li{ text-wrap:pretty }



    /* Utilities */

    .container{max-width:var(--max);width:100%;margin:0 auto;padding-left:calc(clamp(14px,4vw,22px) + env(safe-area-inset-left));padding-right:calc(clamp(14px,4vw,22px) + env(safe-area-inset-right));overflow:visible}

    .section{padding:clamp(1.6rem,5.5vw,3rem) 0}

    .stack{display:grid;gap:1.2rem}

    .grid{display:grid;gap:1rem}

    /* ==================== SHIMMERING GRADIENT ANIMATION ==================== */
    @keyframes shimmerGradient {
      0% { background-position: 200% 50%; }
      100% { background-position: -200% 50%; }
    }
    .shimmer-text {
      position: relative;
      display: inline-block;
      background: linear-gradient(90deg, #9cc0ff 0%, #86a8ff 20%, #7ccaff 40%, #ffffff 50%, #7ccaff 60%, #86a8ff 80%, #9cc0ff 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      animation: shimmerGradient 8s linear infinite;
    }
    h1.shimmer-text, h2.shimmer-text, h3.shimmer-text { display: block; }

    .grid.auto-300{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}

    .pricing-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem;align-items:stretch}

    /* Force pricing cards to be exactly the same height */
    .pricing-grid .card.plan {
      display:grid;
      grid-template-rows:auto auto 1fr auto; /* header | price | value-box | actions */
      min-height:850px; /* Increased to accommodate all content */
      height:100%; /* Ensure all cards stretch to same height */
      padding-top:1.5rem; /* Extra padding for absolute positioned badges */
    }

    /* Pill - force consistent height */
    .pricing-grid .card.plan > .pill {
      min-height:50px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Price - force consistent height */
    .pricing-grid .card.plan > .price {
      min-height:70px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Fix text overflow in buttons - allow wrapping */
    .pricing-grid .btn {
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: normal;
      text-align: center;
      line-height: 1.4;
      min-height:54px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Fix label text wrapping */
    .pricing-grid label {
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: normal;
    }

    /* Ensure Pay with Card buttons are properly centered */
    .pricing-grid .btn-secondary {
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Mobile: Stack pricing cards vertically */
    @media (max-width:900px){
      /* Prevent any horizontal overflow at root level */
      html, body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
        width: 100% !important;
      }

      /* Ensure all major containers respect viewport */
      body, .section, .container, .stack {
        max-width: 100vw !important;
        width: 100% !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }

      .section, .container {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
      }

      /* Ensure divs inside cards respect width */
      .pricing-grid .card.plan > div,
      .pricing-grid .card.plan .actions {
        max-width: 100% !important;
        box-sizing: border-box !important;
      }

      /* Pricing grid - vertical stack on mobile */
      .pricing-grid{
        display: flex !important;
        flex-direction: column !important;
        gap: 2rem !important;
        max-width: 100% !important;
        padding: 0 1rem !important;
        margin: 0 auto !important;
        box-sizing: border-box !important;
        align-items: center !important;
        justify-content: center !important;
      }

      /* Individual pricing cards */
      .pricing-grid .card.plan {
        display: flex !important;
        flex-direction: column !important;
        height: auto !important;
        min-height: auto !important;
        max-width: 100% !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 1.5rem 1rem !important;
        box-sizing: border-box !important;
        overflow: visible !important;
        transform: none !important; /* Remove any scale transforms */
      }

      /* Override yearly card scale on mobile */
      /* Stop pricing card glow animation on mobile - causes flickering with aurora */
      #plan-yearly {
        animation: none !important;
        transform: none !important;
        z-index: 1 !important;
        box-shadow: 0 4px 12px rgba(91,138,255,.15) !important; /* Remove heavy glow, use subtle shadow */
      }

      /* Fix absolute positioned badges on pricing cards */
      .pricing-grid .card.plan > div[style*="position:absolute"] {
        position: absolute !important;
        max-width: calc(100% - 4rem) !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        font-size: 0.7rem !important;
        padding: 0.35rem 0.7rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
      }

      /* Ensure all card content wraps */
      .card * {
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        max-width: 100% !important;
      }

      /* Ensure buttons and inputs in cards respect width */
      .pricing-grid .card.plan input,
      .pricing-grid .card.plan button,
      .pricing-grid .card.plan .btn,
      .pricing-grid .card.plan a {
        max-width: 100% !important;
        box-sizing: border-box !important;
      }

      /* Fix pill elements */
      .pricing-grid .card.plan .pill {
        max-width: 100% !important;
        box-sizing: border-box !important;
      }

      /* Fix price display */
      .pricing-grid .card.plan .price {
        max-width: 100% !important;
        box-sizing: border-box !important;
        overflow: visible !important;
      }

      /* Fix comparison section */
      #comparison-grid, .comparison-container {
        overflow: visible !important;
        max-width: 100% !important;
      }

      #comparison-slider {
        max-width: 100% !important;
        border: none !important;
        margin-left: auto !important;
        margin-right: auto !important;
      }

      .comparison-image {
        overflow: hidden !important;
        background: transparent !important;
      }
    }

    /* Landscape mobile optimization */
    @media (max-height: 600px) and (orientation: landscape) {
      /* Reduce vertical spacing on landscape mobile */
      .section {
        padding: 2rem 0 !important;
      }

      /* Carousel height optimization for landscape */
      .carousel-item {
        max-height: 70vh;
      }

      /* Product cards more compact */
      .card.product {
        padding: 0.8rem;
      }
    }

    /* Additional mobile fixes for guarantee and other elements */
    @media (max-width:768px){
      /* Fix 7-day money back guarantee - be very specific */
      #plans-grid + div,
      section .container > div[style*="max-width:900px"] {
        max-width: calc(100% - 2rem) !important;
        width: calc(100% - 2rem) !important;
        padding: 1.25rem 0.75rem !important;
        margin: 2rem auto 1rem !important;
        box-sizing: border-box !important;
        overflow: hidden !important;
      }

      section .container > div[style*="max-width:900px"] h3 {
        font-size: 1rem !important;
        line-height: 1.3 !important;
        word-wrap: break-word !important;
      }

      section .container > div[style*="max-width:900px"] p {
        font-size: 0.85rem !important;
        word-wrap: break-word !important;
        line-height: 1.5 !important;
      }

      section .container > div[style*="max-width:900px"] > div[style*="display:flex"] {
        flex-direction: column !important;
        gap: 0.5rem !important;
        align-items: flex-start !important;
      }

      section .container > div[style*="max-width:900px"] svg {
        width: 24px !important;
        height: 24px !important;
        flex-shrink: 0 !important;
      }

      /* Ensure icon + text rows don't overflow */
      section .container > div[style*="max-width:900px"] > div > div {
        max-width: 100% !important;
        border: none !important;
        overflow: hidden !important;
      }

      section .container > div[style*="max-width:900px"] span {
        font-size: 0.8rem !important;
        word-wrap: break-word !important;
      }

      /* Footer: Three sections stacked vertically on mobile */
      footer > .container > div[style*="grid-template-columns"] {
        display: flex !important;
        flex-direction: column !important;
        gap: 1rem !important;
        margin-bottom: 1.5rem !important;
        padding: 0.5rem !important;
      }

      /* Hide the first column (Signal Pilot brand) on mobile */
      footer > .container > div[style*="grid-template-columns"] > div:first-child {
        display: none !important;
      }

      /* Style each footer section - simple and clean */
      footer > .container > div[style*="grid-template-columns"] > div {
        padding: 0.75rem 0 !important;
        border-bottom: 1px solid rgba(255,255,255,.1) !important;
      }

      footer > .container > div[style*="grid-template-columns"] > div:last-child {
        border-bottom: none !important;
      }

      /* Footer section headings - no colors */
      footer > .container > div[style*="grid-template-columns"] > div h4 {
        font-size: 0.75rem !important;
        margin-bottom: 0.5rem !important;
        font-weight: 600 !important;
        opacity: 0.7 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.05em !important;
      }

      /* Footer links - horizontal layout in rows */
      footer > .container > div[style*="grid-template-columns"] > div ul {
        padding: 0 !important;
        margin: 0 !important;
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 0.3rem 0.6rem !important;
        list-style: none !important;
      }

      footer > .container > div[style*="grid-template-columns"] > div ul li {
        margin: 0 !important;
        display: inline-block !important;
      }

      footer > .container > div[style*="grid-template-columns"] > div ul li a {
        font-size: 0.68rem !important;
        line-height: 1.2 !important;
        transition: opacity 0.2s ease !important;
        display: inline-block !important;
        opacity: 0.8 !important;
        white-space: nowrap !important;
      }

      footer > .container > div[style*="grid-template-columns"] > div ul li a:hover {
        opacity: 1 !important;
      }

      /* Sticky buttons on mobile - bottom right corner */
      /* Theme selector button (Matrix, Sakura, etc.) - 🎨 icon */
      .sp-theme-toggle {
        position: fixed !important;
        bottom: 90px !important;
        right: 20px !important;
        z-index: 999 !important;
        width: 50px !important;
        height: 50px !important;
        border-radius: 50% !important;
        box-shadow: 0 4px 12px rgba(0,0,0,.3) !important;
        background: rgba(255,255,255,.06) !important;
        border: 1px solid rgba(255,255,255,.14) !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        transition: all 0.3s ease !important;
        top: auto !important;
        left: auto !important;
        transform: none !important;
      }

      .sp-theme-toggle:hover {
        transform: scale(1.1) !important;
        background: rgba(255,255,255,.1) !important;
      }

      .sp-theme-toggle:active {
        transform: scale(0.95) !important;
      }

      /* Chatbot button sticky positioning */
      .sp-chatbot-toggle,
      .sp-chatbot-button,
      #sp-chatbot-button {
        position: fixed !important;
        bottom: 20px !important;
        right: 20px !important;
        z-index: 10000 !important;
        width: 50px !important;
        height: 50px !important;
        top: auto !important;
        left: auto !important;
        transform: none !important;
      }

      /* Back to top button on mobile */
      #backToTop {
        bottom: 160px !important;
        width: 50px !important;
        height: 50px !important;
        font-size: 1.3rem !important;
      }
    }

    /* Back to top button - all screens - matches theme/chatbot style */
    #backToTop {
      position: fixed;
      bottom: 160px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      color: #9fdcff;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 998;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,.3);
    }

    #backToTop.show {
      opacity: 1;
      visibility: visible;
    }

    #backToTop:hover {
      background: rgba(255,255,255,.1);
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0,0,0,.4);
    }

    #backToTop:active {
      transform: scale(0.95);
    }

    /* Light mode support for back to top */
    html[data-theme="light"] #backToTop {
      background: #f6f8fc;
      border-color: #d7def0;
      color: #0f1524;
      box-shadow: 0 4px 12px rgba(0,0,0,.1);
    }

    html[data-theme="light"] #backToTop:hover {
      background: #eef1f9;
      box-shadow: 0 6px 20px rgba(0,0,0,.15);
    }

    .measure{max-width:var(--measure)}



    /* Buttons & cards (unified) */

    a,button{min-height:44px}

    .btn{
      display:inline-flex;
      align-items:center;
      gap:.55rem;
      padding:.78rem 1.12rem;
      border-radius:999px;
      font-weight:800;
      text-decoration:none;
      cursor:pointer;
      transition:all .15s cubic-bezier(0.4, 0, 0.2, 1);
      /* Ensure proper touch targets */
      min-height:44px;
      touch-action:manipulation;
      -webkit-tap-highlight-color:transparent;
      /* Performance */
      will-change:transform;
      backface-visibility:hidden;
      position:relative;
    }

    .btn:active{transform:translateY(3px) scale(0.98);box-shadow:0 1px 4px rgba(0,0,0,0.3) !important}

    .btn-primary{background:linear-gradient(115deg,var(--brand),var(--brand-2));color:#fff;position:relative;overflow:hidden;box-shadow:0 4px 20px rgba(91,138,255,0.3)}

    .btn-primary::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);transition:left 0.6s ease}

    .btn-primary:hover::before{left:100%}

    .btn-primary:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 8px 30px rgba(91,138,255,0.5)}

    .btn-ghost{color:#9fdcff;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06)}

    .btn-ghost:hover{background:rgba(255,255,255,.1);transform:scale(1.05)}

    html[data-theme="light"] .btn-ghost{color:#0f1524;border-color:#d7def0;background:#f6f8fc}

    html[data-theme="light"] .btn-ghost:hover{background:#eef1f9}

    .btn-sm{padding:.5rem .8rem; font-size:.92rem; line-height:1.1}

    /* Ensure punch lines have consistent height for uniform button alignment */
    .card.product .punch {
      min-height: 60px;
      display: flex;
      align-items: center;
    }

    /* Product card button container - ensure equal height alignment */
    .card.product .toggle-details,
    .card.product .toggle-details + a.btn {
      flex: 0 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      white-space: nowrap;
      min-height: 38px;
      overflow: visible;
    }

    /* Ensure toggle-details button fits "Hide Details" text in all languages */
    .card.product .toggle-details {
      min-width: 165px;
    }

    /* Form validation checkmarks */
    .input-wrapper{position:relative}

    .input-wrapper input.valid{
      border-color:#3ed598 !important;
      background:rgba(62,213,152,.05) !important;
    }

    .input-wrapper input.valid ~ .checkmark{
      opacity:1;
      transform:scale(1);
    }

    .checkmark{
      position:absolute;
      right:12px;
      top:50%;
      transform:translateY(-50%) scale(0);
      width:20px;
      height:20px;
      opacity:0;
      transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      pointer-events:none;
    }

    .checkmark svg{
      width:100%;
      height:100%;
    }

    /* Loading state for buttons */
    .btn-loading{
      position:relative;
      pointer-events:none;
      opacity:0.7;
    }

    .btn-loading::after{
      content:'';
      position:absolute;
      width:16px;
      height:16px;
      top:50%;
      left:50%;
      margin-left:-8px;
      margin-top:-8px;
      border:2px solid #ffffff;
      border-radius:50%;
      border-top-color:transparent;
      animation:spin 0.6s linear infinite;
    }

    @keyframes spin{
      to{transform:rotate(360deg)}
    }

    .card{border:1px solid rgba(255,255,255,.14);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));border-radius:16px;padding:1.05rem;box-shadow:var(--shadow);min-width:0;position:relative;overflow:visible;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1)}

    .card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--brand),var(--accent));transform:scaleX(0);transition:transform 0.3s ease;overflow:hidden}

    .card:hover::before{transform:scaleX(1)}

    .card:hover{border-color:rgba(91,138,255,0.4);transform:translateY(-6px);box-shadow:0 20px 60px rgba(91,138,255,0.2);background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.04))}

    /* Keep overflow:hidden for specific elements that need it */
    .card img, .card video, #comparison-slider {overflow:hidden}

    html[data-theme="light"] .card{border-color:rgba(10,20,40,.10);background:linear-gradient(180deg,rgba(10,20,40,.03),rgba(10,20,40,.01))}

    html[data-theme="light"] .card:hover{border-color:rgba(91,138,255,0.3);box-shadow:0 20px 60px rgba(91,138,255,0.15);background:linear-gradient(180deg,rgba(10,20,40,.05),rgba(10,20,40,.02))}

    /* Indicator card clickable cursor */
    .card.product img.indicator-screenshot{cursor:pointer;transition:transform 0.3s ease, box-shadow 0.3s ease}

    .card.product img.indicator-screenshot:hover{transform:scale(1.02);box-shadow:0 8px 32px rgba(91,138,255,0.4)}

    /* Lightbox modal */
    .lightbox-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);z-index:9999;display:flex;align-items:center;justify-content:center;padding:2rem;opacity:0;pointer-events:none;transition:opacity 0.3s ease}

    .lightbox-overlay.active{opacity:1;pointer-events:all}

    .lightbox-content{max-width:90vw;max-height:90vh;position:relative;animation:lightboxZoomIn 0.4s cubic-bezier(0.4, 0, 0.2, 1)}

    .lightbox-content img{width:100%;height:100%;object-fit:contain;border-radius:12px;box-shadow:0 40px 120px rgba(0,0,0,0.6)}

    .lightbox-close{position:absolute;top:-50px;right:0;background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.2);color:#fff;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.5rem;font-weight:300;transition:all 0.2s ease;backdrop-filter:blur(10px);min-width:44px;min-height:44px}

    .lightbox-close:hover{background:rgba(255,255,255,0.2);border-color:rgba(255,255,255,0.4);transform:scale(1.1)}

    /* Mobile lightbox optimizations */
    @media (max-width:768px){
      .lightbox-overlay{padding:1rem;backdrop-filter:blur(10px)}

      .lightbox-content{max-width:95vw;max-height:85vh}

      .lightbox-close{top:-15px;right:-15px;width:44px;height:44px;font-size:1.8rem}
    }

    /* Larger screenshot boxes on mobile */
    .card.product > div:first-child{max-width:100%!important;margin-bottom:1rem!important}
    }

    /* Tablet screenshot sizing */
    @media (max-width:1024px) and (min-width:769px){
      .card.product > div:first-child{max-width:320px!important}
    

    @keyframes lightboxZoomIn{
      from{transform:scale(0.8);opacity:0}
      to{transform:scale(1);opacity:1}
    }



    /* Header */

    header{

      position:sticky;

      top:0;

      z-index:40;

      backdrop-filter:none;

      background:transparent;

      border-bottom:1px solid rgba(255,255,255,.03);

      overflow:visible;

      /* CRITICAL: Fixed height to prevent vertical shifting */
      /* Adjusted for PWA safe area */
      min-height: calc(64px + env(safe-area-inset-top, 0px)) !important;
      max-height: calc(64px + env(safe-area-inset-top, 0px)) !important;
      height: calc(64px + env(safe-area-inset-top, 0px)) !important;

      /* PWA mode: Add safe area padding for device notch/status bar */
      padding-top: env(safe-area-inset-top, 0px);

    }

    html[data-theme="light"] header{
      border-bottom-color:#cbd5e1;
      background:rgba(255,255,255,.9);
    }



    .nav{
      display:flex;
      align-items:center;
      gap:.6rem;
      padding:.5rem 0;
      flex-wrap:nowrap !important;
      width:100%;
      min-width:0;
      position:relative;
      overflow:visible;
      /* CRITICAL: Prevent vertical expansion */
      height:100% !important;
      max-height:64px !important;
    }



    .brand{
      display:flex;
      align-items:center;
      gap:.6rem;
      color:#fff;
      text-decoration:none;
      font-weight:400;
      font-family:'Gugi',system-ui,-apple-system,sans-serif;
      text-transform:uppercase;
      letter-spacing:.1em;
      font-size:1.4rem;
      flex-shrink:0;
      white-space:nowrap;
      transition:transform 0.3s ease, filter 0.3s ease;
      position:relative;
    }
    .brand:hover{
      transform:scale(1.02);
      filter:drop-shadow(0 0 12px rgba(91,138,255,0.6)) drop-shadow(0 0 24px rgba(91,138,255,0.3));
    }

    /* ===== Nav Entrance Animations ===== */
    @keyframes slideInLeft{
      from{opacity:0;transform:translateX(-20px)}
      to{opacity:1;transform:translateX(0)}
    }
    @keyframes fadeInUp{
      from{opacity:0;transform:translateY(10px)}
      to{opacity:1;transform:translateY(0)}
    }
    .brand{animation:slideInLeft 0.5s ease forwards}
    nav ul li:nth-child(1){animation:fadeInUp 0.4s ease 0.1s forwards;opacity:0}
    nav ul li:nth-child(2){animation:fadeInUp 0.4s ease 0.2s forwards;opacity:0}
    nav ul li:nth-child(3){animation:fadeInUp 0.4s ease 0.3s forwards;opacity:0}
    nav ul li:nth-child(4){animation:fadeInUp 0.4s ease 0.4s forwards;opacity:0}
    nav ul li:nth-child(5){animation:fadeInUp 0.4s ease 0.45s forwards;opacity:0}
    .lang-dropdown,.cta-header{animation:fadeInUp 0.4s ease 0.5s forwards;opacity:0}
    .menu-toggle{animation:fadeInUp 0.4s ease 0.5s forwards;opacity:0}

    /* Allow brand to shrink slightly on very constrained screens */
    @media (max-width:1500px){
      .brand{
        font-size:1.3rem;
      }
    }

    @media (max-width:1400px){
      .brand{
        font-size:1.25rem;
      }
    }

    html[data-theme="light"] .brand{
      color:#0f172a;
    }

    .brand img{width:26px;height:26px}



    .nav-spacer{flex:1}



    nav[aria-label="Главная"]{display:flex;min-width:0;flex-shrink:10;overflow:visible;align-items:center}

    nav ul{list-style:none;margin:0;padding:0;display:flex;align-items:center;gap:.8rem;min-width:0;flex-shrink:10;overflow:visible}

    nav li{display:flex;align-items:center}

    .mobile-nav-header{display:none}

    nav a{display:inline-flex;padding:.5rem .9rem;border-radius:999px;color:#b7c2d9;font-weight:600;font-family:'Space Grotesk',system-ui,sans-serif;text-decoration:none;transition:all .2s ease;font-size:.95rem;white-space:nowrap;min-width:0;flex-shrink:1;position:relative}

    nav a::before{content:'';position:absolute;bottom:4px;left:50%;right:50%;height:2px;background:linear-gradient(90deg,var(--brand),var(--accent));transition:left 0.3s ease,right 0.3s ease;border-radius:2px}

    nav a:hover::before{left:10%;right:10%}

    nav a:hover,nav a:focus-visible{color:#fff;background:rgba(91,138,255,.15);transform:translateY(-1px)}

    html[data-theme="light"] nav a{color:#475569}

    html[data-theme="light"] nav a:hover,
    html[data-theme="light"] nav a:focus-visible{color:#0f172a;background:rgba(59,130,246,.12)}


    /* Resources Dropdown */
    .nav-dropdown{position:relative;z-index:65}

    .nav-dropdown-toggle{
      display:inline-flex;
      align-items:center;
      gap:.3rem;
      padding:.5rem .9rem;
      border-radius:999px;
      color:#b7c2d9;
      font-weight:600;
      font-family:'Space Grotesk',system-ui,sans-serif;
      background:transparent;
      border:none;
      cursor:pointer;
      transition:all .2s ease;
      font-size:.95rem;
      white-space:nowrap;
    }

    .nav-dropdown-toggle:hover,
    .nav-dropdown-toggle:focus-visible{
      color:#fff;
      background:rgba(91,138,255,.15);
      transform:translateY(-1px);
    }

    html[data-theme="light"] .nav-dropdown-toggle{color:#475569}

    html[data-theme="light"] .nav-dropdown-toggle:hover,
    html[data-theme="light"] .nav-dropdown-toggle:focus-visible{
      color:#0f172a;
      background:rgba(59,130,246,.12);
    }

    .dropdown-arrow{
      font-size:.7em;
      transition:transform .2s ease;
    }

    .nav-dropdown-toggle[aria-expanded="true"] .dropdown-arrow{
      transform:rotate(180deg);
    }

    .nav-dropdown-menu{
      position:absolute;
      top:100%;
      left:0;
      margin-top:.5rem;
      background:rgba(10,12,20,.98);
      border:1px solid rgba(255,255,255,.2);
      border-radius:12px;
      padding:.5rem;
      min-width:200px;
      box-shadow:0 8px 24px rgba(0,0,0,.4);
      display:none;
      flex-direction:column;
      align-items:stretch;
      gap:.25rem;
      z-index:66;
      backdrop-filter:blur(12px);
    }

    html[data-theme="light"] .nav-dropdown-menu{
      background:rgba(255,255,255,.98);
      border-color:rgba(30,41,59,.2);
      box-shadow:0 8px 24px rgba(0,0,0,.15);
    }

    .nav-dropdown-menu.show{display:flex}

    @media (min-width: 769px) {
      .nav-dropdown:hover .nav-dropdown-menu{display:flex}
    }

    .nav-dropdown-menu::before{
      content:'';position:absolute;top:-12px;left:0;right:0;height:16px;
    }

    .nav-dropdown-menu li{display:block}

    .nav-dropdown-menu a{
      position:relative;
      padding:.6rem .9rem;
      display:flex !important;
      align-items:center;
      justify-content:flex-start !important;
      gap:.5rem;
      border-radius:8px;
      width:100%;
      text-align:left !important;
    }


    #themeToggle{flex-shrink:0;position:relative;z-index:68 !important;padding:.4rem .6rem !important;font-size:0.85rem !important;min-width:44px;display:inline-flex !important;align-items:center !important;justify-content:center !important}

    /* Make theme button smaller on mobile */
    @media (max-width:768px){
      #themeToggle{
        padding:.3rem !important;
        font-size:0.8rem !important;
        min-width:40px;
        min-height:40px;
        display:inline-flex !important;
        align-items:center !important;
        justify-content:center !important;
      }

      #themeToggle span{
        display:flex !important;
        align-items:center !important;
        justify-content:center !important;
      }

      /* Ensure header doesn't exceed viewport width and allows natural height */
      header {
        max-width: 100vw;
        height: auto !important;
        max-height: none !important;
        min-height: auto !important;
      }

      /* Ensure nav container respects viewport width and removes height constraint */
      .nav {
        max-width: 100%;
        max-height: none !important;
        height: auto !important;
      }
    }



    .menu-toggle{
      display:none;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.25);
      background:linear-gradient(135deg, rgba(91,138,255,.2), rgba(91,138,255,.1));
      color:#fff;
      padding:.6rem .85rem;
      font-weight:700;
      font-size:.9rem;
      box-shadow:0 4px 12px rgba(0,0,0,.3);
      transition:all 0.2s ease;
      position:relative;
      z-index:45;
    }
    
    .menu-toggle:hover{
      background:linear-gradient(135deg, rgba(91,138,255,.3), rgba(91,138,255,.15));
      transform:translateY(-1px);
      box-shadow:0 6px 16px rgba(0,0,0,.4);
    }



    .cta-header{
      margin-left:.5rem;
      flex-shrink:0;
      padding:.5rem .9rem !important;
      font-size:.88rem !important;
      white-space:nowrap;
      position:relative;
      overflow:hidden;
      transition:box-shadow 0.3s ease;
    }
    .cta-header::before{
      content:'';
      position:absolute;
      top:0;
      left:-100%;
      width:100%;
      height:100%;
      background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition:none;
    }
    .cta-header:hover::before{
      left:100%;
      transition:left 0.5s ease;
    }
    .cta-header:hover{
      box-shadow:0 0 20px rgba(91,138,255,0.5), 0 0 40px rgba(91,138,255,0.3);
    }

    /* Adjust for 1920px monitors */
    @media (max-width:1950px){
      nav a{padding:.5rem .75rem;font-size:.92rem}
      .nav-dropdown-toggle{padding:.5rem .75rem;font-size:.92rem}
      nav ul{gap:.6rem}
      .cta-header{
        padding:.4rem .7rem !important;
        font-size:.85rem !important;
      }
    }

    /* Compact nav items on medium screens */
    @media (max-width:1600px){
      nav a{padding:.5rem .75rem;font-size:.92rem}
      .nav-dropdown-toggle{padding:.5rem .75rem;font-size:.92rem}
      nav ul{gap:.6rem}
    }

    /* Compact CTA button on medium screens */
    @media (max-width:1500px){
      .cta-header{
        padding:.45rem .75rem !important;
        font-size:.82rem !important;
      }
      nav a{padding:.5rem .7rem;font-size:.9rem}
      .nav-dropdown-toggle{padding:.5rem .7rem;font-size:.9rem}
      nav ul{gap:.5rem}
    }

    /* Hide CTA on smaller tablets/phones - will show in mobile menu instead */
    @media (max-width:1100px){
      .cta-header{display:none}
    }

    /* More compact for medium screens */
    @media (max-width:1450px){
      nav a{padding:.5rem .65rem;font-size:.88rem}
      .nav-dropdown-toggle{padding:.5rem .65rem;font-size:.88rem}
      nav ul{gap:.45rem}
    }

    /* Even more compact before hamburger menu appears */
    @media (max-width:1400px){
      nav a{padding:.5rem .6rem;font-size:.86rem}
      .nav-dropdown-toggle{padding:.5rem .6rem;font-size:.86rem}
      nav ul{gap:.35rem}
      .nav{gap:.4rem}
    }


    /* CRITICAL FIX: Ensure theme button and menu toggle stay visible */
    #themeToggle,
    .menu-toggle{
      position:relative;
      z-index:100 !important;
      flex-shrink:0 !important;
    }

    /* Ensure nav links (including FAQ) don't get covered by buttons */
    nav[aria-label="Главная"] ul li {
      position: relative;
      z-index: 101;
    }

    nav[aria-label="Главная"] a {
      position: relative;
      z-index: 101;
    }

    /* Ensure dropdown also has proper z-index */
    .nav-dropdown {
      z-index: 65 !important;
    }

    /* Hide mobile nav on desktop - it should only appear on mobile */
    @media (min-width: 1401px) {
      .mobile-nav,
      .mobile-nav-backdrop {
        display: none !important;
      }
    }

    /* Mobile hamburger menu appears at ≤1400px (increased from 1300px) */
    /* Nav items go into hamburger menu to prevent overlap with header buttons */

    @media (max-width:1400px){
      /* Ensure header buttons have adequate space */
      .nav{
        padding:.7rem 0;
        gap:.5rem; /* Better spacing between header buttons */
      }

      /* Better mobile header button sizing */
      #themeToggle {
        flex-shrink: 0;
        min-width: 44px; /* iOS minimum tap target */
        min-height: 44px;
      }

      .menu-toggle{
        display:inline-flex;
        position:relative;
        z-index:68 !important;
      }

      /* Hide original desktop nav on mobile */
      nav[aria-label="Главная"]{
        display:none !important;
      }

      /* Mobile nav backdrop */
      .mobile-nav-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 9998;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }
      .mobile-nav-backdrop.active {
        opacity: 1;
        visibility: visible;
      }

      /* Mobile menu panel - slides in from right */
      .mobile-nav {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        width: min(85vw, 380px);
        background: #0a0c14;
        z-index: 9999;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        overflow-y: auto;
        box-shadow: -8px 0 32px rgba(0, 0, 0, 0.8);
        /* Add safe area for notched phones */
        padding-top: env(safe-area-inset-top);
      }
      .mobile-nav.active {
        transform: translateX(0);
      }

      /* Menu content styling */
      .mobile-nav-header {
        padding: 1.5rem 1.25rem;
        padding-top: max(1.5rem, calc(1rem + env(safe-area-inset-top)));
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        min-height: 60px; /* Ensure enough space for close button */
      }

      .mobile-nav-close {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: #fff;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem 0.75rem;
        line-height: 1;
        border-radius: 8px;
        min-width: 44px; /* iOS minimum tap target */
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s ease;
      }

      .mobile-nav-close:hover,
      .mobile-nav-close:active {
        background: rgba(255, 255, 255, 0.2);
      }

      .mobile-nav-links {
        padding: 1rem 0;
      }

      .mobile-nav-links a {
        display: block;
        padding: 1rem 1.25rem;
        color: #b7c2d9;
        text-decoration: none;
        font-weight: 600;
        font-size: 1.05rem;
        transition: all 0.2s ease;
        border-left: 3px solid transparent;
        opacity: 0;
        transform: translateY(15px);
      }

      .mobile-nav.active .mobile-nav-links a {
        animation: mobileSlideUp 0.7s ease-out forwards;
      }
      .mobile-nav.active .mobile-nav-links > a:nth-of-type(1){animation-delay:0.12s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(1) a:nth-of-type(1){animation-delay:0.24s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(1) a:nth-of-type(2){animation-delay:0.36s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(1) a:nth-of-type(3){animation-delay:0.48s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(1) a:nth-of-type(4){animation-delay:0.6s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(2) a:nth-of-type(1){animation-delay:0.72s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(2) a:nth-of-type(2){animation-delay:0.84s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(2) a:nth-of-type(3){animation-delay:0.96s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(2) a:nth-of-type(4){animation-delay:1.08s}
      .mobile-nav.active .mobile-nav-section:nth-of-type(3) a{animation-delay:1.2s}
      @keyframes mobileSlideUp{
        from{opacity:0;transform:translateY(15px)}
        to{opacity:1;transform:translateY(0)}
      }

      .mobile-nav-links a:active {
        background: rgba(91, 138, 255, 0.15);
        border-left-color: #5b8aff;
        color: #fff;
      }

      .mobile-nav-section {
        padding: 0.5rem 1.25rem 0.25rem;
        margin-top: 0.5rem;
        border-top: 1px solid rgba(255, 255, 255, 0.06);
      }
      .mobile-nav-section:first-of-type {
        border-top: none;
        margin-top: 0;
      }
      .mobile-nav-section-label {
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: rgba(183, 194, 217, 0.5);
        padding: 0.5rem 0;
      }
      .mobile-nav-section a {
        padding: 0.85rem 0.5rem;
        border-left: none;
      }

      /* Hide desktop CTA on mobile */
      .cta-header{display:none}

    }

    @media (max-width:600px){
      nav[aria-label="Главная"]{
        width:90vw !important;
        right:5vw !important;
        left:5vw !important;
        max-width:none !important;
      }

      nav a{
        padding:.9rem 1.2rem;
        font-size:1.05rem;
        color:#ffffff !important;
        font-weight:600;
        border-bottom:1px solid rgba(255,255,255,.1);
        display:block !important;
        text-align:left;
        width:100%;
        visibility:visible !important;
        opacity:1 !important;
        background:transparent !important;
        font-family:'Space Grotesk',system-ui,sans-serif !important;
        line-height:1.4 !important;
      }
      
      .nav-backdrop{
        background:rgba(0,0,0,.85);
      }
      
      .brand{
        font-size:1.2rem;
        padding-left:0.5rem;
      }
      
      .brand img{
        width:22px;
        height:22px;
      }
      
      .nav{
        padding-left:0.5rem;
        padding-right:0.5rem;
      }
    }



    /* Hero */

    .badge{display:inline-flex;align-items:center;gap:.5rem;padding:.35rem .8rem;border-radius:999px;font-weight:800;letter-spacing:.05em;text-transform:uppercase;font-size:.78rem;color:#bfe7ff;background:rgba(118,221,255,.18);border:1px solid rgba(118,221,255,.28)}

    .headline{font-family:'Gugi',system-ui,-apple-system,sans-serif;font-weight:900;letter-spacing:.02em;line-height:1.12;background:var(--grad);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}

    /* Hero and section headers use EB Garamond for sophistication */
    /* Russian: Reduced font-size due to longer text */
    .headline.xl{
      font-size:clamp(1.9rem,5.5vw,3.2rem);
      font-family:'EB Garamond',serif;
      font-weight:600;
      letter-spacing:-.02em;
      line-height:1.2;
      text-wrap:balance;
    }

    .headline.lg{
      font-size:clamp(1.7rem,5vw,2.7rem);
      font-family:'EB Garamond',serif;
      font-weight:600;
      letter-spacing:-.02em;
      line-height:1.25;
    }

    .hero{padding:clamp(1.6rem,8vw,4.2rem) 0 1.2rem}

    .hero-grid{display:grid;gap:1.5rem;grid-template-columns:1.1fr .9fr}

    .hero-grid>*{min-width:0}

    .panel{border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); border-radius:20px; box-shadow:var(--shadow); min-height:200px; display:flex; align-items:flex-end; justify-content:space-between; padding:1rem}

    @media (max-width:900px){
      .hero-grid{grid-template-columns:1fr}
      .panel{min-height:160px}

      /* Footer: 2 columns on tablet */
      footer > div > div[style*="grid-template-columns"] {
        grid-template-columns: 1fr 1fr !important;
        gap: 2rem !important;
      }
    }
    
    @media (max-width:600px){
      .panel{
        padding:.9rem;
        min-height:140px;
      }
      
      .panel .stack{
        gap:.5rem !important;
      }
      
      .panel .badge{
        font-size:.7rem;
      }

      .panel .btn{
        padding:.6rem .9rem;
        font-size:.9rem;
      }

      /* Screenshot boxes - responsive on larger mobile */
      .product > div[style*="max-width:280px"]{
        max-width:100% !important;
        margin:0 0 1.2rem !important;
      }
    }

    /* Mobile optimizations */
    @media (max-width:768px){
      .hero-ctas{flex-direction:column;width:100%;gap:.7rem}
      .hero-ctas .btn{width:100%;justify-content:center;padding:.65rem 1rem !important;font-size:.85rem !important}
      .headline.xl{font-size:clamp(2.5rem,10vw,3.5rem);line-height:1.15;font-weight:900 !important;letter-spacing:-0.02em}
      .proof-bar{justify-content:center}
      .section{padding:clamp(2rem,6vw,3rem) 0}

      /* Make hero description smaller on mobile */
      .hero > div > div > p[style*="font-size:1.15rem"],
      .hero > div > div > p[style*="font-size:1rem"]{
        font-size:.85rem !important;
        line-height:1.5 !important;
      }

      /* Make hero video more prominent on mobile */
      .hero div[style*="margin-bottom:3rem"]{
        margin-bottom:2rem !important;
      }
      .hero div[style*="aspect-ratio:245/106"]{
        border-radius:8px !important;
        border-width:1px !important;
        margin-left:-0.5rem !important;
        margin-right:-0.5rem !important;
        max-width:calc(100% + 1rem) !important;
      }

      /* Fix FAQ grid overflow on mobile - single column */
      #faq > div > div[style*="grid-template-columns"]{
        grid-template-columns:1fr !important;
      }

      /* Footer: single column on mobile */
      footer > div > div[style*="grid-template-columns"]{
        grid-template-columns:1fr !important;
        gap:2rem !important;
      }

      /* Footer copyright: stack on mobile */
      footer div[style*="justify-content:space-between"]{
        flex-direction:column !important;
        align-items:flex-start !important;
        gap:.8rem !important;
      }

      /* Fix newsletter input overflow on mobile */
      #footerNewsletterEmail{
        min-width:100% !important;
      }

      /* Mobile video - responsive with aspect ratio */
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:contain !important;
        object-position:center !important;
        display:block !important;
        visibility:visible !important;
        opacity:1 !important;
        background:transparent !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }

      /* Video container - maintain 245:106 aspect ratio (2940x1272) */
      .hero > div > div:nth-child(2) > div{
        background:transparent !important;
        border:none !important;
        aspect-ratio:245/106 !important;
        width:100% !important;
        position:relative !important;
      }

      /* HIDE video overlays on mobile - they can block interaction */
      .hero video ~ div[style*="position:absolute"]{
        display:none !important;
      }

      /* Caption below video on mobile */
      .hero .video-caption{
        padding:1rem 0.5rem !important;
        font-size:0.85rem !important;
      }
    }

    /* Video caption responsive sizing */
    @media (min-width:769px){
      .hero .video-caption{
        font-size:1rem !important;
      }
    }

    /* Tablet optimizations */
    @media (min-width:769px) and (max-width:1024px){
      .container{
        max-width:95%;
      }

      #heroVideo{
        width:100%;
        height:100%;
        object-fit:contain;
        object-position:center;
        position:absolute;
        top:0;
        left:0;
      }

      .headline.xl{
        font-size:2.5rem;
      }
    }

    /* Desktop optimizations - ensure video shows 100% */
    @media (min-width:1025px){
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:cover !important;
        object-position:center !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }
    }

    @media (max-width:480px){
      .btn{padding:.7rem 1rem;font-size:.95rem;min-height:44px}
      .btn-sm{padding:.5rem .75rem;font-size:.88rem;min-height:40px}
      .headline.xl{font-size:1.95rem}
      .headline.lg{font-size:1.9rem}
      .badge{font-size:.72rem;padding:.3rem .7rem}
      .mini-pill{font-size:.75rem;padding:.25rem .5rem}
      .price{font-size:1.8rem}
      .cta-inner .bar .note{display:none}

      /* Extra small screens - further reduce header button sizes */
      header .btn,
      header #themeToggle {
        font-size: .75rem !important;
        padding: .35rem .5rem !important;
      }

      header .cta-header {
        max-width: 120px !important;
        font-size: .7rem !important;
        padding: .45rem .6rem !important;
      }

      /* Brand can shrink more on very small screens */
      .brand {
        font-size: 1.1rem !important;
      }

      /* Product card button container - ensure buttons are touch-friendly */
      .card.product > div[style*="display:flex"] {
        gap: .4rem !important;
        flex-wrap: wrap;
      }

      /* Ensure toggle-details buttons are touch-friendly on very small screens */
      .toggle-details {
        flex: 1 0 auto;
        min-width: fit-content;
        padding-left: 1rem;
        padding-right: 1rem;
      }

      /* Adjust punch line min-height for mobile to accommodate text wrapping */
      .card.product .punch {
        min-height: 70px;
      }

      /* Extra small screens - video maintains aspect ratio */
      #heroVideo{
        width:100% !important;
        height:100% !important;
        object-fit:contain !important;
        object-position:center !important;
        position:absolute !important;
        top:0 !important;
        left:0 !important;

      /* Remove border from video container on desktop */
      .hero > div > div:nth-child(2) > div{
        border:none !important;
      }
      }

      /* Video container maintains aspect ratio */
      .hero > div > div:nth-child(2) > div{
        aspect-ratio:245/106 !important;
        border:none !important;
        width:100% !important;
        position:relative !important;
      }

      /* Hide video overlays on extra small screens */
      .hero video ~ div[style*="position:absolute"]{
        display:none !important;
      }

      /* Caption below video on extra small mobile */
      .hero .video-caption{
        padding:0.75rem 0.5rem !important;
        font-size:0.8rem !important;
      }

      /* Small screen hero description */
      .hero > div > div:last-child p{
        font-size:1rem !important;
      }
    }

    /* Carousel caption mobile styles */
    @media (max-width:768px){
      /* Reduce caption text size on tablets and mobile */
      .carousel-item > div[style*="position:absolute"] > p:first-child{
        font-size:0.9rem !important;
      }
      .carousel-item > div[style*="position:absolute"] > p:last-child{
        font-size:0.7rem !important;
      }
      /* Reduce padding to save space */
      .carousel-item > div[style*="position:absolute"]{
        padding:1.2rem 1rem 1rem !important;
      }
    }

    @media (max-width:480px){
      /* Further reduce caption text on small mobile */
      .carousel-item > div[style*="position:absolute"] > p:first-child{
        font-size:0.85rem !important;
      }
      .carousel-item > div[style*="position:absolute"] > p:last-child{
        font-size:0.65rem !important;
      }
      /* Reduce padding more on small screens */
      .carousel-item > div[style*="position:absolute"]{
        padding:1rem 0.75rem 0.75rem !important;
      }
    }

    .hero-ctas{display:flex;flex-wrap:wrap;gap:.9rem;align-items:center}

    .proof-bar{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.2rem}

    .mini-pill{display:inline-flex;align-items:center;padding:.28rem .55rem;border-radius:999px;font-weight:700;font-size:.78rem;color:#cfe1ff;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14)}



/* Stars + constellations (shared) */
.bg-stars{
  position:fixed; inset:0; z-index:-3; pointer-events:none; opacity:.70;
  background:
    radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.9), transparent 60%),
    radial-gradient(1px 1px at 30% 80%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 70% 30%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1px 1px at 85% 60%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1px 1px at 55% 10%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 15% 55%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 44% 74%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 78% 88%, rgba(255,255,255,.7), transparent 60%);
  filter: drop-shadow(0 0 2px rgba(255,255,255,.25));
}
.sp-constellations{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
  width:100%;
  height:100%;
  display:block;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}


  </style>



  <!-- =======================================================================
       STRUCTURED DATA
       ======================================================================= -->

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "Signal Pilot — Trading Suite",
    "description": "Non‑repainting TradingView indicators for any market & timeframe. Seven elite indicators including Pentarch, OmniDeck, Volume Oracle, and more.",
    "brand": {
      "@type": "Brand",
      "name": "Signal Pilot"
    },
    "image": "https://www.signalpilot.io/preview.png",
    "category": "Financial Software",
    "audience": {
      "@type": "Audience",
      "audienceType": "Traders, Investors, Financial Analysts"
    },
    "offers": [
      {
        "@type": "Offer",
        "price": "99",
        "priceCurrency": "USD",
        "priceValidUntil": "2025-12-31",
        "availability": "https://schema.org/InStock",
        "url": "https://www.signalpilot.io/#pricing",
        "name": "Ежемесячная подписка",
        "seller": {
          "@type": "Organization",
          "name": "Signal Pilot"
        }
      },
      {
        "@type": "Offer",
        "price": "699",
        "priceCurrency": "USD",
        "priceValidUntil": "2025-12-31",
        "availability": "https://schema.org/InStock",
        "url": "https://www.signalpilot.io/#pricing",
        "name": "Годовая подписка",
        "seller": {
          "@type": "Organization",
          "name": "Signal Pilot"
        }
      },
      {
        "@type": "Offer",
        "price": "1799",
        "priceCurrency": "USD",
        "priceValidUntil": "2025-12-31",
        "availability": "https://schema.org/InStock",
        "url": "https://www.signalpilot.io/#pricing",
        "name": "Пожизненный доступ",
        "seller": {
          "@type": "Organization",
          "name": "Signal Pilot"
        }
      }
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Перерисовываются ли сигналы?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Нулевая перерисовка. Гарантировано. Все сигналы фиксируются при закрытии свечи. Мы проверяем каждый индикатор на опережающее смещение. Если вы сможете доказать перерисовку, мы заплатим вам 100 долларов США. То, что вы видите в истории, — это именно то, что вы бы увидели в реальном времени."
        }
      },
      {
        "@type": "Question",
        "name": "Это финансовая консультация?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Нет. Signal Pilot — это только образовательный набор инструментов. Мы предоставляем инструменты технического анализа, а не инвестиционные советы, торговые рекомендации или гарантированную доходность. Вы несёте полную ответственность за свои торговые решения."
        }
      },
      {
        "@type": "Question",
        "name": "Работает ли с бесплатным TradingView?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Да! Вам просто нужно достаточно слотов для индикаторов. Бесплатные аккаунты имеют 3 слота, чего достаточно для Pentarch + 1-2 фильтра. Pro/Premium аккаунты имеют больше слотов и неограниченные оповещения."
        }
      },
      {
        "@type": "Question",
        "name": "Как быстро происходит активация?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Обычно 12-24 часа. Доступ по приглашению TradingView приходит по электронной почте. Уведомления TradingView покажут приглашение. Для срочных запросов: support@signalpilot.io"
        }
      },
      {
        "@type": "Question",
        "name": "Что входит в мой план?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Каждый план включает: Элитную семёрку, все будущие обновления, постоянную поддержку, документацию, пресеты и доступ к новым индикаторам при их запуске. Пожизненный план включает всё, навсегда."
        }
      },
      {
        "@type": "Question",
        "name": "Какие таймфреймы работают лучше всего?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Поддерживаются все таймфреймы — от 1-минутных до годовых графиков. Самые популярные: 15м-1Ч для дейтрейдинга, 4Ч-Дневной для свинг-трейдинга. 5-фазный цикл Pentarch автоматически адаптируется к вашему таймфрейму."
        }
      },
      {
        "@type": "Question",
        "name": "Можно ли использовать несколько индикаторов вместе?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Конечно! Элитная семёрка разработана для совместной работы. Популярные комбинации: Pentarch + Volume Oracle для тайминга циклов с подтверждением умных денег, или OmniDeck + Janus Atlas для полного анализа структуры рынка с ключевыми уровнями."
        }
      },
      {
        "@type": "Question",
        "name": "Какие рынки поддерживаются?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Любой рынок на TradingView: акции, индексы, форекс, криптовалюты, сырьевые товары, облигации. Если есть данные OHLC + объём, наши индикаторы работают. Протестировано на более чем 100 символах всех классов активов."
        }
      }
    ]
  }
  </script>

  <!-- Deferred CSS (non-critical, async loaded) -->
  <link rel="stylesheet" href="/assets/deferred.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/deferred.css"></noscript>

  <!-- Performance & Utilities (async) -->
  <link rel="stylesheet" href="/assets/performance.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/performance.css"></noscript>

  <!-- Cookie Consent CSS - Re-enabled after fixing scroll issue -->
  <link rel="stylesheet" href="/assets/cookie-consent.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/cookie-consent.css"></noscript>

  <!-- AI Chatbot (async) -->
  <link rel="stylesheet" href="/assets/chatbot.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/chatbot.css"></noscript>

  <!-- Device Optimizations (async) -->
  <link rel="stylesheet" href="/assets/device-optimizations.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/device-optimizations.css"></noscript>

  <!-- Micro-Interactions (async) -->
  <link rel="stylesheet" href="/assets/micro-interactions.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/micro-interactions.css"></noscript>

  <!-- Horizontal Scroll (async) -->
  <link rel="stylesheet" href="/assets/horizontal-scroll.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/horizontal-scroll.css"></noscript>

  <!-- Text Stagger Animation (async) -->
  <link rel="stylesheet" href="/assets/text-stagger.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/text-stagger.css"></noscript>

  <!-- Character Shuffle Effect (async) -->
  <link rel="stylesheet" href="/assets/character-shuffle.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/character-shuffle.css"></noscript>

  <!-- Scroll Reveal Animations (async) -->
  <link rel="stylesheet" href="/assets/scroll-reveal.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/scroll-reveal.css"></noscript>

  <!-- Premium Effects - Parallax, Glow, 3D (async) -->
  <link rel="stylesheet" href="/assets/premium-effects.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/premium-effects.css"></noscript>

  <!-- Structured Data (Schema.org) for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "SoftwareApplication",
        "name": "Signal Pilot",
        "applicationCategory": "BusinessApplication",
        "applicationSubCategory": "Trading Indicators",
        "operatingSystem": "Web Browser",
        "description": "Профессиональное определение циклов для TradingView. Pentarch™ отслеживает полные рыночные циклы (TD→IGN→WRN→CAP→BDN). Без перерисовки, проверено. 7-дневная гарантия возврата денег.",
        "url": "https://www.signalpilot.io/",
        "image": "https://www.signalpilot.io/preview.png",
        "screenshot": "https://www.signalpilot.io/preview.png",
        "offers": [
          {
            "@type": "Offer",
            "name": "Ежемесячный план",
            "price": "99.00",
            "priceCurrency": "USD",
            "priceValidUntil": "2025-12-31",
            "availability": "https://schema.org/InStock",
            "url": "https://www.signalpilot.io/#pricing",
            "description": "Гибкая ежемесячная оплата со всеми 7 элитными индикаторами"
          },
          {
            "@type": "Offer",
            "name": "Годовой план",
            "price": "699.00",
            "priceCurrency": "USD",
            "priceValidUntil": "2025-12-31",
            "availability": "https://schema.org/InStock",
            "url": "https://www.signalpilot.io/#pricing",
            "description": "Годовая оплата - экономия $489 по сравнению с ежемесячной (скидка 41%)"
          },
          {
            "@type": "Offer",
            "name": "Пожизненный доступ",
            "price": "1799.00",
            "priceCurrency": "USD",
            "priceValidUntil": "2025-12-31",
            "availability": "https://schema.org/LimitedAvailability",
            "url": "https://www.signalpilot.io/#pricing",
            "description": "Единоразовый платеж за пожизненный доступ - осталось только 350 мест"
          }
        ],
        "author": {
          "@type": "Organization",
          "name": "Signal Pilot Labs",
          "url": "https://www.signalpilot.io/"
        },
        "featureList": [
          "SP Pentarch - 5-phase cycle detection",
          "SP OmniDeck - 10-in-1 dashboard",
          "SP Volume Oracle - Institutional flow tracking",
          "SP Plutus Flow - Money flow analysis",
          "SP Janus Atlas - Multi-timeframe key levels",
          "SP Augury Grid - Support/resistance matrix",
          "SP Harmonic Oscillator - Momentum signals"
        ],
        "softwareVersion": "3.0",
        "releaseNotes": "Complete market cycle mapping with zero repaint guarantee"
      },
      {
        "@type": "Organization",
        "name": "Signal Pilot Labs",
        "url": "https://www.signalpilot.io/",
        "logo": "https://www.signalpilot.io/assets/signalpilot-logo.svg",
        "sameAs": [
          "https://twitter.com/signalpilot"
        ],
        "contactPoint": {
          "@type": "ContactPoint",
          "contactType": "Customer Support",
          "email": "support@signalpilot.io",
          "availableLanguage": ["English"]
        }
      },
      {
        "@type": "WebSite",
        "name": "Signal Pilot",
        "url": "https://www.signalpilot.io/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://www.signalpilot.io/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    ]
  }
  </script>

  <!-- Sticky buttons override - must load last to override theme-switcher.js -->
  <style>
    /* Force sticky positioning for theme selector and chatbot on ALL screen sizes */
    button.sp-theme-toggle,
    .sp-theme-toggle {
      position: fixed !important;
      bottom: 90px !important;
      right: 20px !important;
      z-index: 9999 !important;
      top: auto !important;
      left: auto !important;
      transform: none !important;
    }

    button.sp-chatbot-toggle,
    .sp-chatbot-toggle {
      position: fixed !important;
      bottom: 20px !important;
      right: 20px !important;
      z-index: 10000 !important;
      top: auto !important;
      left: auto !important;
      transform: none !important;
    }

    /* Mobile specific adjustments */
    @media (max-width: 768px) {
      button.sp-theme-toggle,
      .sp-theme-toggle {
        bottom: 90px !important;
        right: 20px !important;
        position: fixed !important;
      }

      button.sp-chatbot-toggle,
      .sp-chatbot-toggle {
        bottom: 20px !important;
        right: 20px !important;
        position: fixed !important;
      }
    }

    /* Article carousel styles */
    .article-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0,0,0,.15);
      border-color: var(--brand);
    }
    .articles-carousel::-webkit-scrollbar {
      height: 6px;
    }
    .articles-carousel::-webkit-scrollbar-track {
      background: var(--bg-elev);
      border-radius: 3px;
    }
    .articles-carousel::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 3px;
    }
    .articles-carousel::-webkit-scrollbar-thumb:hover {
      background: var(--muted);
    }

    /* MOBILE: Simple, clean mobile setup */
    @media (max-width: 768px) {
      /* Starfield container - ON TOP, blends with everything below */
      #starfield-container {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        z-index: 9999 !important;
        pointer-events: none !important;
        overflow: visible !important;
        mix-blend-mode: screen !important;
      }

      #starfield-bg {
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
        opacity: 0.6 !important;
      }

      /* Energy beam hidden on mobile for performance */
      #energy-beam-video {
        display: none !important;
      }

      /* Main content */
      main {
        position: relative !important;
        z-index: 1 !important;
      }

      /* Background layers BEHIND everything */
      .bg-stars {
        z-index: -3 !important;
        position: fixed !important;
        filter: none !important;
      }
      .sp-constellations {
        z-index: 1 !important;
        position: fixed !important;
      }

      /* Header needs high z-index for dropdown menus but FULLY transparent bg */
      header,
      header *,
      header .container,
      header .container.nav,
      header .nav-backdrop,
      header .brand,
      header nav,
      header .nav-spacer,
      header .menu-toggle,
      header .lang-dropdown,
      header .btn {
        background: none !important;
        background-color: transparent !important;
        background-image: none !important;
      }

      header {
        position: relative;
        z-index: 100;
        overflow-x: hidden !important;
        max-width: 100vw !important;
        border-bottom: none !important;
      }

      /* Prevent header content from overflowing on mobile with translated text */
      header .container.nav {
        max-width: 100vw !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }

      /* Ensure header buttons adapt to smaller text when necessary */
      header .btn,
      header #langToggle,
      header #themeToggle {
        font-size: .8rem !important;
        padding: .4rem .6rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        flex-shrink: 1 !important;
      }

      /* Language button - allow slight shrinking if needed */
      header #langToggle span {
        max-width: 30px !important;
        overflow: hidden !important;
        text-overflow: clip !important;
      }

      /* CTA button - ensure it doesn't overflow */
      header .cta-header {
        max-width: 140px !important;
        font-size: .75rem !important;
        padding: .5rem .7rem !important;
        text-overflow: ellipsis !important;
        overflow: hidden !important;
      }

      /* Reduce animations for performance - but don't kill them entirely */
      *, *::before, *::after {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
      }

      /* Ensure modals can still animate */
      #cookie-preferences-modal,
      .sp-chatbot-window,
      .mobile-nav,
      [id*="modal"] {
        animation-duration: 0.3s !important;
        transition-duration: 0.3s !important;
      }
    }

    img, video, iframe{
      max-width:100%;
      height:auto;
    }

    /* Ensure main content is above background layers */
    main{
      position:relative;
      min-height:100vh;
      background:transparent !important;
    }

    /* Make all sections transparent so constellations are visible throughout entire site */
    section, .section {
      background:transparent !important;
    }

    /* Override any inline background styles on sections */
    section[style*="background"] {
      background:transparent !important;
    }

    /* Prevent any overflow issues on mobile */
    @media (max-width:768px){
      body, main{
        overflow-x:hidden !important;
      }

      main{
        width:100%;
        display:block;
        background:transparent !important;
      }

      /* Force all sections transparent on mobile so starfield shows through */
      html, body, main, header, section, .section, .container, .stack, #main-content, .nav-backdrop,
      .hero, article, footer, aside, div:not(.card):not(.card *):not(.btn):not(.modal-card):not(.mobile-nav):not(.mobile-nav *) {
        background: transparent !important;
        background-color: transparent !important;
      }

      /* Exception: cards need their background */
      .card, .card.plan, .card.product {
        background: rgba(10, 14, 24, 0.95) !important;
      }

      /* NUCLEAR: Force starfield visible across ENTIRE page */
      body > *:not(#starfield-bg):not(#starfield-container):not(script):not(style):not(.mobile-nav):not(.mobile-nav-backdrop),
      main,
      main > *,
      main section,
      main .section,
      #main,
      #main > *,
      .hero,
      section.section,
      section#trial,
      section#inside,
      section#pricing,
      section#faq,
      section#thanks {
        background: transparent !important;
        background-color: transparent !important;
        background-image: none !important;
      }
    }


    /* Portrait desktop screens - center conduit video */
    @media (min-width: 769px) and (max-aspect-ratio: 1/1) {
      #energy-beam-video {
        left: 50% !important;
        transform: translateX(-50%) scaleX(-1) !important;
        object-position: center 30% !important;
      }
    }

    /* FINAL OVERRIDE: Force energy-beam-video to blend correctly with starfield */
    #energy-beam-video {
      mix-blend-mode: screen !important;
      background: transparent !important;
    }

    /* Ensure ALL parent elements up to body are transparent for blend to work */
    /* CRITICAL: z-index: auto removes stacking context so mix-blend-mode can reach starfield */
    .hero,
    #main-content,
    main#main,
    main {
      background: transparent !important;
      background-color: transparent !important;
      z-index: auto !important;
    }

  </style>
</head>

<body>

<!-- Scroll progress indicator -->
<div class="scroll-progress" aria-hidden="true"></div>

<!-- Starfield video background - wrapped in fixed container for iOS compatibility -->
<div id="starfield-container" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
  pointer-events: none;
  overflow: hidden;
">
  <video
    id="starfield-bg"
    autoplay
    loop
    muted
    playsinline
    disablepictureinpicture
    preload="auto"
    style="
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.5;
    "
  >
    <source src="../assets/videos/starfield-bg-mobile.mp4?v=23" type="video/mp4">
  </video>
</div>
<script>
// Starfield: Load appropriate video for device + handle visibility
(function() {
  const video = document.getElementById('starfield-bg');
  const source = video.querySelector('source');

  // Default is mobile video (set in HTML). Only switch to desktop if NOT a mobile device.
  // Check user agent - DevTools properly changes this when emulating mobile
  const isMobileDevice = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

  if (!isMobileDevice) {
    source.src = '../assets/videos/starfield-bg.mp4?v=17';
    video.load();
  }
  video.play();

  // Pause when tab hidden, resume when visible
  document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
      video.pause();
    } else {
      video.play();
    }
  });
})();
</script>

<!-- DISABLED: Replaced by starfield video -->
<!-- <div class="bg-stars" aria-hidden="true"></div> -->
<!-- <canvas id="constellations" class="sp-constellations" aria-hidden="true"></canvas> -->

  <!-- DISABLED: Aurora replaced by starfield video -->
  <!-- <div class="bg-aurora" aria-hidden="true"></div> -->



  <!-- HEADER -->

  <header>

    <div class="container nav">



      <a href="/ru/" class="brand">

        <span>Signal Pilot</span>

      </a>



      <nav id="mainnav" aria-label="Главная" style="margin-left:4rem">

        <ul>

          <li><a href="#inside">Что внутри</a></li>

          <li><a href="https://education.signalpilot.io/" target="_blank" rel="noopener">Обучение</a></li>

          <li class="nav-dropdown">
            <button class="nav-dropdown-toggle" aria-expanded="false" aria-haspopup="true">
              Ресурсы <span class="dropdown-arrow">▼</span>
            </button>
            <ul class="nav-dropdown-menu">
              <li><a href="/ru/chronicle/">Хроника</a></li>
              <li><a href="https://docs.signalpilot.io/" target="_blank" rel="noopener">Документация</a></li>
              <li><a href="https://blog.signalpilot.io/ru/" target="_blank" rel="noopener">Блог</a></li>
              <li><a href="https://education.signalpilot.io/calculators.html" target="_blank" rel="noopener">Калькуляторы</a></li>
              <li><a href="/faq.html">Центр FAQ</a></li>
            </ul>
          </li>

          <li><a href="#pricing">Цены</a></li>

          <li><a href="/affiliates.html">Партнёрская программа</a></li>

        </ul>

      </nav>

      <div class="nav-spacer"></div>






      <a class="btn btn-primary cta-header" href="#trial">7 Дней Бесплатно →</a>



      <button class="menu-toggle" id="menuToggle" aria-expanded="false" aria-controls="mainnav">Меню ☰</button>

    </div>



    <div class="nav-backdrop" id="navBackdrop" aria-hidden="true"></div>

  </header>



  <main id="main">

    <!-- HERO -->

    <section id="main-content" class="hero" style="position:relative;overflow:visible">

      <!-- EPIC Energy Beam v2 -->
      <div id="energy-beam-container" style="position:absolute;top:-70px;left:0;width:100%;height:calc(100% + 70px);pointer-events:none;z-index:0;overflow:visible;display:none"></div>

      <!-- Energy Beam Video - single seamless ping-pong loop -->
      <video
        id="energy-beam-video"
        autoplay
        loop
        muted
        playsinline
        disablepictureinpicture
        preload="auto"
        style="
          position: absolute;
          top: -140px;
          left: -70px;
          height: calc(100% + 210px);
          width: auto;
          pointer-events: none;
          z-index: 0;
          object-fit: cover;
          object-position: left 30%;
          opacity: 1;
          transform: translateZ(0) scaleX(-1);
          mix-blend-mode: screen;
          -webkit-mask-image: linear-gradient(to bottom, black 0%, black 70%, transparent 100%);
          mask-image: linear-gradient(to bottom, black 0%, black 70%, transparent 100%);
        "
      >
        <source src="../assets/videos/conduithero2.mp4?v=1" type="video/mp4">
      </video>
      <script>
      // Energy beam: Pause when out of view to save GPU resources
      (function() {
        const video = document.getElementById('energy-beam-video');
        if (!video) return;

        // Pause when tab hidden
        document.addEventListener('visibilitychange', function() {
          if (document.hidden) video.pause();
          else if (video.isInView) video.play();
        });

        // Pause when scrolled out of view (saves GPU on 4K video)
        video.isInView = true;
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            video.isInView = entry.isIntersecting;
            if (entry.isIntersecting && !document.hidden) {
              video.play();
            } else {
              video.pause();
            }
          });
        }, { threshold: 0, rootMargin: '100px' });
        observer.observe(video);
      })();
      </script>

      <!-- Animated gradient orbs with parallax -->
      <!-- Parallax orbs removed for performance -->


      <div class="container" style="position:relative;z-index:1">

        <!-- HERO HEADER - Centered -->
        <div style="text-align:center;margin-bottom:3rem" data-reveal="fade-up">

          <h1 class="headline xl">
            <span style="font-size:0.5em;display:block;margin-bottom:0.5rem;color:#9ca3af !important;-webkit-text-fill-color:#9ca3af !important;font-weight:600;text-transform:uppercase;letter-spacing:0.05em">Профессиональные индикаторы TradingView</span>
            <span class="shimmer-text">Преимущество не в том, чтобы видеть больше. А в том, чтобы видеть то, что важно.</span>
          </h1>

          <p id="hero-description" style="color:var(--muted);font-size:1.05rem;line-height:1.6;max-width:900px;margin:1.5rem auto 0;white-space:nowrap">
            Определение циклов без перерисовки • 7 премиальных индикаторов для <span id="typed-text" style="color:var(--brand);font-weight:600">серьёзных трейдеров</span><span id="typing-cursor" style="color:var(--brand);font-weight:300;animation:blink 1s step-end infinite">|</span>
          </p>

        </div>

        <!-- HERO VIDEO - Full Width -->
        <div style="margin-bottom:3rem">

            <!-- PENTARCH CHART SHOWCASE -->
            <div style="position:relative;border-radius:8px;overflow:hidden;background:#0a0e18;margin:0 auto;aspect-ratio:245/106;">

              <!-- Chart Video -->
              <video
                id="heroVideo"
                src="assets/videos/hero-demo.mp4"
                autoplay
                loop
                muted
                playsinline
                webkit-playsinline
                preload="auto"
                poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 600'%3E%3Crect fill='%230a0e18' width='1200' height='600'/%3E%3C/svg%3E"
                style="width:100%;height:100%;display:block;object-fit:cover;object-position:center;background:#0a0e18;pointer-events:none;position:absolute;top:0;left:0"
                width="1200"
                height="600"
              >
                <source src="assets/videos/hero-demo.mp4" type="video/mp4">
                Ваш браузер не поддерживает видео.
              </video>
              
              <!-- Overlay Badge - Reduced Opacity -->
              <div style="position:absolute;top:1rem;right:1rem;background:rgba(12,16,27,.6);backdrop-filter:blur(8px);padding:.5rem .8rem;border-radius:8px;border:1px solid rgba(91,138,255,.25);display:flex;align-items:center;gap:.5rem;opacity:0.85">
                <span style="width:6px;height:6px;border-radius:50%;background:#3ed598;box-shadow:0 0 8px rgba(62,213,152,.6)"></span>
                <span style="font-size:.8rem;font-weight:700;color:#3ed598">ЖИВОЙ ГРАФИК</span>
              </div>
            </div>
            
            <!-- Video Force Play Script + Mobile Fix -->
            <script>
              (function() {
                const video = document.getElementById('heroVideo');
                if (!video) {
                  console.error('Hero video element not found!');
                  return;

                // Set playback speed (1.0 = normal, 1.5 = 50% faster, 2.25 = 2.25x speed, 2.0 = 2x speed)
                video.playbackRate = 2.25;
                }

                // ALL DEVICES: Force dimensions and visibility - SUPER VISIBLE
                function forceVideoVisible() {
                  const width = window.innerWidth;
                  const isMobile = width <= 768;
                  const isTablet = width > 768 && width <= 1024;
                  const isDesktop = width > 1024;

                  // Force video container styles FOR ALL DEVICES
                  const container = video.parentElement;
                  if (container) {
                    container.style.display = 'block';
                    container.style.visibility = 'visible';
                    container.style.background = '#0a0e18';

                    if (isMobile) {
                      container.style.minHeight = '300px';
                    }
                  }

                  // Force video element styles - VISIBLE ON ALL DEVICES
                  video.style.display = 'block';
                  video.style.visibility = 'visible';
                  video.style.opacity = '1';
                  video.style.width = '100%';
                  video.style.objectFit = 'cover';
                  video.style.background = '#0a0e18';

                  // Device-specific sizing
                  if (isMobile) {
                    video.style.minHeight = '300px';
                    video.style.maxHeight = '550px';
                    video.style.height = 'auto';
                    video.style.borderRadius = '12px';
                  } else if (isTablet) {
                    video.style.height = '100%';
                    video.style.maxHeight = '600px';
                  } else {
                    // Desktop
                    video.style.height = '100%';
                  }
                }

                // Run on load
                forceVideoVisible();

                // Run after delays to override other scripts
                setTimeout(forceVideoVisible, 100);
                setTimeout(forceVideoVisible, 500);
                setTimeout(forceVideoVisible, 1000);

                // Re-run on resize
                window.addEventListener('resize', forceVideoVisible);

                // Aggressive play attempts
                function tryPlay(source) {
                  video.play().then(() => {
                    // Video playing successfully
                  }).catch(e => {
                    // Autoplay blocked or failed
                  });
                }

                // IMMEDIATE play attempt - before anything else
                video.play().catch(() => {});

                // Try to play immediately
                tryPlay('initial');

                // Force play after short delay
                setTimeout(() => {
                  video.play().catch(() => {});
                }, 100);

                setTimeout(() => {
                  video.play().catch(() => {});
                }, 300);

                // Wait for loadeddata event
                video.addEventListener('loadeddata', function() {
                  tryPlay('loadeddata');
                  // Extra play attempt
                  setTimeout(() => video.play().catch(() => {}), 50);
                }, { once: true });

                // Wait for canplay event
                video.addEventListener('canplay', function() {
                  tryPlay('canplay');
                }, { once: true });

                // Wait for canplaythrough event (fully loaded)
                video.addEventListener('canplaythrough', function() {
                  tryPlay('canplaythrough');
                }, { once: true });

                // Retry play on user interaction
                let played = false;
                document.addEventListener('click', function() {
                  if (!played && video.paused) {
                    tryPlay('click');
                    played = true;
                  }
                });

                // Also try to play on touch (mobile)
                document.addEventListener('touchstart', function() {
                  if (!played && video.paused) {
                    tryPlay('touch');
                    played = true;
                  }
                });

                // Ensure loop
                video.addEventListener('ended', function() {
                  video.currentTime = 0;
                  video.play();
                });

                // Check if video is actually playing
                setTimeout(() => {
                  // Silent check - no logging needed in production
                  if (video.paused) {
                    // Video requires user interaction
                  }
                }, 2000);
              })();
            </script>

            </div>

            <!-- Signal Legend - Improved Readability -->
            <div class="video-caption" style="padding:2rem 1rem;text-align:center;max-width:1000px;margin:0 auto">
              <p style="margin:0 0 1.5rem 0;font-size:1rem;line-height:1.7;color:rgba(255,255,255,0.9)">
                <strong>Пять сигналов отображают полный рыночный цикл.</strong> TD появляется, когда продажи истощаются. CAP появляется, когда покупки достигают кульминации. Вы не угадываете разворот, вы видите изменение структуры. Готовьтесь к переходам. Не гонитесь за ними.
              </p>
              <div class="signal-legend" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;max-width:1200px;margin:0 auto">
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(168,85,247,.08);border:1px solid rgba(168,85,247,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#a855f7;box-shadow:0 0 8px rgba(168,85,247,.4);flex-shrink:0"></span>
                  <strong style="color:#c084fc;font-size:.9rem;white-space:nowrap;flex-shrink:0">TD</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ Касание (Фаза накопления)</span>
                </div>
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(20,184,166,.08);border:1px solid rgba(20,184,166,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#14b8a6;box-shadow:0 0 8px rgba(20,184,166,.4);flex-shrink:0"></span>
                  <strong style="color:#2dd4bf;font-size:.9rem;white-space:nowrap;flex-shrink:0">IGN</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ Зажигание (Фаза роста)</span>
                </div>
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(249,115,22,.08);border:1px solid rgba(249,115,22,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#f97316;box-shadow:0 0 8px rgba(249,115,22,.4);flex-shrink:0"></span>
                  <strong style="color:#fb923c;font-size:.9rem;white-space:nowrap;flex-shrink:0">CAP</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ Кульминация (Фаза кульминации)</span>
                </div>
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(234,179,8,.08);border:1px solid rgba(234,179,8,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#eab308;box-shadow:0 0 8px rgba(234,179,8,.4);flex-shrink:0"></span>
                  <strong style="color:#facc15;font-size:.9rem;white-space:nowrap;flex-shrink:0">WRN</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ Предупреждение (Фаза распределения)</span>
                </div>
                <div class="signal-item" style="display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.2);border-radius:8px;min-width:0">
                  <span class="signal-icon" style="width:8px;height:8px;border-radius:50%;background:#ef4444;box-shadow:0 0 8px rgba(239,68,68,.4);flex-shrink:0"></span>
                  <strong style="color:#f87171;font-size:.9rem;white-space:nowrap;flex-shrink:0">BDN</strong>
                  <span style="color:rgba(255,255,255,.7);font-size:.85rem">→ Пробой (Фаза спада)</span>
                </div>
              </div>
            </div>

      </div>

    </section>

    <!-- MICRO-STORY NARRATIVE SECTION -->
    <section class="section" style="padding:4rem 0;">
      <div class="container" style="max-width:900px">

        <!-- HEADLINE -->
        <h2 class="headline lg" style="text-align:center;margin-bottom:2rem">
          <span class="shimmer-text">Вы учились читать графики у незнакомцев.<br>Пора увидеть самому.</span>
        </h2>

        <!-- SHORT STORY -->
        <div style="text-align:center;max-width:700px;margin:0 auto 2.5rem">
          <p style="color:var(--muted);font-size:1.15rem;line-height:1.8">
            Вы следовали сигналам, которые провалились. Видели, как сетапы исчезают за ночь.<br>
            Накапливали индикаторы, пока график не стал похож на абстрактное искусство.<br>
            Ничто из этого не сделало вас увереннее. Только зависимее.
          </p>
        </div>

        <!-- THE TURN -->
        <div style="text-align:center;margin-bottom:3rem">
          <p class="the-turn-text" style="font-size:1.5rem;font-weight:700;color:var(--brand)">
            «А что, если проблема никогда не была в вас?»
          </p>
        </div>

        <!-- BEFORE/AFTER TRANSFORMATION -->
        <div style="max-width:800px;margin:0 auto 3rem" class="transformation-grid">

          <!-- Header Row -->
          <div style="display:grid;grid-template-columns:1fr 2rem 1fr;gap:1rem;margin-bottom:1rem">
            <div style="text-align:right;font-size:0.85rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:0.1em">До</div>
            <div></div>
            <div style="text-align:left;font-size:0.85rem;font-weight:700;color:var(--brand);text-transform:uppercase;letter-spacing:0.1em">После</div>
          </div>

          <!-- Row 1 -->
          <div style="display:grid;grid-template-columns:1fr 2rem 1fr;gap:1rem;align-items:center;margin-bottom:0.75rem">
            <span style="text-align:right;color:rgba(255,255,255,0.6);font-size:1rem">Ожидание сигнала</span>
            <span style="text-align:center;color:var(--brand);font-size:1.25rem">→</span>
            <span style="text-align:left;color:var(--text);font-size:1rem;font-weight:500">Видеть истощение самому</span>
          </div>

          <!-- Row 2 -->
          <div style="display:grid;grid-template-columns:1fr 2rem 1fr;gap:1rem;align-items:center;margin-bottom:0.75rem">
            <span style="text-align:right;color:rgba(255,255,255,0.6);font-size:1rem">Перерисовывающиеся сигналы</span>
            <span style="text-align:center;color:var(--brand);font-size:1.25rem">→</span>
            <span style="text-align:left;color:var(--text);font-size:1rem;font-weight:500">Правда, которая держится <span style="color:var(--brand);font-size:0.85rem">(награда $100)</span></span>
          </div>

          <!-- Row 3 -->
          <div style="display:grid;grid-template-columns:1fr 2rem 1fr;gap:1rem;align-items:center;margin-bottom:0.75rem">
            <span style="text-align:right;color:rgba(255,255,255,0.6);font-size:1rem">Хаос индикаторов</span>
            <span style="text-align:center;color:var(--brand);font-size:1.25rem">→</span>
            <span style="text-align:left;color:var(--text);font-size:1rem;font-weight:500">Только 7, которые вам нужны</span>
          </div>

          <!-- Row 4 -->
          <div style="display:grid;grid-template-columns:1fr 2rem 1fr;gap:1rem;align-items:center;margin-bottom:0.75rem">
            <span style="text-align:right;color:rgba(255,255,255,0.6);font-size:1rem">Сомнение</span>
            <span style="text-align:center;color:var(--brand);font-size:1.25rem">→</span>
            <span style="text-align:left;color:var(--text);font-size:1rem;font-weight:500">Убеждённость</span>
          </div>

        </div>

        <!-- PROOF BAR -->
        <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:1.5rem;padding:1.5rem;background:rgba(91,138,255,.05);border:1px solid rgba(91,138,255,.15);border-radius:12px;margin-bottom:2rem">
          <span style="color:var(--text);font-size:0.95rem;font-weight:500">📖 12 Хроник</span>
          <span style="color:var(--muted)">·</span>
          <span style="color:var(--text);font-size:0.95rem;font-weight:500">🎓 82 Урока</span>
          <span style="color:var(--muted)">·</span>
          <span style="color:var(--text);font-size:0.95rem;font-weight:500">📚 50+ Страниц документации</span>
          <span style="color:var(--muted)">·</span>
          <span style="color:var(--text);font-size:0.95rem;font-weight:500">💰 $100 Награда за неперерисовку</span>
        </div>

        <!-- SECONDARY LINK -->
        <div style="text-align:center">
          <a href="/ru/chronicle/" style="color:var(--muted);font-size:0.95rem;text-decoration:none;transition:color 0.2s">
            Читайте историю происхождения: <span style="color:var(--brand);font-weight:600">Рождение Элитной Семёрки →</span>
          </a>
        </div>

      </div>
    </section>

    <!-- Mobile-friendly transformation grid -->
    <style>
      @media (max-width: 600px) {
        /* Reduce "The Turn" font size to prevent word breaking */
        .the-turn-text {
          font-size: 1.15rem !important;
        }
        /* Stack rows vertically with spacing */
        .transformation-grid > div {
          grid-template-columns: 1fr !important;
          gap: 0.25rem !important;
          text-align: center !important;
          margin-bottom: 1.5rem !important;
        }
        /* Hide the header row */
        .transformation-grid > div:first-child {
          display: none !important;
        }
        /* Hide the horizontal arrow */
        .transformation-grid > div > span:nth-child(2) {
          display: none !important;
        }
        /* Style before text */
        .transformation-grid > div > span:first-child {
          text-align: center !important;
          font-size: 0.9rem !important;
        }
        /* Add down arrow after before text */
        .transformation-grid > div > span:first-child::after {
          content: '↓';
          display: block;
          color: var(--brand);
          font-size: 1rem;
          margin: 0.25rem 0;
        }
        /* Style after text */
        .transformation-grid > div > span:last-child {
          text-align: center !important;
        }
      }
    </style>

    <!-- FREE TRIAL SECTION -->
    <section id="trial" class="section" style="padding:4rem 0;">
      <div class="container" style="max-width:800px">

        <div style="text-align:center;margin-bottom:3rem" data-reveal="fade-up">
          <h2 class="headline lg" style="margin-bottom:1rem">
            Попробуйте все 7 индикаторов бесплатно в течение 7 дней
          </h2>

          <p style="color:var(--muted);font-size:1.15rem;line-height:1.6;max-width:600px;margin:0 auto">
            Посмотрите определение циклов Pentarch в действии. Настройте свои алерты.
            Протестируйте свои стратегии. <strong style="color:var(--brand)">Никаких рисков, никаких обязательств.</strong>
          </p>
        </div>

        <!-- Trust Badge -->
        <div style="display:flex;justify-content:center;margin-bottom:3rem" data-reveal="scale" data-reveal-delay="200">
          <div style="display:flex;align-items:center;gap:0.5rem;background:rgba(91,138,255,.08);border:1px solid rgba(91,138,255,.25);padding:0.75rem 1.25rem;border-radius:8px">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg>
            <span style="font-size:0.9rem;font-weight:600;color:#5b8aff">Без кредитной карты • Доступ в течение 24ч</span>
          </div>
        </div>

        <!-- Trial Signup Form -->
        <div style="background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(91,138,255,.02));padding:3rem;border-radius:16px;border:1px solid rgba(91,138,255,.2)" data-reveal="fade-up" data-reveal-delay="300">

          <form id="trialForm" style="max-width:500px;margin:0 auto">

            <!-- Honeypot field - hidden from humans, catches bots -->
            <input type="text" name="website" id="website" style="position:absolute;left:-5000px" tabindex="-1" autocomplete="off">

            <div style="margin-bottom:1.5rem">
              <label for="trialEmail" style="display:block;font-weight:600;margin-bottom:0.5rem;color:var(--text)">
                Адрес электронной почты
              </label>
              <input
                type="email"
                id="trialEmail"
                name="email"
                placeholder="ваш@email.com"
                required
                style="width:100%;padding:1rem;border-radius:8px;border:1px solid var(--border);background:var(--bg-soft);color:var(--text);font-size:1rem;font-family:inherit"
              >
            </div>

            <div style="margin-bottom:1.5rem">
              <label for="trialTvUsername" style="display:block;font-weight:600;margin-bottom:0.5rem;color:var(--text)">
                Имя пользователя TradingView
              </label>
              <input
                type="text"
                id="trialTvUsername"
                name="tradingview_username"
                placeholder="Ваше имя пользователя TradingView"
                required
                style="width:100%;padding:1rem;border-radius:8px;border:1px solid var(--border);background:var(--bg-soft);color:var(--text);font-size:1rem;font-family:inherit"
              >
              <p style="font-size:0.85rem;color:var(--muted-2);margin-top:0.5rem">
                Мы отправим приглашение на индикатор на этот аккаунт TradingView
              </p>
            </div>

            <label class="consent" style="margin-bottom:1.5rem">
              <input type="checkbox" id="trialConsent" required>
              <span>
                Я понимаю, что <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span> носит только образовательный характер. Никаких финансовых советов.
                <a href="/ru/terms.html" style="color:var(--brand)">Условия</a>
              </span>
            </label>

            <button
              type="submit"
              class="btn btn-primary"
              style="width:100%;padding:1.25rem;font-size:1.1rem;font-weight:700"
            >
              7 Дней Бесплатно →
            </button>

            <p style="text-align:center;font-size:0.85rem;color:var(--muted-2);margin-top:1rem">
              Кредитная карта не требуется. Пробный период истекает через 7 дней, никаких платежей.
            </p>

          </form>

          <!-- Success Message (hidden by default) -->
          <div id="trialSuccess" style="display:none;text-align:center;padding:2rem">
            <div style="font-size:3rem;margin-bottom:1rem">🎉</div>
            <h3 style="font-size:1.5rem;font-weight:700;color:var(--brand);margin-bottom:1rem">Пробный период активирован!</h3>
            <p style="color:var(--text);margin-bottom:0.5rem">
              Проверьте свою почту для подтверждения и следующих шагов.
            </p>
            <p style="color:var(--muted);font-size:0.9rem;margin-bottom:0.5rem">
              Ваше приглашение в TradingView прибудет в течение 24 часов.
            </p>
            <p style="color:var(--muted-2);font-size:0.85rem;margin-bottom:2rem">
              Вопросы? Email <a href="mailto:support@signalpilot.io" style="color:var(--brand);text-decoration:none">support@signalpilot.io</a>
            </p>

            <!-- Education CTA -->
            <div style="background:linear-gradient(135deg,rgba(62,213,152,.08),rgba(62,213,152,.02));padding:2rem;border-radius:12px;border:1px solid rgba(62,213,152,.2);margin-top:1.5rem">
              <p style="color:var(--text);font-weight:600;margin-bottom:0.75rem;font-size:1.05rem">
                Пока вы ждёте, начните обучение:
              </p>
              <p style="color:var(--muted);font-size:0.9rem;margin-bottom:1.25rem">
                Получите доступ к нашему полному образовательному центру из 82 уроков бесплатно
              </p>
              <a href="https://education.signalpilot.io" target="_blank" rel="noopener" class="btn btn-primary" style="display:inline-flex;align-items:center;gap:0.5rem">
                Начать обучение бесплатно →
              </a>
            </div>
          </div>

        </div>

        <!-- Social Proof -->
        <div style="text-align:center;margin-top:2rem">
          <p style="font-size:0.9rem;color:var(--muted-2)">
            После 7 дней: Подпишитесь для продолжения ($99/месяц) или пробный период истекает
          </p>
        </div>

      </div>
    </section>

    <!-- PENTARCH IN ACTION - PROOF GALLERY -->
    <section class="section" style="padding:4rem 0;overflow:visible">

      <div class="container">

        <!-- Section Header -->
        <div style="text-align:center;margin-bottom:3rem" data-reveal="fade-up">
          <h2 class="headline lg" style="margin-bottom:1rem">Посмотрите в действии</h2>
          <p class="note" style="max-width:55ch;margin:0 auto;color:var(--muted)">
            Преимущество, визуализированное.
          </p>
        </div>

        <!-- Carousel Container -->
        <div style="position:relative;max-width:1200px;margin:0 auto">

          <!-- Navigation Arrows -->
          <button id="carousel-prev" aria-label="Предыдущий график" style="position:absolute;left:-60px;top:50%;transform:translateY(-50%);z-index:10;background:var(--bg-elev);border:2px solid var(--brand);border-radius:50%;width:48px;height:48px;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;color:var(--brand);font-size:1.5rem;box-shadow:0 4px 12px rgba(0,0,0,0.3)">
            ‹
          </button>

          <button id="carousel-next" aria-label="Следующий график" style="position:absolute;right:-60px;top:50%;transform:translateY(-50%);z-index:10;background:var(--bg-elev);border:2px solid var(--brand);border-radius:50%;width:48px;height:48px;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;color:var(--brand);font-size:1.5rem;box-shadow:0 4px 12px rgba(0,0,0,0.3)">
            ›
          </button>

          <!-- Scrollable Gallery -->
          <div id="pentarch-carousel" role="region" aria-label="Карусель примеров графиков" aria-live="polite" style="display:flex;gap:1.5rem;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;padding:1rem 0;-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none">

            <!-- Chart 1 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/1.webp" alt="Pentarch indicator on Apple stock 12-hour chart showing multi-timeframe cycle analysis with TD touchdown signals and phase markers" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <!-- Caption Overlay -->
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-1">
                  Apple: Точность мультитаймфрейма
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  12h
                </p>
              </div>
            </div>

            <!-- Chart 2 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/2.webp" alt="Pentarch indicator on Bitcoin weekly chart displaying long-term trend detection with 5-phase cycle analysis and momentum tracking" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-2">
                  Bitcoin: Мастерство долгосрочных трендов
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1W
                </p>
              </div>
            </div>

            <!-- Chart 3 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/3.webp" alt="Pentarch indicator on Dollar Index weekly chart showing currency trend signals with cycle phase detection and strength indicators" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-3">
                  Dollar Index: Валютные сигналы
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1W
                </p>
              </div>
            </div>

            <!-- Chart 4 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/4.webp" alt="Pentarch indicator on Ethereum daily chart displaying crypto momentum alerts with phase transition markers and TD signals" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-4">
                  Ethereum: Криптоалерты моментума
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1D
                </p>
              </div>
            </div>

            <!-- Chart 5 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/5.webp" alt="Pentarch indicator on EUR/USD monthly chart showing forex trend detection with long-term cycle analysis and reversal signals" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-5">
                  EUR/USD: Определение трендов форекс
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1M
                </p>
              </div>
            </div>

            <!-- Chart 6 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/6.webp" alt="Pentarch indicator on MicroStrategy 3-day chart tracking volatility with cycle phases and momentum strength indicators" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-6">
                  MicroStrategy: Отслеживание волатильности
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  3D
                </p>
              </div>
            </div>

            <!-- Chart 7 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/7.webp" alt="Pentarch indicator on S&P 500 2-day chart providing index intelligence with phase-based analysis and trend confirmation" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-7">
                  S&P 500: Аналитика индексов
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  2D
                </p>
              </div>
            </div>

            <!-- Chart 8 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/8.webp" alt="Pentarch indicator on Tesla weekly chart identifying swing trade signals with cycle timing and TD touchdown confirmations" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-8">
                  Tesla: Сигналы свинг-трейдинга
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1W
                </p>
              </div>
            </div>

            <!-- Chart 9 -->
            <div class="carousel-item" style="flex:0 0 100%;scroll-snap-align:center;position:relative;border-radius:12px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 8px 32px rgba(0,0,0,0.3);background:var(--bg-soft)">
              <img src="/assets/images/pentarch/9.webp" alt="Pentarch indicator on Gold daily chart showing safe haven timing with precise cycle phases and reversal detection" loading="lazy" width="2770" height="1516" style="width:100%;height:100%;display:block;object-fit:cover">
              <div style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(5,7,13,0.95),transparent);padding:2rem 1.5rem 1.5rem;color:var(--text);pointer-events:none">
                <p style="margin:0;font-size:1.1rem;font-weight:700;color:var(--brand)" id="caption-9">
                  Золото: Тайминг безопасной гавани
                </p>
                <p style="margin:0.25rem 0 0 0;font-size:0.85rem;color:rgba(255,255,255,0.7)">
                  1D
                </p>
              </div>
            </div>

          </div>

          <!-- Hide scrollbar -->
          <style>
            #pentarch-carousel::-webkit-scrollbar {
              display: none;
            }

            #carousel-prev:hover,
            #carousel-next:hover {
              background: var(--brand);
              color: var(--bg);
              transform: translateY(-50%) scale(1.1);
              box-shadow: 0 6px 20px rgba(91,138,255,0.4);
            }

            .carousel-item {
              cursor: zoom-in !important;
            }

            .carousel-item:hover {
              border-color: var(--brand);
              box-shadow: 0 8px 32px rgba(91,138,255,0.3);
              transition: all 0.3s ease;
              transform: scale(1.02);
            }

            .carousel-item img {
              cursor: zoom-in !important;
              pointer-events: auto !important;
            }

            /* Mobile: Hide arrows, optimize gap for touch */
            @media (max-width: 768px) {
              #carousel-prev,
              #carousel-next {
                display: none;
              }

              #pentarch-carousel {
                gap: 0.75rem; /* Increased for better visual separation on mobile */
              }

              /* Ensure carousel items maintain proper aspect ratio on mobile */
              .carousel-item {
                min-height: 200px;
              }

              .carousel-item img {
                object-fit: cover;
                width: 100%;
                height: 100%;
              }
            }

            /* Tablet optimization */
            @media (min-width: 769px) and (max-width: 1024px) {
              #carousel-prev {
                left: -50px;
              }

              #carousel-next {
                right: -50px;
              }
            }

            /* Lightbox styles */
            #carousel-lightbox {
              display: none;
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              z-index: 99999;
            }

            #carousel-lightbox.active {
              display: flex;
              align-items: center;
              justify-content: center;
            }

            .lightbox-overlay {
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(5, 7, 13, 0.95);
              backdrop-filter: blur(10px);
            }

            .lightbox-content {
              position: relative;
              z-index: 100000;
              max-width: 95vw;
              max-height: 95vh;
              display: flex;
              flex-direction: column;
              align-items: center;
              animation: lightboxZoom 0.3s ease-out;
            }

            @keyframes lightboxZoom {
              from {
                transform: scale(0.8);
                opacity: 0;
              }
              to {
                transform: scale(1);
                opacity: 1;
              }
            }

            .lightbox-image {
              max-width: 100%;
              max-height: 85vh;
              width: auto;
              height: auto;
              border-radius: 12px;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
              border: 2px solid rgba(91, 138, 255, 0.3);
            }

            .lightbox-close {
              position: absolute;
              top: -50px;
              right: 0;
              background: rgba(255, 255, 255, 0.1);
              border: 2px solid rgba(255, 255, 255, 0.3);
              color: white;
              font-size: 2rem;
              width: 45px;
              height: 45px;
              border-radius: 50%;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              transition: all 0.3s ease;
              line-height: 1;
            }

            .lightbox-close:hover {
              background: var(--brand);
              border-color: var(--brand);
              transform: rotate(90deg) scale(1.1);
            }

            .lightbox-caption {
              margin-top: 1rem;
              color: var(--brand);
              font-size: 1.2rem;
              font-weight: 700;
              text-align: center;
              padding: 0.5rem 1rem;
              background: rgba(91, 138, 255, 0.1);
              border-radius: 8px;
              border: 1px solid rgba(91, 138, 255, 0.3);
            }

            /* Mobile lightbox adjustments */
            @media (max-width: 768px) {
              .lightbox-content {
                max-width: 98vw;
                max-height: 98vh;
              }

              .lightbox-image {
                max-height: 80vh;
              }

              .lightbox-close {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
              }

              .lightbox-caption {
                font-size: 1rem;
                margin-top: 0.5rem;
              }
            }
          </style>

          <!-- Carousel Navigation Script -->
          <script>
            (function() {
              const carousel = document.getElementById('pentarch-carousel');
              const prevBtn = document.getElementById('carousel-prev');
              const nextBtn = document.getElementById('carousel-next');
              const items = carousel.querySelectorAll('.carousel-item');
              const carouselImages = carousel.querySelectorAll('.carousel-item img');
              let currentIndex = 0;
              let autoScrollInterval;

              // Scroll to specific index
              function scrollToIndex(index) {
                if (index < 0) index = items.length - 1;
                if (index >= items.length) index = 0;
                currentIndex = index;

                const itemWidth = items[0].offsetWidth;
                // 1.5rem on desktop, 0.5rem on mobile
                const gap = window.innerWidth <= 768 ? 8 : 24;
                carousel.scrollLeft = (itemWidth + gap) * currentIndex;
              }

              // Navigation
              prevBtn.addEventListener('click', () => {
                scrollToIndex(currentIndex - 1);
                resetAutoScroll();
              });

              nextBtn.addEventListener('click', () => {
                scrollToIndex(currentIndex + 1);
                resetAutoScroll();
              });

              // Auto-scroll every 10 seconds
              function startAutoScroll() {
                autoScrollInterval = setInterval(() => {
                  scrollToIndex(currentIndex + 1);
                }, 10000);
              }

              function resetAutoScroll() {
                clearInterval(autoScrollInterval);
                startAutoScroll();
              }

              // Start auto-scroll
              startAutoScroll();

              // Pause on hover
              carousel.addEventListener('mouseenter', () => {
                clearInterval(autoScrollInterval);
              });

              carousel.addEventListener('mouseleave', () => {
                startAutoScroll();
              });

              // Update index on manual scroll (mobile swipe)
              let scrollTimeout;
              carousel.addEventListener('scroll', () => {
                try {
                  clearTimeout(scrollTimeout);
                  scrollTimeout = setTimeout(() => {
                    try {
                      const scrollLeft = carousel.scrollLeft;
                      const itemWidth = items[0].offsetWidth;
                      // 1.5rem on desktop, 0.5rem on mobile
                      const gap = window.innerWidth <= 768 ? 8 : 24;
                      currentIndex = Math.round(scrollLeft / (itemWidth + gap));
                      updateDots();
                    } catch(e) {
                      // Silently handle carousel scroll errors
                    }
                  }, 100);
                } catch(e) {
                  // Silently handle scroll event errors
                }
              }, { passive: true });

              // Keyboard navigation (left/right arrows)
              document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                  scrollToIndex(currentIndex - 1);
                  resetAutoScroll();
                } else if (e.key === 'ArrowRight') {
                  scrollToIndex(currentIndex + 1);
                  resetAutoScroll();
                }
              });

              // Pagination dots
              const dotsContainer = document.getElementById('carousel-dots');
              const dots = [];

              // Create dots only if container exists
              if (dotsContainer) {
                for (let i = 0; i < items.length; i++) {
                  const dot = document.createElement('button');
                  dot.className = 'carousel-dot';
                  dot.setAttribute('aria-label', `Go to chart ${i + 1}`);
                  dot.addEventListener('click', () => {
                    scrollToIndex(i);
                    resetAutoScroll();
                  });
                  dots.push(dot);
                  dotsContainer.appendChild(dot);
                }
              }

              // Update active dot
              function updateDots() {
                if (dotsContainer && dots.length > 0) {
                  dots.forEach((dot, i) => {
                    if (i === currentIndex) {
                      dot.classList.add('active');
                    } else {
                      dot.classList.remove('active');
                    }
                  });
                }
              }

              // Initialize dots
              updateDots();

              // Aggressive image preloading to fix lazy loading issues on fast scroll
              // Remove lazy loading attribute and force immediate load
              if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries) => {
                  try {
                    entries.forEach(entry => {
                      const img = entry.target;
                      // Preload images when they're within 800px of viewport
                      if (entry.isIntersecting || entry.intersectionRatio > 0) {
                        // Force load by removing lazy attribute
                        img.removeAttribute('loading');
                        // Ensure src is set (in case it was data-src)
                        if (img.dataset.src) {
                          img.src = img.dataset.src;
                          img.removeAttribute('data-src');
                        }
                        imageObserver.unobserve(img);
                      }
                    });
                  } catch(e) {
                    // Silently handle image loading errors
                  }
                }, {
                  root: null,
                  rootMargin: '800px', // Large margin to preload before visible
                  threshold: 0
                });

                // Observe all carousel images
                carouselImages.forEach(img => {
                  imageObserver.observe(img);
                });
              } else {
                // Fallback: immediately load all images if IntersectionObserver not supported
                carouselImages.forEach(img => {
                  img.removeAttribute('loading');
                });
              }

              // Carousel item click handlers - stop auto-scroll and open lightbox
              items.forEach((item, index) => {
                item.style.cursor = 'zoom-in';

                // Add click handler to both item and image
                const clickHandler = (e) => {
                  // Don't trigger if clicking on navigation buttons
                  if (e.target.closest('#carousel-prev') || e.target.closest('#carousel-next')) {
                    return;
                  }
                  e.preventDefault();
                  e.stopPropagation();
                  clearInterval(autoScrollInterval);

                  const img = item.querySelector('img');
                  if (img && img.src) {
                    console.log('Opening lightbox for image:', img.alt);
                    openLightbox(img.src, img.alt, index);
                  }
                };

                item.addEventListener('click', clickHandler);

                // Also add to the image directly
                const img = item.querySelector('img');
                if (img) {
                  img.style.cursor = 'zoom-in';
                  img.style.pointerEvents = 'auto';
                  img.addEventListener('click', clickHandler);
                }
              });

              // Lightbox functionality
              function openLightbox(imageSrc, imageAlt, imageIndex) {
                // Create lightbox if it doesn't exist
                let lightbox = document.getElementById('carousel-lightbox');
                if (!lightbox) {
                  lightbox = document.createElement('div');
                  lightbox.id = 'carousel-lightbox';
                  lightbox.innerHTML = `
                    <div class="lightbox-overlay"></div>
                    <div class="lightbox-content">
                      <button class="lightbox-close" aria-label="Закрыть лайтбокс">&times;</button>
                      <img class="lightbox-image" src="" alt="">
                      <div class="lightbox-caption"></div>
                    </div>
                  `;
                  document.body.appendChild(lightbox);

                  // Close handlers
                  const closeBtn = lightbox.querySelector('.lightbox-close');
                  const overlay = lightbox.querySelector('.lightbox-overlay');

                  const closeLightbox = () => {
                    lightbox.classList.remove('active');
                    document.body.style.overflow = '';
                    startAutoScroll();
                  };

                  closeBtn.addEventListener('click', closeLightbox);
                  overlay.addEventListener('click', closeLightbox);

                  // Keyboard close (ESC)
                  document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && lightbox.classList.contains('active')) {
                      closeLightbox();
                    }
                  });
                }

                // Set image and caption
                const lightboxImg = lightbox.querySelector('.lightbox-image');
                const lightboxCaption = lightbox.querySelector('.lightbox-caption');
                const caption = document.getElementById(`caption-${imageIndex + 1}`);

                lightboxImg.src = imageSrc;
                lightboxImg.alt = imageAlt;
                lightboxCaption.textContent = caption ? caption.textContent : imageAlt;

                // Show lightbox
                lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
              }
            })();
          </script>

        </div>

        <!-- Pagination Dots -->
        <div id="carousel-dots" style="display:flex;justify-content:center;align-items:center;gap:0.5rem;margin-top:1.5rem"></div>

        <style>
          .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--muted-soft);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.4;
            padding: 0;
          }

          .carousel-dot:hover {
            opacity: 0.7;
            transform: scale(1.2);
          }

          .carousel-dot.active {
            background: var(--brand);
            opacity: 1;
            width: 24px;
            border-radius: 5px;
          }

          @media (max-width: 768px) {
            .carousel-dot {
              width: 8px;
              height: 8px;
            }

            .carousel-dot.active {
              width: 20px;
            }
          }
        </style>

        <!-- Swipe hint for mobile -->
        <p style="text-align:center;margin-top:1.5rem;color:var(--muted-soft);font-size:0.9rem">
          <span style="display:none" id="swipe-hint">← Свайп, чтобы увидеть больше →</span>
        </p>

        <script>
          // Show swipe hint on mobile
          if (window.innerWidth <= 768) {
            document.getElementById('swipe-hint').style.display = 'inline';
          }
        </script>

      </div>

    </section>

    <!-- WHAT'S INSIDE -->

    <section id="inside" class="section">

      <div class="container stack">

        <div data-reveal="fade-up">

        <h2 class="headline lg" style="text-align:center;max-width:20ch;margin-left:auto;margin-right:auto;margin-top:3rem"><span class="shimmer-text">Элитная <span data-count="7" data-text-mode>7</span></span></h2>

        <p class="note" style="text-align:center;max-width:68ch;margin:0 auto 1.5rem">
          Pentarch™ отображает полные циклы. Шесть элитных инструментов обеспечивают контекст. Структура вместо шума.
        </p>


        </div>

        <!-- Horizontal Scroll Navigation -->
        <div class="horizontal-scroll-nav">
          <button class="scroll-arrow scroll-arrow-left" aria-label="Прокрутить влево">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <div class="scroll-dots"></div>
          <button class="scroll-arrow scroll-arrow-right" aria-label="Прокрутить вправо">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>

        <div class="horizontal-scroll-container">
          <div class="horizontal-scroll-track" id="elite-seven-track">

          <!-- INDICATOR 1: PENTARCH (FLAGSHIP) -->
          <article class="card product" style="position:relative;border:2px solid var(--brand);box-shadow:0 0 40px rgba(91,138,255,.15)">

            <!-- FLAGSHIP Badge - Top Right Corner -->
            <span class="badge" style="position:absolute;top:1rem;right:1rem;font-size:.75rem;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;padding:.3rem .7rem;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;z-index:10">★ FLAGSHIP</span>

            <!-- Screenshot Box - READY FOR YOUR IMAGE -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px dashed rgba(91,138,255,.4);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.12),rgba(118,221,255,.06))">
              <img src="assets/screenshots/pentarch-screenshot.jpg" alt="Pentarch cycle detection on BTC chart" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay (remove 'display:flex' when you add real image, or delete this div entirely) -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Добавить скриншот Pentarch</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">Рекомендуется соотношение 16:9</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Pentarch</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="pentarch-details">Подробнее ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/pentarch-v10/" target="_blank" rel="noopener">Документация</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/how-to-trade-cycles-with-pentarch/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Смотреть в действии →</a>
            </div>
            <div id="pentarch-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>Как светофор для рынка</strong> — показывает точно, где вы находитесь в цикле с 5 ключевыми сигналами:</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0;margin-bottom:1rem">
                <li>• <strong style="color:#00FF7F">🟢 TD + IGN:</strong> Нисходящий тренд истощается, восходящий импульс нарастает (ранний цикл)</li>
                <li>• <strong style="color:#FFD700">🟡 WRN:</strong> Цена растёт, но показывает слабость (зона осторожности)</li>
                <li>• <strong style="color:#FF4560">🔴 CAP + BDN:</strong> Восходящий тренд истощается, нисходящий импульс нарастает (поздний цикл)</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin:0"><strong>Плюс:</strong> Цветная линия Pilot (направление тренда), цветные свечи (рыночная структура) и пересечения NanoFlow (сила импульса). Работает на любом рынке, любом таймфрейме.</p>
            </div>
          </article>

          <!-- INDICATOR 2: OMNIDECK -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="assets/screenshots/omnideck-screenshot.jpg" alt="OmniDeck all-in-one indicator" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Добавить скриншот OmniDeck</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">Рекомендуется соотношение 16:9</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — OmniDeck</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="omnideck-details">Подробнее ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/omnideck-v10/" target="_blank" rel="noopener">Документация</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/inside-signal-pilot/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Смотреть в действии →</a>
            </div>
            <div id="omnideck-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong><span data-count="10" data-text-mode>10</span> мощных инструментов в одном чистом оверлее.</strong> Вместо загромождения графика получите всё необходимое в одном индикаторе:</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• <strong>TD Sequential</strong> (сигналы истощения) • <strong>Squeeze Cloud</strong> (определение пробоя)</li>
                <li>• <strong>SuperTrend Ensemble</strong> (подтверждение тренда) • <strong>Bull Market Support Band</strong></li>
                <li>• <strong>Зоны спроса/предложения</strong> • <strong>Свечные паттерны</strong> • <strong>Ликвидные свипы</strong></li>
                <li>• <strong>Система режимов</strong> (бычий/медвежий/флэт) • <strong>EMA события</strong> • <strong>Предупреждения об осторожности</strong></li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">Включайте/выключайте каждую систему по необходимости. Один индикатор, множественные подтверждения, никакого беспорядка.</p>
            </div>
          </article>

          <!-- INDICATOR 3: VOLUME ORACLE -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="assets/screenshots/volume-oracle-screenshot.jpg" alt="Volume Oracle institutional flow tracking" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Добавить скриншот Volume Oracle</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">Рекомендуется соотношение 16:9</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Volume Oracle</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="oracle-details">Подробнее ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/volume-oracle-v10/" target="_blank" rel="noopener">Документация</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/accumulation-vs-distribution/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Смотреть в действии →</a>
            </div>
            <div id="oracle-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>Следуйте за умными деньгами.</strong> Отслеживает паттерны институциональной аккумуляции/распределения с уровнями уверенности:</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• Показывает текущую фазу (АККУМУЛЯЦИЯ против РАСПРЕДЕЛЕНИЯ) с процентом силы (0-100%)</li>
                <li>• Отслеживание продолжительности — как долго институты строят/выходят из позиций</li>
                <li>• Раннее предупреждение мигает, когда паттерн ослабевает</li>
                <li>• Встроенный калькулятор позиций предлагает уровни риска на основе текущего режима</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">Пример: "АККУМУЛЯЦИЯ 82%" = обнаружена сильная институциональная покупка. Следуйте за деньгами.</p>
            </div>
          </article>

          <!-- INDICATOR 4: PLUTUS FLOW -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="assets/screenshots/plutus-flow-screenshot.jpg" alt="Plutus Flow" style="width:100%;height:100%;object-fit:cover" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:none;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Добавить скриншот Plutus Flow</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">Рекомендуется соотношение 16:9</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Plutus Flow</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="plutus-details">Подробнее ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/plutus-flow-v10/" target="_blank" rel="noopener">Документация</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/accumulation-vs-distribution/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Смотреть в действии →</a>
            </div>
            <div id="plutus-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>Измеритель перетягивания каната.</strong> Отслеживает кумулятивное давление спроса и предложения со временем:</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• <strong>Зелёная лента:</strong> Спрос побеждает | <strong>Красная лента:</strong> Предложение побеждает</li>
                <li>• <strong>Пересечения центральной линии:</strong> Импульс меняет направление</li>
                <li>• <strong>Белые точки:</strong> Достигнуты экстремальные уровни давления</li>
                <li>• <strong>Метки дивергенции:</strong> Цена и поток расходятся (скрытая слабость/сила)</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">Раскрывает, имеют ли движения цены реальную поддержку объёма или это просто шум.</p>
            </div>
          </article>

          <!-- INDICATOR 5: JANUS ATLAS -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="assets/screenshots/janus-atlas-screenshot.jpg" alt="Janus Atlas multi-timeframe key levels" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Добавить скриншот Janus Atlas</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">Рекомендуется соотношение 16:9</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Janus Atlas</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="janus-details">Подробнее ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/janus-atlas-v10/" target="_blank" rel="noopener">Документация</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/how-smart-money-moves/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Смотреть в действии →</a>
            </div>
            <div id="janus-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>Автоматически отображает ключевые уровни.</strong> Избавляет от необходимости рисовать сотни линий вручную:</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• Уровни старших таймфреймов (дневной, недельный, месячный, квартальный)</li>
                <li>• Данные предыдущей сессии (максимум/минимум вчерашнего дня, диапазон прошлой недели, пивоты)</li>
                <li>• VWAP-якоря (зоны справедливой стоимости) + Volume Profile (POC, VAH/VAL)</li>
                <li>• Маркеры сессий (открытия Азии/Лондона/Нью-Йорка) + Метки структуры (BOS/CHoCH)</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">Ваша дорожная карта важных ценовых уровней, где реагируют трейдеры. Всё автоматически.</p>
            </div>
          </article>

          <!-- INDICATOR 6: AUGURY GRID -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="assets/screenshots/augury-grid-screenshot.jpg" alt="Augury Grid multi-symbol tracking table" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Добавить скриншот Augury Grid</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">Рекомендуется соотношение 16:9</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Augury Grid</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="augury-details">Подробнее ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/augury-grid-v10/" target="_blank" rel="noopener">Документация</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/multi-timeframe-confirmation/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Смотреть в действии →</a>
            </div>
            <div id="augury-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong>Панель управления миссией.</strong> Отслеживайте 8+ рынков одновременно и видьте самые чистые сетапы первыми:</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• Направление сигнала (↑ бычий, ↓ медвежий, — нейтральный) + время с момента сигнала</li>
                <li>• Оценка качества (0-100) — выше оценка = больше индикаторов согласованы</li>
                <li>• Целевые цены + текущий трекер P&L</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">Перестаньте переключаться между графиками. Видьте свой ранжированный список наблюдения с одного взгляда.</p>
            </div>
          </article>

          <!-- INDICATOR 7: HARMONIC OSCILLATOR -->
          <article class="card product">

            <!-- Screenshot Box -->
            <div style="position:relative;width:100%;max-width:280px;margin:0 auto 1.5rem;aspect-ratio:16/9;border-radius:8px;overflow:hidden;border:2px solid rgba(91,138,255,.3);box-shadow:0 4px 16px rgba(91,138,255,.2);background:linear-gradient(135deg,rgba(91,138,255,.08),rgba(118,221,255,.04))">
              <img src="assets/screenshots/harmonic-oscillator-screenshot.jpg" alt="Harmonic Oscillator multi-confirmation timing" style="width:100%;height:100%;object-fit:cover;display:none" loading="eager" class="indicator-screenshot">
              <!-- Placeholder overlay -->
              <div class="screenshot-placeholder" style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(10,14,24,.85);backdrop-filter:blur(4px)">
                <div style="text-align:center;padding:1rem">
                  <svg viewBox="0 0 24 24" fill="none" stroke="#5b8aff" stroke-width="2" style="width:56px;height:56px;margin:0 auto .75rem"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <p style="font-size:.85rem;font-weight:600;color:var(--brand);margin:0 0 .25rem 0">Добавить скриншот Harmonic Oscillator</p>
                  <p style="font-size:.75rem;color:var(--muted-2);margin:0">Рекомендуется соотношение 16:9</p>
                </div>
              </div>
            </div>

            <div class="title mod" style="justify-content:center">
              <h3 style="white-space:nowrap">SP — Harmonic Oscillator</h3>
            </div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center;flex-wrap:wrap">
              <button class="btn btn-ghost btn-sm toggle-details" data-target="harmonic-details">Подробнее ▼</button>
              <a class="btn btn-ghost btn-sm" href="https://docs.signalpilot.io/harmonic-oscillator-v10/" target="_blank" rel="noopener">Документация</a>
              <a class="btn btn-ghost btn-sm" href="https://blog.signalpilot.io/articles/when-to-ignore-divergence/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Смотреть в действии →</a>
            </div>
            <div id="harmonic-details" class="indicator-details" style="display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)">
              <p style="font-size:.95rem;line-height:1.7;color:var(--muted);margin-bottom:1rem"><strong><span data-count="5" data-text-mode>5</span> осцилляторов голосуют.</strong> Сигналы появляются только когда несколько индикаторов импульса согласны:</p>
              <ul style="font-size:.9rem;line-height:1.9;color:var(--muted-2);list-style:none;padding:0">
                <li>• Счёт голосов в реальном времени показывает разбивку (например, "3 Быка, 2 Нейтральных")</li>
                <li>• Система оценки X/5 — выше балл = больше согласия</li>
                <li>• Составная линия объединяет все пять осцилляторов для удобного просмотра</li>
              </ul>
              <p style="font-size:.9rem;color:var(--muted);margin-top:1rem">5/5 = все 5 согласны (высокая уверенность). Разделённое голосование = неясные условия.</p>
            </div>
          </article>

          </div><!-- .horizontal-scroll-track -->
        </div><!-- .horizontal-scroll-container -->

      </div>

    </section>

    <!-- FEATURE COMPARISON TABLE -->
    <section class="section" style="">
      <div class="container">

        <div style="max-width:900px;margin:0 auto">

          <h2 class="headline lg" style="text-align:center;margin-bottom:1rem"><span class="shimmer-text">Почему трейдеры переходят</span></h2>

          <p style="text-align:center;color:var(--muted);font-size:1.05rem;margin-bottom:3rem">
            Два подхода. Один даёт вам контроль.
          </p>

          <!-- Two-column bullet comparison format -->
          <div id="comparison-grid" class="comparison-container">

            <!-- Left Column: Traditional -->
            <div class="comparison-column">
              <h3 class="comparison-heading comparison-heading-negative">
                ❌ Традиционный подход
              </h3>
              <ul class="comparison-list">
                <li class="comparison-item comparison-item-negative">
                  <span class="comparison-bullet comparison-bullet-negative">•</span>
                  <span>Конфликтующие индикаторы, никогда не знаешь какому доверять</span>
                </li>
                <li class="comparison-item comparison-item-negative">
                  <span class="comparison-bullet comparison-bullet-negative">•</span>
                  <span>Сигналы перерисовываются, «идеальный вход» вчера исчезает сегодня</span>
                </li>
                <li class="comparison-item comparison-item-negative">
                  <span class="comparison-bullet comparison-bullet-negative">•</span>
                  <span>Следить за другими, ждать их сигнала перед действием</span>
                </li>
              </ul>
            </div>

            <!-- Right Column: Signal Pilot -->
            <div class="comparison-column">
              <h3 class="comparison-heading comparison-heading-positive">
                <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span>
              </h3>
              <ul class="comparison-list">
                <li class="comparison-item comparison-item-positive">
                  <span class="comparison-bullet comparison-bullet-positive">•</span>
                  <span><strong>Видите истощение сами</strong>, TD/IGN появляются, когда продажи иссякают</span>
                </li>
                <li class="comparison-item comparison-item-positive">
                  <span class="comparison-bullet comparison-bullet-positive">•</span>
                  <span><strong>Видите кульминацию сами</strong>, CAP/WRN появляются, когда покупки достигают пика</span>
                </li>
                <li class="comparison-item comparison-item-positive">
                  <span class="comparison-bullet comparison-bullet-positive">•</span>
                  <span><strong>Доверяйте тому, что видите</strong>, 100% без перерисовки, проверено, награда $100</span>
                </li>
                <li class="comparison-item comparison-item-positive">
                  <span class="comparison-bullet comparison-bullet-positive">•</span>
                  <span><strong>Овладейте чтением</strong>, <span data-count="82">82</span> урока + 50+ страниц документации для уверенности</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- Comprehensive Responsive Styles -->
          <style>
            /* Base styles - Desktop first */
            .comparison-container {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 2rem;
              padding: 2rem;
              max-width: 800px;
              margin: 0 auto;
            }

            .comparison-column {
              min-width: 0; /* Prevent grid blowout */
            }

            .comparison-heading {
              font-family: 'EB Garamond', serif;
              font-size: clamp(1.1rem, 3vw, 1.3rem);
              margin: 0 0 1.5rem 0;
              text-align: center;
              font-weight: 600;
              line-height: 1.2;
            }

            .comparison-heading-negative {
              color: #ff6b9d;
            }

            .comparison-heading-positive {
              color: #3ed598;
            }

            .comparison-list {
              list-style: none;
              padding: 0;
              margin: 0;
              display: flex;
              flex-direction: column;
              gap: 1rem;
            }

            .comparison-item {
              display: flex;
              align-items: start;
              gap: 0.75rem;
              font-size: clamp(0.875rem, 2vw, 0.95rem);
              line-height: 1.6;
            }

            .comparison-item-negative {
              color: var(--muted);
            }

            .comparison-item-positive {
              color: var(--text);
            }

            .comparison-bullet {
              font-size: clamp(1rem, 2.5vw, 1.2rem);
              flex-shrink: 0;
              line-height: 1;
              margin-top: 0.15rem;
            }

            .comparison-bullet-negative {
              color: #ff6b9d;
            }

            .comparison-bullet-positive {
              color: #3ed598;
            }

            /* Large Desktop (1440px+) - More breathing room */
            @media (min-width: 1440px) {
              .comparison-container {
                max-width: 900px;
                padding: 2.5rem;
                gap: 2.5rem;
              }

              .comparison-list {
                gap: 1.25rem;
              }
            }

            /* Desktop (1025px-1439px) - Optimal */
            @media (min-width: 1025px) and (max-width: 1439px) {
              .comparison-container {
                max-width: 800px;
              }
            }

            /* Tablet (769px-1024px) - Slightly reduced */
            @media (max-width: 1024px) {
              .comparison-container {
                max-width: 720px;
                padding: 1.75rem;
                gap: 1.75rem;
              }

              .comparison-heading {
                margin-bottom: 1.25rem;
              }

              .comparison-list {
                gap: 0.9rem;
              }
            }

            /* Large Mobile / Small Tablet (601px-768px) - Start tightening */
            @media (max-width: 768px) {
              .comparison-container {
                grid-template-columns: 1fr;
                gap: 2.5rem;
                padding: 1.5rem;
                max-width: 100%;
              }

              .comparison-heading {
                margin-bottom: 1.25rem;
                font-size: clamp(1.15rem, 4vw, 1.3rem);
              }

              .comparison-list {
                gap: 1rem;
              }

              .comparison-item {
                gap: 0.65rem;
              }
            }

            /* Small Mobile (481px-600px) - Compact but readable */
            @media (max-width: 600px) {
              .comparison-container {
                padding: 1.25rem;
                gap: 2rem;
              }

              .comparison-heading {
                margin-bottom: 1rem;
                font-size: 1.15rem;
              }

              .comparison-list {
                gap: 0.85rem;
              }

              .comparison-item {
                font-size: 0.9rem;
                line-height: 1.5;
                gap: 0.6rem;
              }

              .comparison-bullet {
                font-size: 1.1rem;
                margin-top: 0.1rem;
              }
            }

            /* Extra Small Mobile (320px-480px) - Maximum compactness */
            @media (max-width: 480px) {
              .comparison-container {
                padding: 1rem;
                gap: 1.75rem;
              }

              .comparison-heading {
                margin-bottom: 0.9rem;
                font-size: 1.05rem;
                letter-spacing: -0.01em;
              }

              .comparison-list {
                gap: 0.75rem;
              }

              .comparison-item {
                font-size: 0.875rem;
                line-height: 1.5;
                gap: 0.55rem;
              }

              .comparison-bullet {
                font-size: 1rem;
                margin-top: 0.05rem;
              }
            }

            /* Ultra Small Devices (< 360px) - Emergency fallback */
            @media (max-width: 360px) {
              .comparison-container {
                padding: 0.85rem;
                gap: 1.5rem;
              }

              .comparison-heading {
                font-size: 1rem;
                margin-bottom: 0.8rem;
              }

              .comparison-item {
                font-size: 0.85rem;
                gap: 0.5rem;
              }

              .comparison-bullet {
                font-size: 0.95rem;
              }
            }
          </style>

        </div>

      </div>
    </section>


    <!-- TESTIMONIALS REMOVED - PRE-LAUNCH -->







    <!-- INTERACTIVE DEMO -->

    <section class="section">

      <div class="container stack">

        <div style="text-align:center;max-width:800px;margin:0 auto 1.5rem">
          <span class="badge" style="margin-bottom:1rem">ИНТЕРАКТИВНОЕ ДЕМО</span>
          <h2 class="headline lg">Разница</h2>
          <p style="color:var(--muted);font-size:1.1rem;line-height:1.6;margin-top:1rem">
            <strong style="color:var(--brand)">👆 Потяните ползунок</strong>, чтобы сравнить торговлю с и без <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span>. Тот же график. Тот же таймфрейм. Совершенно другая ясность.
          </p>
        </div>

        <!-- Slider Controls -->
        <div style="display:flex;justify-content:center;gap:0.8rem;margin-bottom:1.5rem;flex-wrap:nowrap;align-items:center">
          <button id="btn-before" class="btn btn-secondary" style="padding:0.5rem 1rem;font-size:0.85rem;min-height:38px;height:38px;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;line-height:1">
            ← До
          </button>
          <button id="btn-autoplay" class="btn btn-primary" style="padding:0.5rem 1rem;font-size:0.85rem;min-height:38px;height:38px;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;line-height:1">
            ▶ Авто-воспроизведение
          </button>
          <button id="btn-after" class="btn btn-secondary" style="padding:0.5rem 1rem;font-size:0.85rem;min-height:38px;height:38px;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;line-height:1">
            После →
          </button>
        </div>

        <!-- Interactive Slider Container -->
        <div id="comparison-slider" role="region" aria-label="Ползунок сравнения до и после" style="position:relative;max-width:1400px;width:100%;margin:0 auto;border-radius:16px;overflow:hidden;border:3px solid rgba(91,138,255,.4);box-shadow:0 30px 80px rgba(0,0,0,.6);touch-action:pan-x">

          <!-- Without Signal Pilot (Background) -->
          <div class="comparison-image" style="position:relative;width:100%;min-height:600px;aspect-ratio:16/9;background:#0a0e18">
            <img
              src="assets/showcase/chart-without.jpg"
              alt="График без Signal Pilot"
              loading="eager"
              style="width:100%;height:100%;object-fit:contain;display:block"
              onerror="this.parentElement.innerHTML='<div style=\'display:flex;align-items:center;justify-content:center;height:100%;background:rgba(10,12,20,1);color:rgba(255,255,255,.5);flex-direction:column;gap:1rem\'><svg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'1.5\'><rect x=\'3\' y=\'3\' width=\'18\' height=\'18\' rx=\'2\'/><path d=\'M3 9h18\'/><path d=\'M9 21V9\'/></svg><span style=\'font-size:1.1rem;font-weight:600\'>БЕЗ Signal Pilot</span><span style=\'font-size:.9rem;opacity:.7\'>Добавьте изображение графика в:<br/>assets/showcase/chart-without.jpg</span></div>'"
            />
          </div>

          <!-- With Signal Pilot (Overlay - slides over) -->
          <div id="slider-overlay" class="comparison-image" style="position:absolute;top:0;left:0;width:50%;height:100%;overflow:hidden;z-index:10">
            <img
              id="overlay-image"
              src="assets/showcase/chart-with.jpg"
              alt="График с Signal Pilot"
              loading="eager"
              style="position:absolute;top:0;left:0;width:100%;height:100%;max-width:none;object-fit:contain;display:block;pointer-events:none"
              onerror="this.parentElement.innerHTML='<div style=\'display:flex;align-items:center;justify-content:center;height:100%;background:rgba(10,30,20,1);color:rgba(255,255,255,.5);flex-direction:column;gap:1rem\'><svg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'1.5\'><polyline points=\'20 6 9 17 4 12\'/></svg><span style=\'font-size:1.1rem;font-weight:600;color:#3ed598\'>С Signal Pilot</span><span style=\'font-size:.9rem;opacity:.7\'>Добавьте изображение графика в:<br/>assets/showcase/chart-with.jpg</span></div>'"
            />
          </div>

          <!-- Slider Handle with Pulse Animation -->
          <div id="slider-handle" role="slider" aria-label="Позиция ползунка сравнения" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" tabindex="0" style="position:absolute;top:0;left:50%;width:48px;height:100%;transform:translateX(-50%);z-index:100;cursor:ew-resize;touch-action:pan-x">
            <!-- Hit area (wider for easier grabbing) -->
            <div style="position:absolute;top:0;left:50%;transform:translateX(-50%);width:48px;height:100%;cursor:ew-resize"></div>
            <!-- Visual line -->
            <div style="position:absolute;top:0;left:50%;transform:translateX(-50%);width:4px;height:100%;background:#0a0e18;box-shadow:0 0 20px rgba(10,14,24,.5);pointer-events:none"></div>
            <!-- Handle circle -->
            <div id="handle-circle" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:48px;height:48px;background:#0a0e18;border-radius:50%;box-shadow:0 4px 16px rgba(0,0,0,.3),0 0 0 0 rgba(10,14,24,.7);display:flex;align-items:center;justify-content:center;pointer-events:none">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0a0e18" stroke-width="2" style="margin-left:-12px">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </div>
          </div>

        </div>

      </div>

    </section>

    <style>
      /* Pulse animation for handle */
      @keyframes pulse {
        0% { box-shadow: 0 4px 16px rgba(0,0,0,.3), 0 0 0 0 rgba(10,14,24,.7); }
        50% { box-shadow: 0 4px 16px rgba(0,0,0,.3), 0 0 0 8px rgba(10,14,24,0); }
        100% { box-shadow: 0 4px 16px rgba(0,0,0,.3), 0 0 0 0 rgba(10,14,24,.7); }
      }
      .pulse-animate { animation: pulse 2s ease-in-out infinite; }

      /* Smooth transition for non-dragging movements */

      /* Remove focus outline and any white backgrounds from slider handle */
      #slider-handle, #slider-handle *, #slider-handle:focus {
        outline: none !important;
        background: transparent !important;
      }
      #handle-circle {
        background: #0a0e18 !important;
      }
      .smooth-transition { transition: left 0.3s ease, width 0.3s ease !important; }
    </style>

    <script>
    // Interactive Before/After Slider
    (function() {
      const slider = document.getElementById('comparison-slider');
      const handle = document.getElementById('slider-handle');
      const handleCircle = document.getElementById('handle-circle');
      const overlay = document.getElementById('slider-overlay');
      const overlayImage = document.getElementById('overlay-image');

      if (!slider || !handle || !overlay) return;

      let isDragging = false;
      let hasInteracted = false;
      let lastTapTime = 0;

      // Feature 1: Auto-animation on page load
      function autoSweep() {
        let progress = 0;
        const duration = 3000; // 3 seconds
        const startTime = Date.now();

        function animate() {
          const elapsed = Date.now() - startTime;
          progress = Math.min(elapsed / duration, 1);

          // Ease in-out
          const eased = progress < 0.5
            ? 2 * progress * progress
            : 1 - Math.pow(-2 * progress + 2, 2) / 2;

          const percentage = eased * 100;
          setSliderPosition(percentage, true);

          if (progress < 1 && !hasInteracted) {
            requestAnimationFrame(animate);
          }
          // Animation completes at 100% and stays there to show the final "with Signal Pilot" result
        }

        animate();
      }

      // Feature 3: Animated pulse on handle (starts pulsing, stops on interact)
      handleCircle.classList.add('pulse-animate');

      // Core function to update slider position
      function setSliderPosition(percentage, smooth = false) {
        percentage = Math.max(0, Math.min(percentage, 100));

        if (smooth && !isDragging) {
          handle.classList.add('smooth-transition');
          overlay.classList.add('smooth-transition');
          setTimeout(() => {
            handle.classList.remove('smooth-transition');
            overlay.classList.remove('smooth-transition');
          }, 300);
        }

        handle.style.left = percentage + '%';
        overlay.style.width = percentage + '%';

        // Update ARIA value for accessibility
        handle.setAttribute('aria-valuenow', Math.round(percentage));
      }

      // Update overlay image width to match slider container
      function updateOverlayImageWidth() {
        if (overlayImage && slider) {
          const width = slider.clientWidth;
          if (width > 0) {
            overlayImage.style.width = width + 'px';
          } else {
            // Retry if width is 0 (layout not ready yet)
            setTimeout(() => updateOverlayImageWidth(), 100);
          }
        }
      }

      // Feature 2: Click anywhere to position (enhanced)
      function updateSliderFromPosition(clientX, smooth = false) {
        const rect = slider.getBoundingClientRect();
        let x = clientX - rect.left;
        const percentage = (x / rect.width) * 100;
        setSliderPosition(percentage, smooth);
      }

      function markInteraction() {
        hasInteracted = true;
        handleCircle.classList.remove('pulse-animate');
      }

      // Initialize
      function initSlider() {
        updateOverlayImageWidth();
        setSliderPosition(50, false);
      }

      // Update overlay width when images load
      const backgroundImage = slider.querySelector('img[alt="Chart without Signal Pilot"]');
      const foregroundImage = overlayImage;

      if (backgroundImage) {
        backgroundImage.addEventListener('load', updateOverlayImageWidth);
      }
      if (foregroundImage) {
        foregroundImage.addEventListener('load', updateOverlayImageWidth);
      }

      // Feature 8: Keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (!slider) return;

        const rect = slider.getBoundingClientRect();
        const isInView = rect.top < window.innerHeight && rect.bottom > 0;

        if (isInView) {
          let currentPercentage = parseFloat(handle.style.left) || 50;

          if (e.key === 'ArrowLeft') {
            e.preventDefault();
            markInteraction();
            setSliderPosition(currentPercentage - 5, true);
          } else if (e.key === 'ArrowRight') {
            e.preventDefault();
            markInteraction();
            setSliderPosition(currentPercentage + 5, true);
          }
        }
      });

      // Feature 4: Larger draggable area + Feature 7: Cursor changes
      handle.addEventListener('mousedown', (e) => {
        isDragging = true;
        markInteraction();
        document.body.style.cursor = 'ew-resize';
      });

      document.addEventListener('mousemove', (e) => {
        if (isDragging) {
          updateSliderFromPosition(e.clientX, false);
        }
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
        document.body.style.cursor = '';
      });

      // Touch support with Feature 13: Double-tap to center
      handle.addEventListener('touchstart', (e) => {
        e.preventDefault(); // Prevent scrolling immediately
        const currentTime = Date.now();
        const tapGap = currentTime - lastTapTime;

        if (tapGap < 300 && tapGap > 0) {
          // Double tap detected
          setSliderPosition(50, true);
        } else {
          isDragging = true;
          markInteraction();
        }

        lastTapTime = currentTime;
      }, { passive: false });

      // Also add touch support directly on slider for easier mobile interaction
      slider.addEventListener('touchstart', (e) => {
        if (!handle.contains(e.target)) {
          e.preventDefault(); // Prevent scrolling
          isDragging = true;
          markInteraction();
          updateSliderFromPosition(e.touches[0].clientX, false);
        }
      }, { passive: false });

      document.addEventListener('touchmove', (e) => {
        if (isDragging) {
          e.preventDefault(); // Critical: prevent page scroll while dragging
          updateSliderFromPosition(e.touches[0].clientX, false);
        }
      }, { passive: false });

      document.addEventListener('touchend', () => {
        isDragging = false;
      });

      // Feature 2: Click anywhere on slider or scrubber
      slider.addEventListener('click', (e) => {
        if (!isDragging && e.target !== handle && !handle.contains(e.target)) {
          markInteraction();
          updateSliderFromPosition(e.clientX, true);
        }
      });

      // Initialize and start auto-sweep
      window.addEventListener('load', () => {
        initSlider();
        // Start auto-sweep after a short delay
        setTimeout(() => {
          if (!hasInteracted) autoSweep();
        }, 500);
      });

      window.addEventListener('resize', initSlider);
      initSlider();

      // Intersection Observer for auto-sweep when section comes into view
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries) => {
          try {
            entries.forEach(entry => {
              if (entry.isIntersecting && !hasInteracted) {
                setTimeout(() => {
                  if (!hasInteracted) autoSweep();
                }, 300);
              }
            });
          } catch(e) {
            // Silently handle observer errors
          }
        }, { threshold: 0.5 });

        observer.observe(slider);
      }

      // Button Controls
      const btnBefore = document.getElementById('btn-before');
      const btnAutoplay = document.getElementById('btn-autoplay');
      const btnAfter = document.getElementById('btn-after');

      let autoplayInterval = null;
      let isAutoPlaying = false;

      // Before button - snap to 0%
      if (btnBefore) {
        btnBefore.addEventListener('click', () => {
          stopAutoPlay();
          markInteraction();
          setSliderPosition(0, true);
        });
      }

      // After button - snap to 100%
      if (btnAfter) {
        btnAfter.addEventListener('click', () => {
          stopAutoPlay();
          markInteraction();
          setSliderPosition(100, true);
        });
      }

      // Auto Play button - toggle continuous animation
      if (btnAutoplay) {
        btnAutoplay.addEventListener('click', () => {
          if (isAutoPlaying) {
            stopAutoPlay();
          } else {
            startAutoPlay();
          }
        });
      }

      function startAutoPlay() {
        stopAutoPlay(); // Clear any existing interval
        isAutoPlaying = true;
        btnAutoplay.innerHTML = '⏸ Pause';
        btnAutoplay.classList.remove('btn-primary');
        btnAutoplay.classList.add('btn-ghost');

        let direction = 1; // 1 = forward, -1 = backward
        let currentPos = 50;

        autoplayInterval = setInterval(() => {
          currentPos += (direction * 2); // Move 2% per frame

          if (currentPos >= 100) {
            currentPos = 100;
            direction = -1; // Reverse direction
          } else if (currentPos <= 0) {
            currentPos = 0;
            direction = 1; // Reverse direction
          }

          setSliderPosition(currentPos, false);
        }, 30); // Update every 30ms for smooth animation
      }

      function stopAutoPlay() {
        if (autoplayInterval) {
          clearInterval(autoplayInterval);
          autoplayInterval = null;
        }
        isAutoPlaying = false;
        btnAutoplay.innerHTML = '▶ Auto Play';
        btnAutoplay.classList.remove('btn-ghost');
        btnAutoplay.classList.add('btn-primary');
      }

      // Stop auto play if user manually interacts
      const originalMarkInteraction = markInteraction;
      markInteraction = function() {
        stopAutoPlay();
        originalMarkInteraction();
      };
    })();
    </script>

    <!-- CHRONICLE -->

    <section id="chronicle" class="section" style="padding:5rem 0;background:linear-gradient(180deg,transparent 0%,rgba(91,138,255,.03) 50%,transparent 100%)">
      <div class="container">
        <div style="text-align:center;margin-bottom:3rem">
          <span style="display:inline-block;font-size:0.85rem;font-weight:600;text-transform:uppercase;letter-spacing:0.15em;color:var(--accent);margin-bottom:1rem;padding:0.4rem 1rem;border:1px solid rgba(118,221,255,0.3);border-radius:999px;background:rgba(118,221,255,0.1)">Хроника</span>
          <h2 class="headline lg" style="margin-top:1rem"><span class="shimmer-text">Хроника SignalPilot</span></h2>
          <p style="color:var(--muted);max-width:600px;margin:1rem auto 0;font-size:1.1rem">Аналитические статьи о рыночных циклах, торговой философии и истории индикаторов Elite Seven.</p>
        </div>

        <div class="chronicle-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;max-width:1000px;margin:0 auto">

          <!-- Featured Article -->
          <a href="/ru/chronicle/birth-of-the-elite-seven/" class="chronicle-card featured cat-origin" style="grid-column:1/-1;display:grid;grid-template-columns:1fr 1fr;background:linear-gradient(135deg,rgba(245,158,11,.08),rgba(245,158,11,.02));border:1px solid rgba(245,158,11,.3);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;position:relative">
            <div style="position:absolute;inset:-2px;background:linear-gradient(135deg,#f59e0b,#fbbf24);border-radius:18px;z-index:-1;opacity:0.4;filter:blur(8px)"></div>
            <div style="background:linear-gradient(135deg,var(--bg-elev),var(--bg-soft));min-height:280px;position:relative;overflow:hidden">
              <img class="chronicle-img" src="/chronicle/elite-seven-council-preview.jpg" alt="Birth of the Elite Seven" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:0.8">
              <div style="position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(to right,transparent 60%,rgba(5,7,13,0.95) 100%)"></div>
            </div>
            <div style="padding:2.5rem;display:flex;flex-direction:column;justify-content:center">
              <span style="display:inline-flex;align-items:center;gap:0.4rem;background:linear-gradient(115deg,#f59e0b,#fbbf24);color:#fff;font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:0.1em;padding:0.3rem 0.6rem;border-radius:4px;margin-bottom:1rem;width:fit-content">★ Избранное</span>
              <span style="font-size:0.8rem;color:#f59e0b;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem">Происхождение</span>
              <h3 style="font-family:'EB Garamond',Georgia,serif;font-size:1.75rem;font-weight:500;line-height:1.3;margin-bottom:1rem">Рождение Элитной Семёрки</h3>
              <p style="color:var(--muted);font-size:0.95rem;line-height:1.6">Основополагающая история—как семь уникальных индикаторов появились, чтобы преодолеть рыночный шум.</p>
            </div>
          </a>

          <!-- Article 2 -->
          <a href="/ru/chronicle/the-pilots-oath/" class="chronicle-card cat-philosophy" style="background:linear-gradient(135deg,rgba(168,85,247,.06),rgba(168,85,247,.02));border:1px solid rgba(168,85,247,.2);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;display:flex;flex-direction:column">
            <div style="height:160px;background:linear-gradient(135deg,var(--bg-elev),var(--bg-soft));position:relative;overflow:hidden">
              <img class="chronicle-img" src="/chronicle/pilots-oath-preview.jpg" alt="The Pilot's Oath" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:0.7">
              <div style="position:absolute;bottom:0;left:0;right:0;height:60%;background:linear-gradient(to top,var(--bg-soft),transparent)"></div>
            </div>
            <div style="padding:1.5rem;flex:1;display:flex;flex-direction:column">
              <span style="font-size:0.75rem;color:#a855f7;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem">Философия</span>
              <h3 style="font-family:'EB Garamond',Georgia,serif;font-size:1.25rem;font-weight:500;line-height:1.3;margin-bottom:0.75rem">Клятва Пилота</h3>
              <p style="color:var(--muted);font-size:0.9rem;line-height:1.5;flex:1">Основополагающие принципы, направляющие каждое торговое решение.</p>
            </div>
          </a>

          <!-- Article 3 -->
          <a href="/ru/chronicle/meet-the-sovereign/" class="chronicle-card cat-one" style="background:linear-gradient(135deg,rgba(239,68,68,.06),rgba(239,68,68,.02));border:1px solid rgba(239,68,68,.2);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;display:flex;flex-direction:column">
            <div style="height:160px;background:linear-gradient(135deg,var(--bg-elev),var(--bg-soft));position:relative;overflow:hidden">
              <img class="chronicle-img" src="/chronicle/sovereign-pentarch-preview.jpg" alt="Meet The Sovereign: Pentarch" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:0.7">
              <div style="position:absolute;bottom:0;left:0;right:0;height:60%;background:linear-gradient(to top,var(--bg-soft),transparent)"></div>
            </div>
            <div style="padding:1.5rem;flex:1;display:flex;flex-direction:column">
              <span style="font-size:0.75rem;color:#ef4444;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem">Индикатор Один</span>
              <h3 style="font-family:'EB Garamond',Georgia,serif;font-size:1.25rem;font-weight:500;line-height:1.3;margin-bottom:0.75rem">Познакомьтесь с Сувереном: Pentarch</h3>
              <p style="color:var(--muted);font-size:0.9rem;line-height:1.5;flex:1">Верховный командир—определение тренда через консенсус пяти сил.</p>
            </div>
          </a>

          <!-- Article 4 -->
          <a href="/ru/chronicle/the-council-assembles/" class="chronicle-card cat-finale" style="background:linear-gradient(135deg,rgba(245,158,11,.06),rgba(251,191,36,.02));border:1px solid rgba(245,158,11,.2);border-radius:16px;overflow:hidden;text-decoration:none;color:inherit;display:flex;flex-direction:column">
            <div style="height:160px;background:linear-gradient(135deg,var(--bg-elev),var(--bg-soft));position:relative;overflow:hidden">
              <img class="chronicle-img" src="/chronicle/council-assembles-preview.jpg" alt="The Council Assembles" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:0.7">
              <div style="position:absolute;bottom:0;left:0;right:0;height:60%;background:linear-gradient(to top,var(--bg-soft),transparent)"></div>
            </div>
            <div style="padding:1.5rem;flex:1;display:flex;flex-direction:column">
              <span style="font-size:0.75rem;background:linear-gradient(90deg,#f59e0b,#fbbf24);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem">Финал</span>
              <h3 style="font-family:'EB Garamond',Georgia,serif;font-size:1.25rem;font-weight:500;line-height:1.3;margin-bottom:0.75rem">Совет Собирается</h3>
              <p style="color:var(--muted);font-size:0.9rem;line-height:1.5;flex:1">Когда все семь индикаторов говорят в унисон.</p>
            </div>
          </a>

        </div>

        <div style="text-align:center;margin-top:2.5rem">
          <a href="/ru/chronicle/" style="display:inline-flex;align-items:center;gap:0.5rem;color:var(--brand);font-weight:600;text-decoration:none;padding:0.75rem 1.5rem;border:1px solid var(--brand);border-radius:999px;transition:all 0.2s">
            Исследовать Хронику
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </div>
      </div>
    </section>

    <style>
      /* Base chronicle image styles - ensures images always display */
      .chronicle-img {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
      }

      @media (max-width: 768px) {
        /* Fix nested scrollbar issue - override overflow-x:hidden from .stack */
        #chronicle,
        #chronicle .container,
        #chronicle .container.stack,
        .chronicle-grid {
          overflow: visible !important;
          overflow-x: visible !important;
          overflow-y: visible !important;
          -webkit-overflow-scrolling: auto !important;
          touch-action: pan-y !important;
        }
        .chronicle-grid {
          grid-template-columns: 1fr !important;
        }
        .chronicle-card.featured {
          grid-template-columns: 1fr !important;
          grid-template-rows: 180px auto !important;
          display: grid !important;
        }
        /* Target the image container (2nd child, after the absolute glow div) */
        .chronicle-card.featured > div:nth-child(2) {
          min-height: unset !important;
          height: 180px !important;
          max-height: 180px !important;
          grid-row: 1 !important;
          position: relative !important;
          overflow: hidden !important;
        }
        /* Featured card image */
        .chronicle-card.featured > div:nth-child(2) > .chronicle-img {
          position: absolute !important;
          top: 0 !important;
          left: 0 !important;
          width: 100% !important;
          height: 100% !important;
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
          z-index: 1 !important;
          object-fit: cover !important;
          object-position: center !important;
          -webkit-object-fit: cover !important;
        }
        /* Change gradient from horizontal to vertical on mobile */
        .chronicle-card.featured > div:nth-child(2) > div:last-child {
          background: linear-gradient(to bottom, transparent 40%, rgba(5,7,13,0.9) 100%) !important;
          z-index: 2 !important;
        }
        /* Gradient overlay on regular cards */
        .chronicle-card:not(.featured) > div:first-child > div:not(.chronicle-img) {
          z-index: 2 !important;
        }
        /* Content area */
        .chronicle-card.featured > div:nth-child(3) {
          padding: 1.5rem !important;
          grid-row: 2 !important;
        }
        /* Ensure regular chronicle card images display properly */
        .chronicle-card:not(.featured) > div:first-child {
          height: 180px !important;
          min-height: 180px !important;
          position: relative !important;
          overflow: hidden !important;
        }
        .chronicle-img {
          position: absolute !important;
          top: 0 !important;
          left: 0 !important;
          width: 100% !important;
          height: 100% !important;
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
          z-index: 1 !important;
          object-fit: cover !important;
          object-position: center !important;
          -webkit-object-fit: cover !important;
        }
      }
      html[data-theme="light"] .chronicle-card.featured > div:nth-child(2) > div:last-child {
        background: linear-gradient(to right, transparent 60%, rgba(255,255,255,0.95) 100%) !important;
      }
      @media (max-width: 768px) {
        html[data-theme="light"] .chronicle-card.featured > div:nth-child(2) > div:last-child {
          background: linear-gradient(to bottom, transparent 40%, rgba(255,255,255,0.95) 100%) !important;
        }
      }
    </style>

    <!-- PRICING -->

    <section id="pricing" class="section">

      <div class="container stack">

        <h2 class="headline lg" style="text-align:center"><span class="shimmer-text">Выберите своё преимущество</span></h2>
        <p style="text-align:center;font-size:1.1rem;color:var(--muted);margin-top:1rem;margin-bottom:2rem">
          Доверяют <span class="typewriter-pricing" style="color:var(--brand);font-weight:600"></span>
        </p>

        <!-- What's Included - ALL Plans Identical -->
        <div style="text-align:center;max-width:900px;margin:1.5rem auto;padding:1.75rem 2rem;background:linear-gradient(135deg,rgba(91,138,255,.1),rgba(91,138,255,.05));border:2px solid rgba(91,138,255,.25);border-radius:12px" data-reveal="scale" data-reveal-delay="200">
          <p style="font-size:1.05rem;color:var(--text);margin:0 0 1rem 0;font-weight:700">
            ✨ Каждый план включает точно такие же функции:
          </p>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:0.75rem;text-align:left;max-width:800px;margin:0 auto">
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">Все 7 элитных индикаторов</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">Все будущие индикаторы</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">Все будущие обновления</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">Приоритетная поддержка</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">Полная документация</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.9rem;color:var(--muted)">82 бесплатных урока</span>
            </div>
          </div>
          <p style="font-size:.85rem;color:var(--muted-2);margin:1rem 0 0 0;font-style:italic">
            Единственная разница между планами: как вы платите (ежемесячно, ежегодно или один раз)
          </p>
        </div>

        <!-- TRUST BADGES -->
        <div style="display:flex;justify-content:center;gap:2rem;flex-wrap:wrap;margin-bottom:2rem;opacity:.85" data-reveal="fade-up" data-reveal-delay="300">
          <div style="display:flex;align-items:center;gap:.5rem">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg>
            <span style="font-size:.9rem;font-weight:600">100% Без перерисовки (Проверено)</span>
          </div>
        </div>



        <div class="pricing-grid" id="plans-grid" data-reveal-stagger>



          <!-- MONTHLY -->

          <article class="card plan" id="plan-monthly" data-plan="monthly" role="group" aria-labelledby="plan-monthly-title" style="position:relative;border:2px solid rgba(118,221,255,0.4);box-shadow:0 0 30px rgba(118,221,255,.15)">

            <div style="position:absolute;top:-12px;left:1rem;background:linear-gradient(135deg,#76ddff,#5bc0de);color:#fff;padding:.4rem .9rem;border-radius:999px;font-weight:800;font-size:.75rem;box-shadow:0 4px 12px rgba(118,221,255,.4);white-space:nowrap">
              🌊 ГИБКИЙ
            </div>

            <div class="pill" id="plan-monthly-title" style="background:rgba(118,221,255,0.15);color:#76ddff;font-weight:700">Ежемесячно</div>

            <div class="price">$99 <span class="pill">/месяц</span></div>

            <div style="text-align:center;margin:1.5rem 0;padding:1.25rem;background:rgba(91,138,255,.06);border:1px solid rgba(91,138,255,.2);border-radius:8px">
              <p style="font-size:1rem;color:var(--text);margin:0 0 .5rem 0;font-weight:600">
                Платите ежемесячно, отменяйте в любое время
              </p>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">
                Самый гибкий вариант. Никаких обязательств.
              </p>
            </div>

            <div class="actions stack">

              <!-- Step 1: Username -->
              <div style="background:rgba(91,138,255,.08);border:1px solid rgba(91,138,255,.2);border-radius:8px;padding:1rem;margin-bottom:.5rem">
                <label style="font-weight:600;color:var(--brand);font-size:.9rem;margin-bottom:.5rem;display:block">
                  Имя пользователя TradingView
                </label>
                <div class="input-wrapper">
                  <input id="tv-monthly" placeholder="@ваш.tradingview" required style="width:100%;padding:.75rem;padding-right:3rem;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:6px;color:#fff;font-size:1rem">
                  <div class="checkmark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                  </div>
                </div>
                <div id="error-tv-monthly" style="display:none;color:#ff6b6b;font-size:.85rem;margin-top:.5rem;font-weight:500">⚠️ Требуется имя пользователя TradingView</div>
              </div>

              <!-- Step 2: Consent -->
              <label class="consent" style="margin-bottom:1rem"><input class="tick" type="checkbox" id="consent-monthly"><span>Я понимаю, что <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span> носит образовательный характер. Никаких финансовых советов.</span></label>
              <div id="error-consent-monthly" style="display:none;color:#ff6b6b;font-size:.85rem;margin-bottom:1rem;font-weight:500">⚠️ Требуется согласие</div>

              <!-- PayPal Branding -->
              <div style="text-align:center;margin-bottom:1rem">
                <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="PayPal принимает карты" style="margin:0 auto;height:24px;" loading="lazy" width="120" height="24" />
                <div style="font-size:0.75rem;opacity:0.7;margin-top:0.25rem">На платформе PayPal</div>
              </div>

              <!-- Step 3: Subscribe -->
              <button type="button" id="btn-monthly-paypal" class="btn btn-primary" style="width:100%;padding:1rem;font-size:.95rem;font-weight:700">
                💳 Подписаться через PayPal<br><span style="font-size:.85rem">$99/месяц</span>
              </button>

              <div style="text-align:center;margin-top:1rem">
                <a href="https://signalpilotlabs.lemonsqueezy.com/buy/272cee92-d8d5-4259-866b-e7cf95f5d7ee" class="btn btn-secondary" style="width:100%;display:block" target="_blank" rel="noopener">💳 Оплатить картой</a>
              </div>

            </div>

          </article>




          <!-- YEARLY -->

          <article class="card plan" id="plan-yearly" data-plan="yearly" role="group" aria-labelledby="plan-yearly-title" style="position:relative;border:3px solid var(--brand);box-shadow:0 0 60px rgba(91,138,255,.35);transform:scale(1.05);z-index:2">

            <div style="position:absolute;top:-12px;right:1rem;background:linear-gradient(135deg,#3ed598,#2ec98a);color:#fff;padding:.4rem .9rem;border-radius:999px;font-weight:800;font-size:.8rem;box-shadow:0 4px 12px rgba(62,213,152,.4);white-space:nowrap">
              ЭКОНОМИЯ <span data-count="489" data-prefix="$">489</span>
            </div>

            <div class="pill" id="plan-yearly-title" style="background:linear-gradient(135deg,#5b8aff,#764ba2);color:#fff;font-size:.95rem;padding:.7rem 1.2rem">ЛУЧШЕЕ ПРЕДЛОЖЕНИЕ</div>

            <div class="price">
              $699 <span class="pill">/год</span>
            </div>

            <div style="text-align:center;margin:1.5rem 0;padding:1.25rem;background:rgba(62,213,152,.08);border:1px solid rgba(62,213,152,.25);border-radius:8px">
              <p style="font-size:1.1rem;margin:0 0 .5rem 0;font-weight:700">
                <span style="background:linear-gradient(135deg,#3ed598,#2ec98a);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Экономия <span data-count="489" data-prefix="$">489</span>/год</span>
              </p>
              <p style="font-size:.9rem;color:var(--text);margin:0 0 .25rem 0">
                Всего $58/месяц в эквиваленте
              </p>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">
                Выставляется счёт на $699 ежегодно. Лучшая цена для преданных трейдеров.
              </p>
            </div>

            <div class="actions stack">

              <!-- Step 1: Username -->
              <div style="background:rgba(91,138,255,.08);border:1px solid rgba(91,138,255,.2);border-radius:8px;padding:1rem;margin-bottom:.5rem">
                <label style="font-weight:600;color:var(--brand);font-size:.9rem;margin-bottom:.5rem;display:block">
                  Имя пользователя TradingView
                </label>
                <div class="input-wrapper">
                  <input id="tv-yearly" placeholder="@ваш.tradingview" required style="width:100%;padding:.75rem;padding-right:3rem;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:6px;color:#fff;font-size:1rem">
                  <div class="checkmark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                  </div>
                </div>
                <div id="error-tv-yearly" style="display:none;color:#ff6b6b;font-size:.85rem;margin-top:.5rem;font-weight:500">⚠️ Требуется имя пользователя TradingView</div>
              </div>

              <!-- Step 2: Consent -->
              <label class="consent" style="margin-bottom:1rem"><input class="tick" type="checkbox" id="consent-yearly"><span>Я понимаю, что <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span> носит образовательный характер. Никаких финансовых советов.</span></label>
              <div id="error-consent-yearly" style="display:none;color:#ff6b6b;font-size:.85rem;margin-bottom:1rem;font-weight:500">⚠️ Требуется согласие</div>

              <!-- PayPal Branding -->
              <div style="text-align:center;margin-bottom:1rem">
                <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="PayPal принимает карты" style="margin:0 auto;height:24px;" loading="lazy" width="120" height="24" />
                <div style="font-size:0.75rem;opacity:0.7;margin-top:0.25rem">На платформе PayPal</div>
              </div>

              <!-- Step 3: Subscribe -->
              <button type="button" id="btn-yearly-paypal" class="btn btn-primary" style="width:100%;padding:1rem;font-size:.95rem;font-weight:700">
                💳 Подписаться через PayPal<br><span style="font-size:.85rem">$699/год</span>
              </button>

              <div style="text-align:center;margin-top:1rem">
                <a href="https://signalpilotlabs.lemonsqueezy.com/buy/bb59d34b-20bb-478d-9db3-533b7e84930b" class="btn btn-secondary" style="width:100%;display:block" target="_blank" rel="noopener">💳 Оплатить картой</a>
              </div>

            </div>

          </article>



          <!-- LIFETIME -->

          <article class="card plan" id="plan-lifetime" data-plan="lifetime" role="group" aria-labelledby="plan-lifetime-title" style="position:relative;border:2px solid rgba(249,162,60,0.3)">

            <div style="position:absolute;top:-14px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,#f9a23c,#ff8c42);color:#fff;padding:.5rem 1.1rem;border-radius:999px;font-weight:800;font-size:.82rem;box-shadow:0 4px 16px rgba(249,162,60,.5);white-space:nowrap;max-width:90%">
              ОГРАНИЧЕНО • <span data-count="150">150</span> МЕСТ ОСТАЛОСЬ
            </div>

            <div class="pill" id="plan-lifetime-title" style="background:rgba(249,162,60,0.15);color:var(--warn);font-weight:700">Пожизненный доступ</div>

            <div class="price" style="white-space:nowrap"><span id="lifetime-display-price">$1,799</span> <span class="pill">один раз</span></div>

            <div style="text-align:center;margin:1.5rem 0;padding:1.25rem;background:rgba(249,162,60,.08);border:1px solid rgba(249,162,60,.25);border-radius:8px">
              <p style="font-size:1rem;color:var(--text);margin:0 0 .5rem 0;font-weight:600">
                Заплатите один раз. Ваше навсегда.
              </p>
              <p style="font-size:.9rem;color:var(--muted);margin:0 0 .25rem 0">
                $1,799 сегодня = $0/месяц после
              </p>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">
                Закрепите пожизненный доступ сейчас.
              </p>
            </div>



            <div class="actions stack">

              <!-- Step 1: Username -->
              <div style="background:rgba(91,138,255,.08);border:1px solid rgba(91,138,255,.2);border-radius:8px;padding:1rem;margin-bottom:.5rem">
                <label style="font-weight:600;color:var(--brand);font-size:.9rem;margin-bottom:.5rem;display:block">
                  Имя пользователя TradingView
                </label>
                <div class="input-wrapper">
                  <input id="tv-lifetime" type="text" placeholder="@ваш.tradingview" required style="width:100%;padding:.75rem;padding-right:3rem;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:6px;color:#fff;font-size:1rem">
                  <div class="checkmark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                  </div>
                </div>
                <div id="error-tv-lifetime" style="display:none;color:#ff6b6b;font-size:.85rem;margin-top:.5rem;font-weight:500">⚠️ Требуется имя пользователя TradingView</div>
              </div>

              <!-- Step 2: Consent -->
              <label class="consent" style="margin-bottom:1rem"><input class="tick" type="checkbox" id="consent-lifetime"><span>Я понимаю, что <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span> носит образовательный характер. Никаких финансовых советов.</span></label>
              <div id="error-consent-lifetime" style="display:none;color:#ff6b6b;font-size:.85rem;margin-bottom:1rem;font-weight:500">⚠️ Требуется согласие</div>

              <!-- PayPal Branding -->
              <div style="text-align:center;margin-bottom:1rem">
                <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="PayPal принимает карты" style="margin:0 auto;height:24px;" loading="lazy" width="120" height="24" />
                <div style="font-size:0.75rem;opacity:0.7;margin-top:0.25rem">На платформе PayPal</div>
              </div>

              <!-- Шаг 3: Купить сейчас -->
              <button type="button" id="btn-lifetime-paypal" class="btn btn-primary" style="width:100%;padding:1rem;font-size:.95rem;font-weight:700">
                💳 Купить сейчас - PayPal<br><span style="font-size:.85rem">$1,799 один раз</span>
              </button>

              <div style="text-align:center;margin-top:1rem">
                <a href="https://signalpilotlabs.lemonsqueezy.com/buy/81822d54-6e08-4c26-b2f0-d5d5e3cdd25e" class="btn btn-secondary" style="width:100%;display:block" target="_blank" rel="noopener">💳 Оплатить картой</a>
              </div>

              <div id="error-soldout-lifetime" style="display:none;color:#ff6b6b;font-size:.85rem;margin-top:1rem;font-weight:500;text-align:center">⚠️ Пожизненный доступ распродан. Лист ожидания доступен ниже.</div>

              <button class="btn btn-disabled" id="lt-soldout" type="button" style="display:none">Распродано — присоединиться к листу ожидания ниже</button>

            </div>

          </article>



        </div>



        <!-- MONEY-BACK GUARANTEE (after pricing cards for maximum conversion impact) -->
        <div style="max-width:900px;margin:3rem auto 1rem;padding:2rem 2.5rem;background:linear-gradient(135deg,rgba(62,213,152,.15),rgba(62,213,152,.08));border:2px solid rgba(62,213,152,.4);border-radius:12px;text-align:center">
          <div style="display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:1rem">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="2.5">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              <path d="M9 12l2 2 4-4"/>
            </svg>
            <h3 style="font-size:1.5rem;font-weight:700;color:#3ed598;margin:0">Гарантия возврата денег 7 дней</h3>
          </div>
          <p style="font-size:1.05rem;color:var(--text);line-height:1.6;margin:0;max-width:700px;margin:0 auto">
            <strong>Гарантия возврата денег 7 дней - напишите нам для полного возврата.</strong> Без вопросов, без хлопот. Вы сохраняете доступ в течение всего пробного периода.
          </p>
          <div style="display:flex;justify-content:center;gap:2rem;margin-top:1.5rem;flex-wrap:wrap">
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.95rem;color:var(--muted)">Никаких вопросов</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.95rem;color:var(--muted)">Полный возврат в течение 7 дней</span>
            </div>
            <div style="display:flex;align-items:center;gap:.5rem">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3ed598" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
              <span style="font-size:.95rem;color:var(--muted)">Сохраняйте доступ во время пробного периода</span>
            </div>
          </div>
        </div>

      </div>

    </section>

    <!-- FAQ -->

    <section id="faq" class="section" role="region" aria-labelledby="faq-heading" style="padding-top:1.5rem">
  <div class="container stack">
    <h2 id="faq-heading" class="headline lg" style="text-align:center">Часто задаваемые вопросы</h2>
    <p style="text-align:center;color:var(--muted);margin:-0.5rem 0 1.5rem 0;font-size:.9rem">Ответы на вопросы перед покупкой. Для руководств по настройке: <a href="https://docs.signalpilot.io/" target="_blank" rel="noopener">Документация</a> или <a href="https://education.signalpilot.io/" target="_blank" rel="noopener">Образовательный центр</a>.</p>

    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem;max-width:1100px;margin:0 auto" data-reveal-stagger="slow">

      <!-- EDUCATION HUB -->
      <div class="card" role="button" aria-expanded="true" tabindex="0" aria-controls="faq-answer-0">
        <strong id="faq-question-0">Где я могу научиться использовать эти индикаторы?</strong>
        <p id="faq-answer-0" class="note">Мы предоставляем <strong>бесплатный образовательный центр из 82 уроков</strong>, охватывающий всё от основ для начинающих до институциональных стратегий.<br>Доступно всем—покупка не требуется.<br><a href="https://education.signalpilot.io" target="_blank" rel="noopener">Начать обучение бесплатно →</a></p>
      </div>

      <!-- CORE VALUE PROP -->
      <div class="card" role="button" aria-expanded="true" tabindex="0" aria-controls="faq-answer-1">
        <strong id="faq-question-1">Перерисовываются ли сигналы?</strong>
        <p id="faq-answer-1" class="note"><strong>Никакой перерисовки. Гарантировано.</strong><br>Все сигналы финализируются при закрытии свечи.<br>Мы проверяем каждый индикатор на опережающее смещение.<br>Если вы можете доказать любую перерисовку, мы заплатим вам <strong>$100 USD</strong>.<br>То, что вы видите в истории, это именно то, что вы бы увидели вживую.<br><a href="https://blog.signalpilot.io/articles/the-repainting-problem/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Learn how repainting works →</a></p>
      </div>

      <div class="card" role="button" aria-expanded="true" tabindex="0" aria-controls="faq-answer-2">
        <strong id="faq-question-2">Является ли это финансовым советом?</strong>
        <p id="faq-answer-2" class="note"><strong>Нет.</strong><br><span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;font-weight:400">Signal Pilot</span> — это <strong>только образовательный инструментарий</strong>.<br>Мы предоставляем инструменты технического анализа—не инвестиционные советы, торговые рекомендации или гарантированную прибыль.<br>Вы несёте исключительную ответственность за свои торговые решения.</p>
      </div>

      <!-- TECHNICAL -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-3">
        <strong id="faq-question-3">Работает ли это на бесплатном TradingView?</strong>
        <p id="faq-answer-3" class="note"><strong>Да!</strong><br>Вам просто нужно достаточно слотов индикаторов для вашей настройки.<br><strong>Бесплатные аккаунты получают 3 слота</strong>, этого достаточно для Pentarch + 1-2 фильтра.<br>Pro/Premium аккаунты получают больше слотов и неограниченные алерты.</p>
      </div>

      <!-- PRICING & ACCESS -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-4">
        <strong id="faq-question-4">Как быстро происходит активация?</strong>
        <p id="faq-answer-4" class="note"><strong>Обычно 12-24 часа.</strong><br>Доступ только по приглашению TradingView приходит по электронной почте.<br>Уведомления TradingView покажут приглашение.<br>Для срочных запросов пишите на <a href="mailto:support@signalpilot.io">support@signalpilot.io</a></p>
      </div>

      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-5">
        <strong id="faq-question-5">Что включено в мой план?</strong>
        <p id="faq-answer-5" class="note">Каждый план включает: <strong>Элитную 7</strong>, все будущие обновления, текущую поддержку, документацию, пресеты и доступ к новым индикаторам по мере их выпуска.<br>Пожизненный план включает всё, навсегда.</p>
      </div>

      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-6">
        <strong id="faq-question-6">На скольких устройствах я могу использовать?</strong>
        <p id="faq-answer-6" class="note">Одно имя пользователя TradingView на лицензию.<br>Вы можете войти на неограниченном количестве устройств с этим именем пользователя.<br><strong>Совместное использование аккаунта запрещено</strong>—каждая подписка привязана к одному аккаунту TradingView.</p>
      </div>

      <!-- PAYMENT -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-7">
        <strong id="faq-question-7">Отмена и возвраты</strong>
        <p id="faq-answer-7" class="note"><strong>Гарантия возврата денег в течение 7 дней:</strong><br>Полный возврат в течение 7 дней с момента первого платежа, без вопросов.<br>После 7 дней вы можете отменить в любое время—без штрафов, без частичных возвратов.<br>Вы сохраняете доступ до конца текущего расчетного периода.<br><br><strong>Клиенты с картой:</strong> Управление через <a href="manage-subscription.html">портал самообслуживания</a> (пауза, отмена, обновление платежа).<br><strong>Клиенты PayPal:</strong> Управление через настройки PayPal.<br>См. <a href="refund.html">полную политику возврата</a>.</p>
      </div>

      <!-- TRADING & STRATEGY -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-8">
        <strong id="faq-question-8">Какие таймфреймы работают лучше всего?</strong>
        <p id="faq-answer-8" class="note">Поддерживаются все таймфреймы—от 1-минутных до годовых графиков.<br><strong>Самые популярные:</strong> 15m-1H для дневной торговли, 4H-Daily для свинг-торговли.<br>5-фазный цикл Pentarch автоматически адаптируется к вашему таймфрейму.<br>Образовательный центр охватывает стратегии оптимизации таймфреймов.<br><a href="https://blog.signalpilot.io/articles/multi-timeframe-confirmation/ru/" target="_blank" rel="noopener" style="color:var(--brand)">Master multi-timeframe analysis →</a></p>
      </div>

      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-9">
        <strong id="faq-question-9">Могу ли я использовать несколько индикаторов вместе?</strong>
        <p id="faq-answer-9" class="note"><strong>Конечно!</strong><br>Элитная 7 разработана для совместной работы.<br>Популярные комбинации: <strong>Pentarch + Volume Oracle</strong> для определения времени циклов с подтверждением умных денег, или <strong>OmniDeck + Janus Atlas</strong> для полного анализа структуры рынка с ключевыми уровнями.<br><a href="https://blog.signalpilot.io/articles/inside-signal-pilot/ru/" target="_blank" rel="noopener" style="color:var(--brand)">See how they work together →</a></p>
      </div>

      <!-- EDUCATION & SUPPORT -->
      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-10">
        <strong id="faq-question-10">Нужны ли мне навыки программирования?</strong>
        <p id="faq-answer-10" class="note"><strong>Никакого программирования не требуется.</strong><br>Все индикаторы просто подключаются и работают.<br>Мы включаем <strong>более 200 готовых конфигураций</strong> (Пожизненный план), настроенных для различных стратегий.<br>Просто загрузите пресет, примените к графику, готово.<br>Продвинутые пользователи могут настраивать параметры, но это необязательно.</p>
      </div>

      <div class="card" role="button" aria-expanded="false" tabindex="0" aria-controls="faq-answer-11">
        <strong id="faq-question-11">Какие каналы поддержки существуют?</strong>
        <p id="faq-answer-11" class="note"><strong>Ежемесячный:</strong> Поддержка по электронной почте (ответ в течение 48ч).<br><strong>Годовой+:</strong> Приоритетная электронная почта (ответ в течение 24ч).<br><strong>Пожизненный:</strong> Частное сообщество Discord + приоритетная поддержка.<br>Все планы включают доступ к более чем 50 страницам документации и видеоурокам.</p>
      </div>

    </div>

    <!-- View All FAQs Link -->
    <div style="text-align:center;margin-top:2.5rem">
      <a href="/faq.html" class="btn btn-primary" style="display:inline-flex;align-items:center;gap:.5rem">
        Просмотреть полный FAQ (30+ вопросов) →
      </a>
      <p style="color:var(--muted-2);font-size:.85rem;margin-top:.8rem">Руководства по настройке, стратегии и технические детали</p>
    </div>

  </div>
</section>



    <!-- THANK YOU -->

    <section id="thanks" class="section" style="display:none">

      <div class="container stack"><div class="card">

        <h2 class="headline lg">Спасибо — вы в деле!</h2>

        <p class="note measure">Мы активируем ваши приглашения TradingView: <strong>PayPal/Карта 1–8 часов</strong>. Приглашения, не появившиеся после этого срока, можно сообщить на <a href="mailto:support@signalpilot.io">support@signalpilot.io</a> с деталями транзакции и имени пользователя TradingView.</p>

        <ol class="note measure" style="margin:.3rem 0 0 1.2rem"><li>Приглашения TradingView появляются в разделе <em>Индикаторы → Скрипты только по приглашению</em>.</li><li>Загружается начальная предустановка (отправлено по email).</li><li>Добавляются два алерта: EC Pro и Screener.</li></ol>

        <div style="margin-top:.8rem"><a class="btn btn-primary" href="https://education.signalpilot.io/" target="_blank" rel="noopener">Руководства</a></div>

      </div></div>

    </section>



  </main>



  <!-- LATEST ARTICLES CAROUSEL -->
  <section style="padding:4rem 0;background:var(--bg-elev);border-top:1px solid var(--border)">
    <div class="container">
      <div style="text-align:center;margin-bottom:2rem">
        <h2 style="font-size:2rem;font-weight:700;margin:0 0 .5rem 0">Последние Статьи</h2>
        <p style="color:var(--muted);font-size:1rem;margin:0">Торговые инсайты, стратегии и анализ рынка</p>
      </div>

      <div id="blog-carousel" class="articles-carousel" style="display:flex;gap:1.5rem;overflow-x:auto;scroll-snap-type:x mandatory;padding:1rem 0;-webkit-overflow-scrolling:touch;scrollbar-width:thin">

        <!-- Loading skeleton -->
        <div class="article-card article-skeleton" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem">
          <div style="width:80px;height:20px;background:var(--border);border-radius:4px;margin-bottom:.75rem;animation:pulse 1.5s infinite"></div>
          <div style="width:100%;height:24px;background:var(--border);border-radius:4px;margin-bottom:.5rem;animation:pulse 1.5s infinite"></div>
          <div style="width:90%;height:16px;background:var(--border);border-radius:4px;animation:pulse 1.5s infinite"></div>
        </div>
        <div class="article-card article-skeleton" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem">
          <div style="width:80px;height:20px;background:var(--border);border-radius:4px;margin-bottom:.75rem;animation:pulse 1.5s infinite"></div>
          <div style="width:100%;height:24px;background:var(--border);border-radius:4px;margin-bottom:.5rem;animation:pulse 1.5s infinite"></div>
          <div style="width:90%;height:16px;background:var(--border);border-radius:4px;animation:pulse 1.5s infinite"></div>
        </div>
        <div class="article-card article-skeleton" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem">
          <div style="width:80px;height:20px;background:var(--border);border-radius:4px;margin-bottom:.75rem;animation:pulse 1.5s infinite"></div>
          <div style="width:100%;height:24px;background:var(--border);border-radius:4px;margin-bottom:.5rem;animation:pulse 1.5s infinite"></div>
          <div style="width:90%;height:16px;background:var(--border);border-radius:4px;animation:pulse 1.5s infinite"></div>
        </div>

      </div>

      <div style="text-align:center;margin-top:1.5rem">
        <a href="https://blog.signalpilot.io/ru/" target="_blank" rel="noopener" class="btn btn-primary" style="display:inline-flex;align-items:center;gap:.5rem">
          Смотреть Все Статьи <span style="font-size:1.1rem">→</span>
        </a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->

  <footer style="border-top:1px solid var(--border);margin-top:2rem;padding:2.5rem 0 1.5rem">

    <div class="container">

      <!-- Main footer grid - horizontal layout -->
      <div style="display:grid;grid-template-columns:1.5fr 1fr 1fr 1fr;gap:2.5rem;margin-bottom:2.5rem" data-reveal-stagger>

        <div>
          <h4 style="margin:0 0 .8rem 0;font-size:1.1rem;font-weight:700"><span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.1em;background:linear-gradient(135deg,#5b8aff,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Signal Pilot</span></h4>
          <p style="color:var(--muted);font-size:.85rem;line-height:1.6;margin:0 0 1rem 0">
            Создано для <span class="typewriter-footer" style="color:var(--brand);font-weight:600"></span>
          </p>
          <p style="color:var(--muted);font-size:.85rem;line-height:1.6;margin:0 0 1rem 0">
            82 бесплатных урока + 7 премиум индикаторов TradingView.
          </p>
          <div style="display:flex;gap:.8rem;margin-top:1rem">
            <a href="mailto:support@signalpilot.io" style="color:var(--muted);text-decoration:none;font-size:.9rem;transition:color .2s" title="Эл. почта">Эл. почта</a>
          </div>
        </div>

        <div>
          <h4 style="margin:0 0 .8rem 0;font-size:.95rem;font-weight:600;color:var(--text)">Продукт</h4>
          <ul style="list-style:none;padding:0;margin:0">
            <li style="margin-bottom:.4rem"><a href="#inside" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Индикаторы</a></li>
            <li style="margin-bottom:.4rem"><a href="#pricing" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Цены</a></li>
            <li style="margin-bottom:.4rem"><a href="https://docs.signalpilot.io/" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Документация</a></li>
            <li style="margin-bottom:.4rem"><a href="https://education.signalpilot.io/" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Образовательный центр</a></li>
            <li style="margin-bottom:.4rem"><a href="https://blog.signalpilot.io/ru/" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Блог</a></li>
            <li style="margin-bottom:.4rem"><a href="/tools/" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Бесплатные инструменты</a></li>
            <li style="margin-bottom:.4rem"><a href="#faq" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Центр FAQ</a></li>
          </ul>
        </div>

        <div>
          <h4 style="margin:0 0 .8rem 0;font-size:.95rem;font-weight:600;color:var(--text)">Юридическая информация</h4>
          <ul style="list-style:none;padding:0;margin:0">
            <li style="margin-bottom:.4rem"><a href="privacy.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Политика конфиденциальности</a></li>
            <li style="margin-bottom:.4rem"><a href="terms.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Условия использования</a></li>
            <li style="margin-bottom:.4rem"><a href="refund.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Политика возврата</a></li>
            <li style="margin-bottom:.4rem"><a href="manage-subscription.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Управление подпиской</a></li>
          </ul>
        </div>

        <div>
          <h4 style="margin:0 0 .8rem 0;font-size:.95rem;font-weight:600;color:var(--text)">Связь</h4>
          <ul style="list-style:none;padding:0;margin:0">
            <li style="margin-bottom:.4rem"><a href="https://github.com/Signalpilot/signalpilot.io" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">GitHub</a></li>
            <li style="margin-bottom:.4rem"><a href="mailto:support@signalpilot.io" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">support@signalpilot.io</a></li>
            <li style="margin-bottom:.4rem"><a href="/roadmap.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Дорожная карта</a></li>
            <li style="margin-bottom:.4rem"><a href="/affiliates.html" style="color:var(--muted);text-decoration:none;font-size:.85rem;transition:color .2s">Партнёрская программа</a></li>
          </ul>
        </div>

      </div>

      <!-- Compact disclaimer + copyright bar -->
      <div style="border-top:1px solid var(--border);padding-top:1.5rem;display:flex;flex-direction:column;gap:1rem">

        <div style="background:linear-gradient(135deg,rgba(249,162,60,.06),rgba(249,162,60,.02));border:1px solid rgba(249,162,60,.15);border-radius:8px;padding:1rem 1.25rem">
          <p style="color:var(--muted);font-size:.8rem;margin:0;line-height:1.5">
            <strong style="color:#f9a23c;font-size:.82rem">⚠️ Образовательный отказ от ответственности:</strong> Signal Pilot предоставляет образовательные инструменты только для обучения. Не является финансовым советом. Торговля связана со значительным риском. Прошлые результаты не гарантируют будущие результаты.
          </p>
        </div>

        <div style="display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.5rem;text-align:center">
          <p style="color:var(--muted-2);font-size:.8rem;margin:0">
            © 2025 <span style="font-family:'Gugi',system-ui,-apple-system,sans-serif;text-transform:uppercase;letter-spacing:.08em;font-weight:400">Signal Pilot</span> Labs. Все права защищены.
          </p>
          <p style="color:var(--muted-2);font-size:.75rem;margin:0;opacity:.6">v202510301807</p>
        </div>

      </div>

    </div>

  </footer>



  <div id="live" class="sr-only" aria-live="polite"></div>



  <!-- Modal -->

  <div class="modal" id="cardNotify" role="dialog" aria-modal="true" aria-labelledby="cardNotifyTitle">

    <div class="modal-card">

      <header><h3 id="cardNotifyTitle">Уведомление об оплате картой</h3><button class="modal-close" data-close aria-label="Закрыть">✕</button></header>

      <form id="card-notify-form" action="https://formspree.io/f/mldpnrop" method="POST">

        <input type="hidden" name="source" value="card-notify"><input type="hidden" name="plan" id="card-notify-plan" value=""><input type="hidden" name="ref" id="card-notify-ref" value=""><input type="hidden" name="utm" id="card-notify-utm" value="">

        <div class="grid two-col" style="gap:.8rem">
          <div>
            <label for="cn-name">Имя</label>
            <input id="cn-name" name="name" required>
          </div>
          <div>
            <label for="cn-email">Эл. почта</label>
            <input id="cn-email" name="email" type="email" required>
          </div>
        </div>

        <label for="cn-tv">Имя пользователя TradingView</label>
        <input id="cn-tv" name="tradingview" placeholder="@ваш.tradingview" required>

        <button class="btn btn-primary" type="submit">Подписаться на уведомления</button><a class="btn btn-ghost" href="#waitlist" style="margin-left:.4rem">Лист ожидания</a>

      </form>

    </div>

  </div>

  <!-- =======================================================================
       SCRIPT: CONFIG + UTILITIES
       ======================================================================= -->

  <script>

    /* ======================== Config ======================== */

    const EDU_URL_OVERRIDE = 'https://education.signalpilot.io/';  // subdomain established

    const SP_WEBHOOK='https://script.google.com/macros/s/AKfycbyrv-tCAhfPbr1qRvMYqu55Iqlof9kgsvN_QjjWrQ7SHxl5suoSRMew7vAZ7rR05coasg/exec';

    const SP_SECRET='';

    const LT_CAP = 100;

    const LT_STATUS_URL = SP_WEBHOOK ? (SP_WEBHOOK + '?fn=lt_status') : '';



    function postWebhook(d){ if(!SP_WEBHOOK) return; const p={...d}; if(SP_SECRET.trim()) p.secret=SP_SECRET;

      fetch(SP_WEBHOOK,{method:'POST',mode:'no-cors',headers:{'Content-Type':'text/plain;charset=UTF-8'},body:JSON.stringify(p)}).catch(()=>{}); }

    function live(msg){ const el=document.getElementById('live'); if(!el) return; el.textContent=''; setTimeout(()=>el.textContent=msg,10); }

    /* ======================== Dynamic Blog Carousel ======================== */
    (function(){
      const carousel = document.getElementById('blog-carousel');
      if (!carousel) return;

      const tagColors = {
        'indicators': { bg: 'rgba(91,138,255,.15)', color: 'var(--brand)' },
        'psychology': { bg: 'rgba(118,75,162,.15)', color: '#a78bfa' },
        'market-cycles': { bg: 'rgba(52,211,153,.15)', color: '#34d399' },
        'practical': { bg: 'rgba(251,191,36,.15)', color: '#fbbf24' },
        'strategy': { bg: 'rgba(236,72,153,.15)', color: '#ec4899' },
        'beginner': { bg: 'rgba(59,130,246,.15)', color: '#3b82f6' },
        'intermediate': { bg: 'rgba(168,85,247,.15)', color: '#a855f7' },
        'advanced': { bg: 'rgba(239,68,68,.15)', color: '#ef4444' },
        'backtesting': { bg: 'rgba(20,184,166,.15)', color: '#14b8a6' },
        'risk-management': { bg: 'rgba(249,115,22,.15)', color: '#f97316' }
      };

      function createArticleCard(article) {
        const tag = (article.tags && article.tags[0]) || 'indicators';
        const displayTag = tag.replace(/-/g, ' ').toUpperCase();
        const colors = tagColors[tag] || tagColors['indicators'];
        const a = document.createElement('a');
        a.href = article.url || `https://blog.signalpilot.io/articles/${article.slug}/ru/`;
        a.target = '_blank';
        a.rel = 'noopener';
        a.className = 'article-card';
        a.style.cssText = 'flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;transition:transform .2s,box-shadow .2s';
        a.innerHTML = `
          <span style="display:inline-block;padding:.25rem .5rem;background:${colors.bg};color:${colors.color};border-radius:4px;font-size:.75rem;font-weight:600;margin-bottom:.75rem">${displayTag}</span>
          <h3 style="font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 .5rem 0;line-height:1.3">${article.title}</h3>
          <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">${article.description || ''}</p>
        `;
        return a;
      }

      fetch('https://blog.signalpilot.io/ru/api/articles.json')
        .then(r => r.json())
        .then(data => {
          const articles = Array.isArray(data) ? data : (data.articles || []);
          if (articles.length === 0) return;
          carousel.innerHTML = '';
          articles.slice(0, 8).forEach(article => {
            carousel.appendChild(createArticleCard(article));
          });
        })
        .catch(() => {
          carousel.innerHTML = `
            <a href="https://blog.signalpilot.io/articles/why-your-indicators-keep-failing/ru/" target="_blank" rel="noopener" class="article-card" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;transition:transform .2s,box-shadow .2s">
              <span style="display:inline-block;padding:.25rem .5rem;background:rgba(91,138,255,.15);color:var(--brand);border-radius:4px;font-size:.75rem;font-weight:600;margin-bottom:.75rem">INDICATORS</span>
              <h3 style="font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 .5rem 0;line-height:1.3">Why Your Indicators Keep Failing</h3>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">Explores why traders with multiple indicators still struggle.</p>
            </a>
            <a href="https://blog.signalpilot.io/articles/the-repainting-problem/ru/" target="_blank" rel="noopener" class="article-card" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;transition:transform .2s,box-shadow .2s">
              <span style="display:inline-block;padding:.25rem .5rem;background:rgba(91,138,255,.15);color:var(--brand);border-radius:4px;font-size:.75rem;font-weight:600;margin-bottom:.75rem">INDICATORS</span>
              <h3 style="font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 .5rem 0;line-height:1.3">The Repainting Problem</h3>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">How most indicators cheat with lookahead bias.</p>
            </a>
            <a href="https://blog.signalpilot.io/articles/how-smart-money-moves/ru/" target="_blank" rel="noopener" class="article-card" style="flex:0 0 300px;scroll-snap-align:start;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;transition:transform .2s,box-shadow .2s">
              <span style="display:inline-block;padding:.25rem .5rem;background:rgba(52,211,153,.15);color:#34d399;border-radius:4px;font-size:.75rem;font-weight:600;margin-bottom:.75rem">MARKET CYCLES</span>
              <h3 style="font-size:1.1rem;font-weight:600;color:var(--text);margin:0 0 .5rem 0;line-height:1.3">How Smart Money Actually Moves</h3>
              <p style="font-size:.85rem;color:var(--muted);margin:0;line-height:1.5">Decode institutional movement patterns.</p>
            </a>
          `;
        });
    })();

    // Capture ref/UTM

    (function(){ const q=new URLSearchParams(location.search);

      const ref=q.get('ref')||q.get('affiliate'); const utm=['utm_source','utm_medium','utm_campaign','utm_content','utm_term'].reduce((o,k)=>{const v=q.get(k);if(v)o[k]=v;return o;}, {});

      if(ref) localStorage.setItem('sp_ref', ref); if(Object.keys(utm).length) localStorage.setItem('sp_utm', JSON.stringify(utm)); })();

    function getRef(){return localStorage.getItem('sp_ref')||''}

    function getUTM(){try{return JSON.parse(localStorage.getItem('sp_utm')||'{}')}catch(_){return{}}}



    /* ======================== Theme toggle ======================== */

    (function(){

      const KEY='sp_theme';

      const btn=document.getElementById('themeToggle');

      const system = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches ? 'light':'dark';

      setTheme(localStorage.getItem(KEY) || system);

      if (btn) btn.addEventListener('click',()=>{ const cur=document.documentElement.getAttribute('data-theme')==='light'?'light':'dark'; setTheme(cur==='light'?'dark':'light'); });

      function setTheme(t){

        document.documentElement.setAttribute('data-theme',t);

        localStorage.setItem(KEY,t);

        // Update theme icon
        const icon = document.getElementById('theme-icon');
        if(icon) {
          // Sun icon for light mode, Moon icon for dark mode
          if(t === 'light') {
            icon.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;vertical-align:middle;opacity:0.7"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>';
          } else {
            icon.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;vertical-align:middle;opacity:0.7"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>';
          }
        }

        let m=document.querySelector('meta[name="theme-color"]');

        if(!m){m=document.createElement('meta');m.setAttribute('name','theme-color');document.head.appendChild(m);}

        m.setAttribute('content', t==='light' ? '#eef1f6' : '#05070d');

      }

    })();



    /* ======================== Education link override + theme handoff ======================== */

    (function(){

      const a=document.getElementById('eduLink'); if(!a) return;

      if(EDU_URL_OVERRIDE && /^https?:/.test(EDU_URL_OVERRIDE)) a.href=EDU_URL_OVERRIDE;

      a.addEventListener('click', function(e){

        if(!/^https?:/.test(a.href)) return;

        const theme=document.documentElement.getAttribute('data-theme')==='light'?'light':'dark';

        try{ const url=new URL(a.href); url.searchParams.set('t', theme); a.href=url.toString(); }catch(_){}

      }, {once:true});

    })();



    /* ======================== Mobile menu - Direct child of body ======================== */

    // Mobile menu - create as direct child of body to escape stacking context
    (function() {
      const menuBtn = document.getElementById('menuToggle');
      if (!menuBtn) return;

      // Create backdrop
      const backdrop = document.createElement('div');
      backdrop.className = 'mobile-nav-backdrop';

      // Create mobile nav container
      const mobileNav = document.createElement('div');
      mobileNav.className = 'mobile-nav';

      // Create header with close button
      const header = document.createElement('div');
      header.className = 'mobile-nav-header';
      header.innerHTML = `
        <span style="color:#fff;font-weight:700;font-size:1.1rem">Меню</span>
        <button class="mobile-nav-close">&times;</button>
      `;

      // Create links container
      const links = document.createElement('div');
      links.className = 'mobile-nav-links';
      links.innerHTML = `
        <a href="#trial" style="display:block;background:linear-gradient(135deg,#5b8aff,#764ba2);color:#fff !important;padding:1rem 1.5rem;border-radius:10px;font-weight:700;text-align:center;margin:1rem 1.25rem;box-shadow:0 4px 16px rgba(91,138,255,.35)">7 Дней Бесплатно →</a>

        <div class="mobile-nav-section">
          <div class="mobile-nav-section-label">Продукт</div>
          <a href="#inside">Что внутри</a>
          <a href="#pricing">Цены</a>
          <a href="/ru/chronicle/">Хроника</a>
          <a href="/tools/">Инструменты</a>
        </div>

        <div class="mobile-nav-section">
          <div class="mobile-nav-section-label">Обучение</div>
          <a href="https://docs.signalpilot.io/" target="_blank" rel="noopener">Документация</a>
          <a href="https://education.signalpilot.io/" target="_blank" rel="noopener">Образовательный центр</a>
          <a href="https://blog.signalpilot.io/ru/" target="_blank" rel="noopener">Блог</a>
          <a href="/faq.html">Центр FAQ</a>
        </div>

        <div class="mobile-nav-section">
          <a href="/affiliates.html">Партнёрская программа</a>
        </div>
      `;

      // Assemble menu
      mobileNav.appendChild(header);
      mobileNav.appendChild(links);

      // CRITICAL: Append directly to body (escapes header's stacking context)
      document.body.appendChild(backdrop);
      document.body.appendChild(mobileNav);

      const closeBtn = header.querySelector('.mobile-nav-close');

      // Open/close functions
      function open() {
        backdrop.classList.add('active');
        mobileNav.classList.add('active');
        menuBtn.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
      }

      function close() {
        backdrop.classList.remove('active');
        mobileNav.classList.remove('active');
        menuBtn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      }

      function toggle() {
        const isOpen = mobileNav.classList.contains('active');
        if (isOpen) {
          close();
        } else {
          open();
        }
      }

      // Event listeners
      menuBtn.addEventListener('click', toggle); // Changed from open to toggle
      closeBtn.addEventListener('click', close);
      backdrop.addEventListener('click', close);

      // Close menu when clicking any link
      links.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', close);
      });
    })();


    /* ======================== Resources Dropdown ======================== */

    // Use event delegation
    (function() {
      let dropdownOpen = false;

      // Toggle dropdown on button click using event delegation
      document.addEventListener('click', function(e) {
        const toggle = e.target.closest('.nav-dropdown-toggle');

        if (toggle) {
          e.preventDefault();
          e.stopPropagation();

          const dropdown = toggle.closest('.nav-dropdown');
          const menu = dropdown ? dropdown.querySelector('.nav-dropdown-menu') : null;

          if (menu) {
            dropdownOpen = !dropdownOpen;

            if (dropdownOpen) {
              menu.classList.add('show');
              toggle.setAttribute('aria-expanded', 'true');
            } else {
              menu.classList.remove('show');
              toggle.setAttribute('aria-expanded', 'false');
            }
          }
          return;
        }

        // Close dropdown when clicking outside
        if (dropdownOpen && !e.target.closest('.nav-dropdown')) {
          const menu = document.querySelector('.nav-dropdown-menu');
          const toggle = document.querySelector('.nav-dropdown-toggle');

          if (menu) menu.classList.remove('show');
          if (toggle) toggle.setAttribute('aria-expanded', 'false');
          dropdownOpen = false;
        }
      });

      // Close on escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && dropdownOpen) {
          const menu = document.querySelector('.nav-dropdown-menu');
          const toggle = document.querySelector('.nav-dropdown-toggle');

          if (menu) menu.classList.remove('show');
          if (toggle) toggle.setAttribute('aria-expanded', 'false');
          dropdownOpen = false;
        }
      });
    })();


    /* ======================== Copy to clipboard (wallets) ======================== */

    document.querySelectorAll('[data-copy]').forEach(btn=>btn.addEventListener('click',()=>{

      const el=document.querySelector(btn.getAttribute('data-copy')); if(!el) return;

      el.select(); el.setSelectionRange(0,99999); document.execCommand('copy'); const old=btn.textContent; btn.textContent='Copied';

      setTimeout(()=>btn.textContent=old,1400); live('Wallet address copied'); }));



    /* ======================== Sticky CTA ======================== */

    (function(){

      const ctaBar=document.getElementById('ctaBar'), ctaClose=document.getElementById('ctaClose');

      if (!ctaBar) return;

      let dismissed=false, suppressed=false, focusing=false, ticking=false;

      function update(){ const y=window.scrollY; const t=(window.innerWidth<480)?1200:650;

        if(dismissed||suppressed||focusing||y<=t){ctaBar.classList.remove('show'); ctaBar.classList.add('hide');}

        else{ctaBar.classList.add('show'); ctaBar.classList.remove('hide');}}

      function onScroll(){ if(ticking) return; ticking=true; requestAnimationFrame(()=>{update(); ticking=false;});}

      window.addEventListener('scroll',onScroll,{passive:true}); update();

      if (ctaClose) ctaClose.addEventListener('click',()=>{dismissed=true;update();});

      (function(){const targets=['#pricing','#waitlist'];

        // Feature detection for IntersectionObserver (older mobile browsers)

        if('IntersectionObserver' in window){

          const io2=new IntersectionObserver(entries=>{
            try {
              suppressed=entries.some(e=>e.isIntersecting);
              update();
            } catch(e) {
              // Silently handle observer errors
            }
          },{root:null,rootMargin:'0px 0px -55% 0px',threshold:0});

          targets.forEach(sel=>{const el=document.querySelector(sel); if(el) io2.observe(el);});

        }

      })();

      document.addEventListener('focusin',e=>{ if(/^(INPUT|TEXTAREA|SELECT)$/.test(e.target.tagName)){focusing=true;update();}});

      document.addEventListener('focusout',e=>{ if(/^(INPUT|TEXTAREA|SELECT)$/.test(e.target.tagName)){focusing=false;update();}});

    })();



    /* ======================== Thanks screen ======================== */

    (function(){function show(){const s=document.getElementById('thanks'); if(location.hash==='#thanks') s.style.display='block';}

      window.addEventListener('hashchange',show); show();})();

  </script>



  <!-- PayPal SDK - For Subscriptions -->
  <script src="https://www.paypal.com/sdk/js?client-id=AdNRKUpEsMiKJgMEmeD08QEwN_3MK4o5y_fABsd6z4TYA4rsN7TDgiI-FH5jc8rjSxVpxCrBzhzdHM6L&vault=true&intent=subscription&currency=USD&disable-funding=venmo"></script>

  <script>

    function renderSub(planId, containerId, tvInputId, planKey, consentId){

      if(!window.paypal) return;

      paypal.Buttons({

        style:{
          shape:'pill',
          color:'black',
          layout:'vertical',
          label:'subscribe',
          tagline:false,
          height:44
        },

        createSubscription: function(_, actions){

          const tvEl=document.getElementById(tvInputId);
          const tv=(tvEl && tvEl.value||'').trim();

          const consentEl=consentId ? document.getElementById(consentId) : null;
          const ok=consentEl ? consentEl.checked : true;

          // Clear previous errors
          const errorTvId = 'error-' + tvInputId;
          const errorConsentId = 'error-' + consentId;
          document.getElementById(errorTvId).style.display = 'none';
          if(consentId) document.getElementById(errorConsentId).style.display = 'none';

          if(!tv){
            document.getElementById(errorTvId).style.display = 'block';
            return;
          }

          if(!ok){
            document.getElementById(errorConsentId).style.display = 'block';
            return;
          }

          const ref=localStorage.getItem('sp_ref')||''; const custom=`tv:${tv}|plan:${planKey}${ref?`|ref:${ref}`:''}`;

          localStorage.setItem('sp_last_tv', tv); localStorage.setItem('sp_last_plan', planKey);

          return actions.subscription.create({ plan_id:planId, custom_id:custom, application_context:{shipping_preference:'NO_SHIPPING'} });

        },

        onApprove: function(data){

          fetch('https://script.google.com/macros/s/AKfycbyrv-tCAhfPbr1qRvMYqu55Iqlof9kgsvN_QjjWrQ7SHxl5suoSRMew7vAZ7rR05coasg/exec',

            {method:'POST',mode:'no-cors',headers:{'Content-Type':'text/plain'},body:JSON.stringify({ type:'subscription', plan: localStorage.getItem('sp_last_plan')||'unknown', tv: localStorage.getItem('sp_last_tv')||'', subscription_id: data.subscriptionID, ref: localStorage.getItem('sp_ref')||'', utm: (localStorage.getItem('sp_utm')||'{}') })});

          location.hash='#thanks';

        },

        onError: function(){ alert('Платеж не удался. Повторите попытку или свяжитесь с support@signalpilot.io'); }

      }).render('#'+containerId).then(function(){

        // AGGRESSIVE: Remove all white backgrounds from PayPal button after render
        function forceTransparentBg(){
          const container = document.getElementById(containerId);
          if (container) {
            // Force transparent background on all descendants
            container.querySelectorAll('*').forEach(function(el){
              el.style.setProperty('background', 'transparent', 'important');
              el.style.setProperty('background-color', 'transparent', 'important');
            });
            // Force on container itself
            container.style.setProperty('background', 'transparent', 'important');
            container.style.setProperty('background-color', 'transparent', 'important');
          }
        }

        // Run multiple times to catch async PayPal updates
        setTimeout(forceTransparentBg, 50);
        setTimeout(forceTransparentBg, 150);
        setTimeout(forceTransparentBg, 500);
        setTimeout(forceTransparentBg, 1000);

        // Watch for PayPal injecting white backgrounds dynamically
        const container = document.getElementById(containerId);
        if (container && window.MutationObserver) {
          const observer = new MutationObserver(forceTransparentBg);
          observer.observe(container, {
            attributes: true,
            childList: true,
            subtree: true,
            attributeFilter: ['style', 'class']
          });
        }

      }).catch(function(err){
        console.warn('PayPal button render issue:', err);
      });

    }



    function lazyRenderSub(planId, containerId, tvInputId, planKey, consentId){

      const el=document.getElementById(containerId); if(!el) return; let rendered=false;

      // Feature detection - render immediately if IntersectionObserver not supported (older mobile browsers)

      if(!('IntersectionObserver' in window)){

        renderSub(planId,containerId,tvInputId,planKey,consentId);

        return;

      }

      const obs=new IntersectionObserver(entries=>{
        try {
          entries.forEach(e=>{if(!rendered&&e.isIntersecting){renderSub(planId,containerId,tvInputId,planKey,consentId); rendered=true; obs.disconnect();}});
        } catch(err) {
          // Silently handle observer errors
        }
      },{root:null, rootMargin:'300px', threshold:0});

      obs.observe(el);

    }



    // ===== LIFETIME BUTTON VALIDATION =====
    // Safari-compatible: No async/await before window.open() to avoid popup blocker

    (function(){
      const lifetimeBtn = document.getElementById('btn-lifetime-paypal');
      const tvInput = document.getElementById('tv-lifetime');
      const consentCheck = document.getElementById('consent-lifetime');

      if(!lifetimeBtn) {
        console.error('Lifetime button not found!');
        return;
      }

      console.log('✅ Lifetime button handler attached');

      lifetimeBtn.addEventListener('click', function(e){
        console.log('🔵 Lifetime button clicked');
        e.preventDefault();

        const tv = (tvInput && tvInput.value || '').trim();
        const consentOk = consentCheck && consentCheck.checked;

        console.log('Username:', tv, 'Consent:', consentOk);

        // Clear previous errors
        document.getElementById('error-tv-lifetime').style.display = 'none';
        document.getElementById('error-consent-lifetime').style.display = 'none';
        document.getElementById('error-soldout-lifetime').style.display = 'none';

        // Validate TradingView username
        if(!tv) {
          console.log('❌ Missing username');
          document.getElementById('error-tv-lifetime').style.display = 'block';
          return;
        }

        // Validate consent
        if(!consentOk) {
          console.log('❌ Missing consent');
          document.getElementById('error-consent-lifetime').style.display = 'block';
          return;
        }

        // Store for tracking BEFORE opening PayPal (synchronous)
        const ref = localStorage.getItem('sp_ref') || '';
        localStorage.setItem('sp_last_tv', tv);
        localStorage.setItem('sp_last_plan', 'lifetime');
        console.log('💾 Saved to localStorage');

        // CRITICAL FOR SAFARI: Open PayPal IMMEDIATELY (synchronous)
        // Safari blocks window.open() after async operations
        console.log('✅ Opening PayPal...');
        const paypalWindow = window.open('https://www.paypal.com/ncp/payment/436WMS3WRY2ZL', '_blank');

        if (!paypalWindow) {
          console.error('❌ Popup blocked! Please allow popups for this site.');
          alert('Всплывающее окно заблокировано. Пожалуйста, разрешите всплывающие окна и попробуйте снова.');
          return;
        }

        // Check availability and log tracking AFTER window opens (non-blocking)
        // This won't affect the PayPal window that's already open
        fetch('https://script.google.com/macros/s/AKfycbyrv-tCAhfPbr1qRvMYqu55Iqlof9kgsvN_QjjWrQ7SHxl5suoSRMew7vAZ7rR05coasg/exec?fn=lt_status', {
          method: 'GET',
          mode: 'cors',
          cache: 'no-store'
        }).then(function(res){
          if(res.ok) {
            return res.json();
          }
        }).then(function(j){
          if(j) {
            const claimed = Number(j.claimed || 0);
            console.log('📊 Availability: ' + claimed + '/350 claimed');
          }
        }).catch(function(err){
          console.warn('⚠️ Availability check failed:', err);
        });

        // Log tracking (non-blocking)
        fetch('https://script.google.com/macros/s/AKfycbyrv-tCAhfPbr1qRvMYqu55Iqlof9kgsvN_QjjWrQ7SHxl5suoSRMew7vAZ7rR05coasg/exec', {
          method: 'POST',
          mode: 'no-cors',
          headers: {'Content-Type': 'text/plain'},
          body: JSON.stringify({
            type: 'lifetime_start',
            plan: 'lifetime',
            tv: tv,
            ref: ref,
            utm: (localStorage.getItem('sp_utm') || '{}')
          })
        }).then(function(){
          console.log('📊 Tracking logged');
        }).catch(function(err){
          console.warn('⚠️ Tracking failed:', err);
        });
      });
    })();


    // ===== PAYPAL LIVE =====
    const PAYPAL_LIVE = true;

    /*
     * TODO: FIX PAYPAL BUTTON RENDERING - CURRENTLY DISABLED DUE TO MOBILE CRASH
     *
     * ROOT CAUSE: The renderSub() function causes mobile browsers to crash when scrolling
     * past the pricing section due to extremely aggressive DOM manipulation:
     *
     * 1. querySelectorAll('*') - Selects EVERY element in button container (very expensive)
     * 2. MutationObserver watching entire subtree - Fires on every style/class change
     * 3. forceTransparentBg() runs 4 times via setTimeout (50ms, 150ms, 500ms, 1000ms)
     * 4. Each run manipulates styles on EVERY descendant element
     * 5. This happens when IntersectionObserver fires (300px before pricing section visible)
     *
     * RECOMMENDED FIX OPTIONS:
     * A) Remove aggressive style manipulation entirely (accept PayPal's white background)
     * B) Use more specific selectors instead of querySelectorAll('*')
     * C) Remove MutationObserver, run forceTransparentBg() only once after render
     * D) Delay PayPal rendering until user actually clicks/interacts with form
     * E) Use PayPal's hosted buttons instead of SDK (like lifetime plan)
     *
     * Until fixed, monthly/yearly PayPal buttons are disabled.
     * Users can still purchase via lifetime plan form or contact support.
     */
    /*if (PAYPAL_LIVE) {
      // MONTHLY = $99 = P-1WW85539FH424981JND52S7A
      lazyRenderSub('P-1WW85539FH424981JND52S7A','paypal-button-container-P-1WW85539FH424981JND52S7A','tv-monthly','monthly','consent-monthly');

      // Quarterly removed

      // YEARLY = $699 = P-1S895034P48824141ND52VBA
      lazyRenderSub('P-1S895034P48824141ND52VBA','paypal-button-container-P-1S895034P48824141ND52VBA','tv-yearly','yearly','consent-yearly');

      // Lifetime button - using simple form (no SDK conflict)
    }*/






    // Lifetime form guard removed - now using Hosted Button

    // ===== LIGHTWEIGHT MONTHLY/YEARLY SUBSCRIPTION BUTTONS =====
    // Simple click handlers - NO DOM manipulation, NO MutationObserver, NO performance issues

    (function() {
      const monthlyBtn = document.getElementById('btn-monthly-paypal');
      const yearlyBtn = document.getElementById('btn-yearly-paypal');

      if (monthlyBtn) {
        monthlyBtn.addEventListener('click', function() {
          const tvInput = document.getElementById('tv-monthly');
          const consentCheck = document.getElementById('consent-monthly');
          const tv = (tvInput && tvInput.value || '').trim();
          const consentOk = consentCheck && consentCheck.checked;

          // Clear errors
          document.getElementById('error-tv-monthly').style.display = 'none';
          document.getElementById('error-consent-monthly').style.display = 'none';

          // Validate
          if (!tv) {
            document.getElementById('error-tv-monthly').style.display = 'block';
            return;
          }
          if (!consentOk) {
            document.getElementById('error-consent-monthly').style.display = 'block';
            return;
          }

          // Save for tracking
          localStorage.setItem('sp_last_tv', tv);
          localStorage.setItem('sp_last_plan', 'monthly');

          // Redirect to PayPal subscription page
          // Plan ID: P-1WW85539FH424981JND52S7A
          window.open('https://www.paypal.com/webapps/billing/plans/subscribe?plan_id=P-1WW85539FH424981JND52S7A', '_blank');
        });
      }

      if (yearlyBtn) {
        yearlyBtn.addEventListener('click', function() {
          const tvInput = document.getElementById('tv-yearly');
          const consentCheck = document.getElementById('consent-yearly');
          const tv = (tvInput && tvInput.value || '').trim();
          const consentOk = consentCheck && consentCheck.checked;

          // Clear errors
          document.getElementById('error-tv-yearly').style.display = 'none';
          document.getElementById('error-consent-yearly').style.display = 'none';

          // Validate
          if (!tv) {
            document.getElementById('error-tv-yearly').style.display = 'block';
            return;
          }
          if (!consentOk) {
            document.getElementById('error-consent-yearly').style.display = 'block';
            return;
          }

          // Save for tracking
          localStorage.setItem('sp_last_tv', tv);
          localStorage.setItem('sp_last_plan', 'yearly');

          // Redirect to PayPal subscription page
          // Plan ID: P-1S895034P48824141ND52VBA
          window.open('https://www.paypal.com/webapps/billing/plans/subscribe?plan_id=P-1S895034P48824141ND52VBA', '_blank');
        });
      }
    })();

    /* ======================== MOBILE-FRIENDLY: Simple PayPal styling ======================== */
    /* No JavaScript manipulation - pure CSS only for mobile performance */

  </script>

<script>
// Jump Navigation - Show/Hide and Active State
(function() {
  const jumpNav = document.getElementById('jumpNav');
  const jumpLinks = document.querySelectorAll('.jump-link');
  const sections = document.querySelectorAll('section[id]');
  
  if (!jumpNav) return;

  let ticking = false;

  // Show jump nav after scrolling past hero
  function updateJumpNavVisibility() {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        try {
          const scrollY = window.scrollY;
          const heroHeight = 600; // approximate hero height

          if (scrollY > heroHeight) {
            jumpNav.classList.add('visible');
          } else {
            jumpNav.classList.remove('visible');
          }
        } catch(e) {
          // Silently fail - don't break page on scroll
        }

        ticking = false;
      });
      ticking = true;
    }
  }

  // Update active link based on scroll position
  function updateActiveLink() {
    try {
      const scrollY = window.scrollY + 150; // offset for sticky nav

      let currentSection = '';

      sections.forEach(section => {
        if (!section) return;
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;

        if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
          currentSection = section.getAttribute('id');
        }
      });

      jumpLinks.forEach(link => {
        if (!link) return;
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${currentSection}`) {
          link.classList.add('active');
        }
      });
    } catch(e) {
      // Silently fail - don't break page on scroll
    }
  }

  // Smooth scroll to sections
  jumpLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const targetId = link.getAttribute('href').substring(1);
      const targetSection = document.getElementById(targetId);
      
      if (targetSection) {
        const offset = 140; // account for sticky header + jump nav
        const targetPosition = targetSection.offsetTop - offset;
        
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });

  // Listen for scroll events with error handling
  window.addEventListener('scroll', () => {
    try {
      updateJumpNavVisibility();
      updateActiveLink();
    } catch(e) {
      // Prevent scroll errors from breaking the page
      console.error('Scroll handler error:', e);
    }
  }, { passive: true });

  // Initial check
  updateJumpNavVisibility();
  updateActiveLink();
})();
</script>

<script>
// Universal Anchor Link Handler - Fixes #pricing and all other # links
(function() {
  function scrollToHash(hash, smooth) {
    if (!hash) return;

    const targetId = hash.startsWith('#') ? hash.substring(1) : hash;
    const targetSection = document.getElementById(targetId);

    if (targetSection) {
      // Calculate offset for sticky header
      const header = document.querySelector('header');
      const headerHeight = header ? header.offsetHeight : 80;
      const offset = headerHeight + 20; // Add 20px extra padding

      const targetPosition = targetSection.getBoundingClientRect().top + window.pageYOffset - offset;

      // Scroll
      window.scrollTo({
        top: targetPosition,
        behavior: smooth ? 'smooth' : 'auto'
      });

      return true;
    }
    return false;
  }

  // Handle clicks on anchor links
  document.addEventListener('click', function(e) {
    const link = e.target.closest('a[href^="#"]');
    if (!link) return;

    const href = link.getAttribute('href');
    if (!href || href === '#') return;

    if (scrollToHash(href, true)) {
      e.preventDefault();

      // Update URL hash without jumping
      if (history.pushState) {
        history.pushState(null, null, href);
      }
    }
  });

  // Handle page load with hash in URL (e.g., signalpilot.io/#pricing)
  function handleInitialHash() {
    const hash = window.location.hash;
    if (hash) {
      // Prevent default browser jump
      if (history.replaceState) {
        history.replaceState(null, null, ' ');
      }

      // Wait a bit for content to load, then scroll
      setTimeout(function() {
        if (scrollToHash(hash, true)) {
          // Restore hash to URL after scrolling
          if (history.replaceState) {
            history.replaceState(null, null, hash);
          }
        }
      }, 100);
    }
  }

  // Run on page load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', handleInitialHash);
  } else {
    handleInitialHash();
  }
})();
</script>

<script>
// Load SignalPilot Theme System with cache busting
(function() {
  // IMPORTANT: Update VERSION on each deployment (format: YYYYMMDDHHmm)
  // This ensures users get fresh JS/CSS after updates
  var VERSION = '202510301943'; // Last updated: 2025-10-30 19:43 UTC

  function loadScript(src, callback) {
    var s = document.createElement('script');
    s.src = src + '?v=' + VERSION;
    s.defer = true;
    s.onload = callback || function(){};
    s.onerror = function(){ /* Script failed to load */ };
    document.body.appendChild(s);
  }

  // Load in sequence: device-capability -> themes -> particles -> theme-switcher
  const cacheBust = '?v=' + Date.now();
  loadScript('assets/device-capability.js' + cacheBust, function() {
    loadScript('assets/themes.js' + cacheBust, function() {
      loadScript('assets/particles.js' + cacheBust, function() {
        loadScript('assets/theme-switcher.js' + cacheBust);
      });
    });
  });
})();
</script>

<script>
// UNREGISTER SERVICE WORKER - Permanently remove PWA caching
// Service worker was causing constant cache issues. Landing pages don't need offline mode.
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.getRegistrations().then(function(registrations) {
      for (let registration of registrations) {
        registration.unregister();
      }
    });

    // Clear all caches
    if ('caches' in window) {
      caches.keys().then(function(cacheNames) {
        return Promise.all(
          cacheNames.map(function(cacheName) {
            return caches.delete(cacheName);
          })
        );
      }).then(function() {
        // All caches cleared
      });
    }
  });
}
</script>

<script>
// Force scroll to top on page load/refresh (Mobile fix)
// But respect URL hash anchors for direct linking (e.g., /#faq)
(function() {
  var hasHash = window.location.hash && window.location.hash.length > 1;

  if ('scrollRestoration' in history) {
    // Only disable scroll restoration if no hash anchor
    history.scrollRestoration = hasHash ? 'auto' : 'manual';
  }

  // Only scroll to top if no hash anchor
  if (!hasHash) {
    window.scrollTo(0, 0);
  }

  // Also on page load (but respect hash)
  window.addEventListener('load', function() {
    if (!window.location.hash || window.location.hash.length <= 1) {
      window.scrollTo(0, 0);
    }
  });

  // And on beforeunload (catches refresh)
  window.addEventListener('beforeunload', function() {
    window.scrollTo(0, 0);
  });
})();
</script>

<script>
// Toggle indicator details
(function() {
  document.addEventListener('DOMContentLoaded', function() {
    const toggleButtons = document.querySelectorAll('.toggle-details');
    
    toggleButtons.forEach(button => {
      button.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        const targetDiv = document.getElementById(targetId);
        
        if (targetDiv) {
          const isVisible = targetDiv.style.display !== 'none';
          
          if (isVisible) {
            targetDiv.style.display = 'none';
            this.textContent = 'Детали ▼';
          } else {
            targetDiv.style.display = 'block';
            this.textContent = 'Скрыть Детали ▲';
          }
        }
      });
    });
  });
})();
</script>

<!-- Lemon Squeezy Checkout -->
<script src="https://assets.lemonsqueezy.com/lemon.js" defer></script>
<script>
  window.addEventListener('DOMContentLoaded', function() {
    // Initialize Lemon Squeezy when ready
    if (window.createLemonSqueezy) {
      window.createLemonSqueezy();
    } else {
      // Wait for script to load
      window.addEventListener('load', function() {
        if (window.createLemonSqueezy) {
          window.createLemonSqueezy();
        }
      });
    }
  });
</script>

<!-- Google Analytics 4 - Custom Event Tracking -->
<script>
(function() {
  // Wait for GA to be ready
  function trackEvent(eventName, eventParams) {
    if (typeof gtag === 'function') {
      gtag('event', eventName, eventParams);
    }
  }

  document.addEventListener('DOMContentLoaded', function() {

    // 1. TRACK CTA BUTTON CLICKS
    // "Try Risk-Free" buttons
    document.querySelectorAll('a[href="#pricing"], .cta-header').forEach(function(btn) {
      btn.addEventListener('click', function() {
        trackEvent('cta_click', {
          button_text: this.textContent.trim(),
          button_location: this.classList.contains('cta-header') ? 'header' : 'page',
          link_url: this.href
        });
      });
    });

    // 2. TRACK PRICING PLAN SELECTIONS
    // PayPal forms
    document.querySelectorAll('form[action*="paypal"]').forEach(function(form) {
      form.addEventListener('submit', function() {
        const submitBtn = this.querySelector('input[type="submit"]');
        const planName = submitBtn && submitBtn.value || 'Unknown Plan';
        trackEvent('select_plan', {
          plan_name: planName,
          payment_method: 'paypal'
        });
      });
    });

    // Lemon Squeezy / Card payment links
    document.querySelectorAll('a[href*="lemonsqueezy"], .btn-primary[href*="pricing"]').forEach(function(link) {
      link.addEventListener('click', function() {
        trackEvent('select_plan', {
          plan_name: this.textContent.trim(),
          payment_method: 'card'
        });
      });
    });

    // 3. FAQ COLLAPSIBLE + TRACKING
    document.querySelectorAll('#faq .card').forEach(function(card, index) {
      // Mark first 3 as expanded initially
      if (index < 3) {
        card.classList.add('expanded');
      }

      // Toggle function
      function toggleFAQ() {
        // Toggle expanded class
        card.classList.toggle('expanded');
        const isExpanded = card.classList.contains('expanded');

        // Update ARIA attribute for accessibility
        card.setAttribute('aria-expanded', isExpanded);

        const strongEl = card.querySelector('strong');
        const question = strongEl && strongEl.textContent || 'FAQ ' + (index + 1);

        trackEvent('faq_interaction', {
          question_number: index + 1,
          question_text: question.substring(0, 100) // Limit to 100 chars
        });
      }

      // Click handler
      card.addEventListener('click', toggleFAQ);

      // Keyboard support (Enter and Space)
      card.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleFAQ();
        }
      });
    });

    // 4. TRACK SCROLL DEPTH
    let scrollDepths = { 25: false, 50: false, 75: false, 100: false };

    window.addEventListener('scroll', function() {
      try {
        const scrollPercent = Math.round((window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100);

        Object.keys(scrollDepths).forEach(function(depth) {
          if (scrollPercent >= depth && !scrollDepths[depth]) {
            scrollDepths[depth] = true;
            trackEvent('scroll_depth', {
              percent: depth + '%'
            });
          }
        });
      } catch(e) {
        // Silently fail
      }
    }, { passive: true });

    // 5. TRACK NAVIGATION DROPDOWN INTERACTIONS
    const resourcesDropdown = document.querySelector('.nav-dropdown-toggle');
    if (resourcesDropdown) {
      resourcesDropdown.addEventListener('click', function() {
        trackEvent('dropdown_open', {
          dropdown_name: 'resources'
        });
      });
    }

    // Track dropdown link clicks
    document.querySelectorAll('.nav-dropdown-menu a').forEach(function(link) {
      link.addEventListener('click', function() {
        trackEvent('navigation_click', {
          link_text: this.textContent.trim(),
          link_url: this.href,
          dropdown: 'resources'
        });
      });
    });

    // 6. TRACK THEME TOGGLE
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
      themeToggle.addEventListener('click', function() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        trackEvent('theme_toggle', {
          from_theme: currentTheme,
          to_theme: newTheme
        });
      });
    }

    // 8. TRACK VIDEO PLAYS
    const heroVideo = document.getElementById('heroVideo');
    if (heroVideo) {
      let videoPlayed = false;
      heroVideo.addEventListener('play', function() {
        if (!videoPlayed) {
          videoPlayed = true;
          trackEvent('video_play', {
            video_id: 'hero_video',
            video_location: 'hero_section'
          });
        }
      });
    }

    // 9. TRACK EXTERNAL LINKS
    document.querySelectorAll('a[target="_blank"]').forEach(function(link) {
      link.addEventListener('click', function() {
        trackEvent('outbound_link', {
          link_text: this.textContent.trim(),
          link_url: this.href,
          link_domain: new URL(this.href).hostname
        });
      });
    });

    // 10. TRACK EMAIL/SUPPORT LINKS
    document.querySelectorAll('a[href^="mailto:"]').forEach(function(link) {
      link.addEventListener('click', function() {
        trackEvent('email_click', {
          email_address: this.href.replace('mailto:', '')
        });
      });
    });
  });
})();
</script>

<!-- Dynamic Lifetime Pricing System -->
<script>
(function() {
  'use strict';

  // Configuration: Define pricing tiers
  const PRICING_TIERS = [
    { min: 0, max: 50, price: 1799, name: 'Tier 1' },
    { min: 51, max: 150, price: 2499, name: 'Tier 2' },
    { min: 151, max: 350, price: 3499, name: 'Tier 3' },
    { min: 351, max: Infinity, price: null, name: 'Removed' }
  ];

  const TOTAL_SLOTS = 350;

  // Manual update: Change this number when you make a sale
  let currentSalesCount = 0; // UPDATE THIS MANUALLY FOR NOW

  // DOM Elements
  const elements = {
    progressFill: document.getElementById('lifetime-progress-fill'),
    progressText: document.getElementById('lifetime-progress-text'),
    currentPrice: document.getElementById('lifetime-current-price'),
    nextPrice: document.getElementById('lifetime-next-price'),
    slotsRemaining: document.getElementById('lifetime-slots-remaining'),
    displayPrice: document.getElementById('lifetime-display-price'),
    buyButton: document.getElementById('lifetime-buy-button')
  };

  // Get current tier based on sales count
  function getCurrentTier(salesCount) {
    return PRICING_TIERS.find(tier => salesCount >= tier.min && salesCount <= tier.max);
  }

  // Get next tier
  function getNextTier(currentTier) {
    const currentIndex = PRICING_TIERS.indexOf(currentTier);
    return PRICING_TIERS[currentIndex + 1] || null;
  }

  // Update UI with current pricing data
  function updatePricingUI(salesCount) {
    const currentTier = getCurrentTier(salesCount);
    const nextTier = getNextTier(currentTier);

    if (!currentTier) return;

    // Calculate progress percentage
    const progressPercent = Math.min((salesCount / TOTAL_SLOTS) * 100, 100);

    // Calculate slots remaining in current tier
    const slotsRemainingInTier = currentTier.max - salesCount;

    // Update UI elements
    if (elements.progressFill) {
      elements.progressFill.style.width = progressPercent + '%';
    }

    if (elements.progressText) {
      elements.progressText.innerHTML = `<strong style="color:#fff">${salesCount} of ${TOTAL_SLOTS}</strong> founding member slots claimed`;
    }

    if (elements.currentPrice && currentTier.price) {
      elements.currentPrice.textContent = `$${currentTier.price.toLocaleString()}`;
    }

    if (elements.displayPrice && currentTier.price) {
      elements.displayPrice.textContent = `$${currentTier.price.toLocaleString()}`;
    }

    if (elements.buyButton && currentTier.price) {
      elements.buyButton.value = `Купить сейчас - $${currentTier.price.toLocaleString()}`;
    }

    if (nextTier && nextTier.price) {
      if (elements.nextPrice) {
        elements.nextPrice.textContent = `$${nextTier.price.toLocaleString()}`;
      }
      if (elements.slotsRemaining) {
        elements.slotsRemaining.textContent = slotsRemainingInTier;
      }
    } else {
      // Last tier or removed
      if (elements.nextPrice) {
        elements.nextPrice.textContent = 'УДАЛЕНО';
      }
      if (elements.slotsRemaining) {
        elements.slotsRemaining.textContent = slotsRemainingInTier;
      }
    }
  }

  // Optional: Fetch from API (implement this later)
  async function fetchLifetimeSalesCount() {
    try {
      // Replace with your actual API endpoint
      const response = await fetch('/api/lifetime-slots-remaining');
      const data = await response.json();
      return data.sales_count || currentSalesCount;
    } catch (error) {
      console.warn('⚠️ API not available, using manual count:', currentSalesCount);
      return currentSalesCount;
    }
  }

  // Initialize pricing on page load
  async function init() {
    // Try to fetch from API, fallback to manual count
    const salesCount = await fetchLifetimeSalesCount();
    updatePricingUI(salesCount);

    // Optional: Auto-refresh every 60 seconds
    // setInterval(async () => {
    //   const updatedCount = await fetchLifetimeSalesCount();
    //   updatePricingUI(updatedCount);
    // }, 60000);
  }

  // Run on page load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

  // Export function for manual updates (from browser console)
  window.updateLifetimePricing = function(newSalesCount) {
    currentSalesCount = newSalesCount;
    updatePricingUI(newSalesCount);
  };
})();
</script>

<!-- Global Lazy Loading Fix - Preload images aggressively -->
<script>
(function() {
  'use strict';

  // Fix lazy loading issues when scrolling fast
  if ('IntersectionObserver' in window) {
    const lazyImages = document.querySelectorAll('img[loading="lazy"]');

    // Create observer with large margin to preload before visible
    const globalImageObserver = new IntersectionObserver((entries) => {
      try {
        entries.forEach(entry => {
          if (entry.isIntersecting || entry.intersectionRatio > 0) {
            const img = entry.target;

            // Remove lazy loading to force immediate load
            img.removeAttribute('loading');

            // If using data-src pattern, load it
            if (img.dataset.src && !img.src) {
              img.src = img.dataset.src;
            }

            // Stop observing once loaded
            globalImageObserver.unobserve(img);
          }
        });
      } catch(e) {
        // Silently handle image loading errors
      }
    }, {
      root: null,
      rootMargin: '1000px', // Very large margin - preload well before visible
      threshold: 0
    });

    // Observe all lazy images
    lazyImages.forEach(img => {
      globalImageObserver.observe(img);
    });
  } else {
    // Fallback: remove lazy loading from all images
    document.querySelectorAll('img[loading="lazy"]').forEach(img => {
      img.removeAttribute('loading');
    });
  }
})();
</script>

<!-- Cookie Consent System - Re-enabled after finding real issue (PayPal rendering) -->
<script src="/assets/cookie-consent.js"></script>

<!-- AI Chatbot - Re-enabled after finding real issue (PayPal rendering) -->
<script src="/assets/chatbot.js" defer></script>

<!-- Device Optimization System DISABLED - FPS detection was breaking mobile rendering -->
<!-- TODO: Re-implement without FPS detection that sets data-capability="low" -->
<!--
<script src="/assets/device-optimizations.js" defer></script>
-->

<!-- Section Lazy Loading DISABLED - Causing mobile rendering issues -->
<!-- TODO: Re-implement lazy loading properly after fixing mobile issues -->
<!--
<script>
(function() {
  'use strict';
  // Lazy loading disabled - all sections load immediately
})();
</script>
-->

<!-- Cookie Consent Banner - Re-enabled after fixing scroll issue -->
<div id="cookie-consent-banner">
  <div class="cookie-consent-container">
    <div class="cookie-consent-text">
      <h3>🍪 Файлы cookie</h3>
      <p>
        Мы используем аналитические файлы cookie (Clarity и GA4) для улучшения вашего опыта. <a href="/ru/privacy.html">Политика конфиденциальности</a>
      </p>
    </div>
    <div class="cookie-consent-actions">
      <button id="cookie-accept-all" class="cookie-consent-btn cookie-consent-btn-accept">Принять</button>
      <button id="cookie-decline-all" class="cookie-consent-btn cookie-consent-btn-decline">Отклонить</button>
      <button id="cookie-settings" class="cookie-consent-btn cookie-consent-btn-settings">Настройки</button>
    </div>
  </div>
</div>

<!-- Cookie Preferences Modal -->
<div id="cookie-preferences-modal">
  <div class="cookie-preferences-content">
    <div class="cookie-preferences-header">
      <h2>Настройки файлов cookie</h2>
      <button id="cookie-preferences-close" class="cookie-preferences-close" aria-label="Закрыть">&times;</button>
    </div>

    <div class="cookie-preferences-body">
      <div class="cookie-category">
        <div class="cookie-category-header">
          <h3 class="cookie-category-title">
            Обязательные файлы cookie
            <span class="cookie-category-badge badge-required">Требуется</span>
          </h3>
          <label class="cookie-toggle">
            <input type="checkbox" checked disabled>
            <span class="cookie-toggle-slider"></span>
          </label>
        </div>
        <p class="cookie-category-description">
          Эти файлы cookie необходимы для работы сайта и не могут быть отключены. Они включают управление сеансами, обработку платежей и функции безопасности.
        </p>
      </div>

      <div class="cookie-category">
        <div class="cookie-category-header">
          <h3 class="cookie-category-title">Аналитические файлы cookie</h3>
          <label class="cookie-toggle">
            <input type="checkbox" id="analytics-toggle">
            <span class="cookie-toggle-slider"></span>
          </label>
        </div>
        <p class="cookie-category-description">
          Мы используем Microsoft Clarity и Google Analytics, чтобы понять, как посетители взаимодействуют с нашим сайтом. Это помогает нам улучшить ваш опыт. Эти файлы cookie собирают анонимные данные, включая просмотры страниц, время, проведенное на сайте, и модели навигации.
        </p>
      </div>
    </div>

    <div class="cookie-preferences-footer">
      <button id="cookie-cancel-preferences" class="cookie-consent-btn cookie-consent-btn-decline">Отмена</button>
      <button id="cookie-save-preferences" class="cookie-consent-btn cookie-consent-btn-accept">Сохранить настройки</button>
    </div>
  </div>
</div>

<!-- Trial Form Handler -->
<script>
(function() {
  'use strict';

  const trialForm = document.getElementById('trialForm');
  const trialSuccess = document.getElementById('trialSuccess');
  const formLoadTime = Date.now();

  if (trialForm) {
    trialForm.addEventListener('submit', async function(e) {
      e.preventDefault();

      const submitBtn = trialForm.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.textContent = 'Обработка...';

      // Anti-spam: Check honeypot field
      const honeypot = document.getElementById('website');
      if (honeypot && honeypot.value !== '') {
        console.log('Spam detected: honeypot filled');
        return; // Silent fail for bots
      }

      // Anti-spam: Check submission time (bots submit too fast)
      const timeSinceLoad = Date.now() - formLoadTime;
      if (timeSinceLoad < 2000) {
        console.log('Spam detected: too fast');
        return; // Silent fail for bots
      }

      const email = document.getElementById('trialEmail').value.trim();
      const tvUsername = document.getElementById('trialTvUsername').value.trim();

      // Validate required fields
      if (!email || !tvUsername) {
        alert('Пожалуйста, заполните все обязательные поля');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
        return;
      }

      // Validate email format
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Пожалуйста, введите действительный адрес электронной почты');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
        return;
      }

      const formData = {
        email: email,
        tradingview_username: tvUsername,
        consent: document.getElementById('trialConsent').checked,
        timestamp: new Date().toISOString(),
        source: 'website_trial_form'
      };

      try {
        // Send to your backend endpoint (you'll need to set this up)
        // For now, we'll use a simple webhook or email service
        const response = await fetch('https://hook.eu1.make.com/7klx329gnfpknko32nubiu43nadwoouz', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData)
        });

        if (response.ok) {
          // Hide form, show success message
          trialForm.style.display = 'none';
          trialSuccess.style.display = 'block';

          // Optional: Track conversion
          if (typeof gtag !== 'undefined') {
            gtag('event', 'trial_signup', {
              event_category: 'engagement',
              event_label: 'free_trial'
            });
          }
        } else {
          throw new Error('Submission failed');
        }
      } catch (error) {
        console.error('Trial signup error:', error);
        alert('Что-то пошло не так. Пожалуйста, попробуйте снова или напишите на support@signalpilot.io');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });
  }

  // Newsletter signup handler
  const footerNewsletterBtn = document.getElementById('footerNewsletterBtn');
  const footerNewsletterEmail = document.getElementById('footerNewsletterEmail');

  if (footerNewsletterBtn && footerNewsletterEmail) {
    footerNewsletterBtn.addEventListener('click', async function() {
      const email = footerNewsletterEmail.value.trim();

      // Basic email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!email || !emailRegex.test(email)) {
        alert('Пожалуйста, введите действительный адрес электронной почты');
        footerNewsletterEmail.focus();
        return;
      }

      const originalText = footerNewsletterBtn.textContent;
      footerNewsletterBtn.disabled = true;
      footerNewsletterBtn.textContent = 'Подписка...';

      try {
        // For now, show success message
        // TODO: Connect to newsletter service (ConvertKit, Mailchimp, etc.)

        // Simulate API call
        await new Promise(resolve => setTimeout(resolve, 800));

        // Show success
        footerNewsletterEmail.value = '';
        footerNewsletterBtn.textContent = '✓ Подписано!';
        footerNewsletterBtn.style.background = 'var(--good)';

        // Optional: Track conversion
        if (typeof gtag !== 'undefined') {
          gtag('event', 'newsletter_signup', {
            event_category: 'engagement',
            event_label: 'footer_newsletter'
          });
        }

        // Reset button after 3 seconds
        setTimeout(() => {
          footerNewsletterBtn.textContent = originalText;
          footerNewsletterBtn.disabled = false;
          footerNewsletterBtn.style.background = '';
        }, 3000);

      } catch (error) {
        console.error('Newsletter signup error:', error);
        alert('Что-то пошло не так. Пожалуйста, попробуйте снова или напишите на support@signalpilot.io');
        footerNewsletterBtn.disabled = false;
        footerNewsletterBtn.textContent = originalText;
      }
    });

    // Allow Enter key to submit
    footerNewsletterEmail.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        footerNewsletterBtn.click();
      }
    });
  }
})();
</script>

<style>
  /* Affiliate Elements Responsive Optimization */

  /* Affiliate Banner Section - Mobile */
  @media (max-width: 768px) {
    #affiliate-banner .card {
      padding: 1.5rem 1rem !important;
    }
    #affiliate-banner h2 {
      font-size: 1.5rem !important;
    }
    #affiliate-banner p {
      font-size: 1rem !important;
    }
    #affiliate-banner .btn {
      width: 100%;
      justify-content: center;
    }
  }

  /* Tablet Optimization */
  @media (min-width: 641px) and (max-width: 1024px) {
    #affiliate-banner h2 {
      font-size: 2rem !important;
    }
  }

</style>

<script>
// Scroll-triggered animations and stats counter
(function() {
  'use strict';

  // Add scroll animation classes to key sections
  function initScrollAnimations() {
    // Detect mobile for performance optimizations
    const isMobile = window.innerWidth <= 768;

    // Add CSS for scroll animations
    const style = document.createElement('style');
    // Reduce animation distance on mobile
    const distance = isMobile ? '20px' : '30px';
    style.textContent = `
      .scroll-fade-in {
        opacity: 0;
        transform: translateY(${distance});
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .scroll-fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .scroll-fade-in-left {
        opacity: 0;
        transform: translateX(-${distance});
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .scroll-fade-in-left.visible {
        opacity: 1;
        transform: translateX(0);
      }
      .scroll-fade-in-right {
        opacity: 0;
        transform: translateX(${distance});
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .scroll-fade-in-right.visible {
        opacity: 1;
        transform: translateX(0);
      }
    `;
    document.head.appendChild(style);

    // Add animation classes to pricing cards
    const pricingCards = document.querySelectorAll('.pricing-grid .card.plan');
    pricingCards.forEach((card, i) => {
      if (i === 0) card.classList.add('scroll-fade-in-left');
      else if (i === 2) card.classList.add('scroll-fade-in-right');
      else card.classList.add('scroll-fade-in');
    });

    // Add animation classes to indicator cards
    const indicatorCards = document.querySelectorAll('.card.product');
    indicatorCards.forEach(card => card.classList.add('scroll-fade-in'));

    // Intersection Observer for scroll animations
    // Use lower threshold on mobile for better performance
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          // Trigger stats counter if this is a pricing section
          if (entry.target.classList.contains('plan') && !entry.target.dataset.counted) {
            entry.target.dataset.counted = 'true';
          }
        }
      });
    }, {
      threshold: isMobile ? 0.05 : 0.1,
      rootMargin: isMobile ? '0px 0px -20px 0px' : '0px 0px -50px 0px'
    });

    // Observe all animated elements
    document.querySelectorAll('.scroll-fade-in, .scroll-fade-in-left, .scroll-fade-in-right').forEach(el => {
      observer.observe(el);
    });
  }

  // Stats counter animation
  function initStatsCounter() {
    const statElements = document.querySelectorAll('.stat-value, .price');

    function animateNumber(element) {
      const text = element.textContent.trim();
      const match = text.match(/(\$)?(\d+(?:,\d+)?)/);

      if (!match) return;

      const prefix = match[1] || '';
      const numberStr = match[2].replace(/,/g, '');
      const target = parseInt(numberStr);
      const suffix = text.replace(match[0], '').trim();

      if (isNaN(target) || target < 10) return;

      let current = 0;
      const increment = Math.ceil(target / 50);
      const duration = 1000;
      const stepTime = duration / 50;

      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          current = target;
          clearInterval(timer);
        }

        const formattedNumber = current.toLocaleString();
        element.textContent = prefix + formattedNumber + (suffix ? ' ' + suffix : '');
      }, stepTime);
    }

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !entry.target.dataset.animated) {
          entry.target.dataset.animated = 'true';
          setTimeout(() => animateNumber(entry.target), 200);
        }
      });
    }, {
      threshold: 0.5
    });

    statElements.forEach(el => observer.observe(el));
  }

  // Initialize on DOMContentLoaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      initScrollAnimations();
      initStatsCounter();
      initLightbox();
      initParallax();
      initTypingEffect();
      initScrollProgress();
    });
  } else {
    initScrollAnimations();
    initStatsCounter();
    initLightbox();
    initParallax();
    initTypingEffect();
    initScrollProgress();
  }

  // Scroll progress indicator
  function initScrollProgress() {
    const progressBar = document.querySelector('.scroll-progress');
    if (!progressBar) return;

    // Force visibility
    progressBar.style.display = 'block';
    progressBar.style.position = 'fixed';
    progressBar.style.top = '0';
    progressBar.style.left = '0';
    progressBar.style.zIndex = '10000';

    let ticking = false;

    function updateProgress() {
      const windowHeight = window.innerHeight || document.documentElement.clientHeight;
      // Use Math.max for better mobile compatibility
      const documentHeight = Math.max(
        document.documentElement.scrollHeight,
        document.body.scrollHeight
      );
      const scrollTop = window.pageYOffset || window.scrollY || document.documentElement.scrollTop || document.body.scrollTop || 0;

      // Calculate scroll percentage
      const scrollable = documentHeight - windowHeight;
      const scrolled = scrollable > 0 ? (scrollTop / scrollable) * 100 : 0;

      progressBar.style.width = Math.min(Math.max(scrolled, 0), 100) + '%';

      ticking = false;
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(updateProgress);
        ticking = true;
      }
    }

    window.addEventListener('scroll', requestTick, { passive: true });
    window.addEventListener('resize', requestTick, { passive: true });
    // For iOS Safari elastic scrolling
    window.addEventListener('touchmove', requestTick, { passive: true });

    // Initial update with delay for mobile
    updateProgress();
    setTimeout(updateProgress, 100);
  }

  // Typing animation for hero headline
  function initTypingEffect() {
    const textElement = document.getElementById('typed-text');
    if (!textElement) return;

    const words = [
      'серьёзных трейдеров',
      'дневных трейдеров',
      'свинг-трейдеров',
      'скальперов',
      'позиционных трейдеров',
      'всех трейдеров'
    ];

    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let typingSpeed = 100;

    function type() {
      const currentWord = words[wordIndex];

      if (isDeleting) {
        // Delete character
        textElement.textContent = currentWord.substring(0, charIndex - 1);
        charIndex--;
        typingSpeed = 50;
      } else {
        // Add character
        textElement.textContent = currentWord.substring(0, charIndex + 1);
        charIndex++;
        typingSpeed = 100;
      }

      // If word is complete
      if (!isDeleting && charIndex === currentWord.length) {
        // Pause at end of word
        typingSpeed = 2000;
        isDeleting = true;
      } else if (isDeleting && charIndex === 0) {
        // Move to next word
        isDeleting = false;
        wordIndex = (wordIndex + 1) % words.length;
        typingSpeed = 500;
      }

      setTimeout(type, typingSpeed);
    }

    // Start typing after a brief delay
    setTimeout(type, 1000);
  }

  // Parallax scroll effect for gradient orbs
  function initParallax() {
    const orb1 = document.getElementById('parallax-orb-1');
    const orb2 = document.getElementById('parallax-orb-2');

    if (!orb1 || !orb2) return;

    // Disable parallax on mobile for performance
    const isMobile = window.innerWidth <= 768;
    if (isMobile) return;

    let ticking = false;

    function updateParallax() {
      const scrolled = window.pageYOffset;

      // Move orb1 at 0.3x speed downward
      const orb1Offset = scrolled * 0.3;
      orb1.style.transform = `translateY(${orb1Offset}px)`;

      // Move orb2 at 0.5x speed downward (different speed for depth)
      const orb2Offset = scrolled * 0.5;
      orb2.style.transform = `translateY(${orb2Offset}px)`;

      ticking = false;
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(updateParallax);
        ticking = true;
      }
    }

    // Listen to scroll with requestAnimationFrame for performance
    window.addEventListener('scroll', requestTick, { passive: true });

    // Initial position
    updateParallax();
  }

  // Lightbox for indicator images
  function initLightbox() {
    // Create lightbox container
    const lightbox = document.createElement('div');
    lightbox.className = 'lightbox-overlay';
    lightbox.innerHTML = `
      <div class="lightbox-content">
        <button class="lightbox-close" aria-label="Закрыть лайтбокс">×</button>
        <img src="" alt="">
      </div>
    `;
    document.body.appendChild(lightbox);

    const lightboxImg = lightbox.querySelector('img');
    const closeBtn = lightbox.querySelector('.lightbox-close');

    // Make all indicator images clickable
    const indicatorImages = document.querySelectorAll('.indicator-screenshot');
    indicatorImages.forEach(img => {
      // Only if image has actual src (not placeholder)
      if (img.src && !img.src.includes('data:image') && img.offsetParent !== null) {
        img.style.cursor = 'pointer';
        img.addEventListener('click', () => {
          lightboxImg.src = img.src;
          lightboxImg.alt = img.alt || 'Indicator preview';
          lightbox.classList.add('active');
          document.body.style.overflow = 'hidden';
        });
      }
    });

    // Close lightbox on click outside, close button, or ESC key
    closeBtn.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && lightbox.classList.contains('active')) {
        closeLightbox();
      }
    });

    function closeLightbox() {
      lightbox.classList.remove('active');
      document.body.style.overflow = '';
    }
  }
})();
</script>

<script>
  // Typewriter animation for pricing subheading
  (function() {
    const words = ['трейдеров по всему миру', 'серьёзных инвесторов', 'профессионалов', 'трейдеров как вы'];
    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    const typewriterElement = document.querySelector('.typewriter-pricing');

    if (!typewriterElement) return;

    function type() {
      const currentWord = words[wordIndex];

      if (isDeleting) {
        typewriterElement.textContent = currentWord.substring(0, charIndex - 1);
        charIndex--;
      } else {
        typewriterElement.textContent = currentWord.substring(0, charIndex + 1);
        charIndex++;
      }

      let typeSpeed = isDeleting ? 50 : 100;

      if (!isDeleting && charIndex === currentWord.length) {
        typeSpeed = 2000; // Pause at end
        isDeleting = true;
      } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        wordIndex = (wordIndex + 1) % words.length;
        typeSpeed = 500; // Pause before next word
      }

      setTimeout(type, typeSpeed);
    }

    type();
  })();

  // Typewriter animation for footer
  (function() {
    const words = ['трейдеров', 'инвесторов', 'профессионалов', 'вас'];
    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    const typewriterElement = document.querySelector('.typewriter-footer');

    if (!typewriterElement) return;

    function type() {
      const currentWord = words[wordIndex];

      if (isDeleting) {
        typewriterElement.textContent = currentWord.substring(0, charIndex - 1);
        charIndex--;
      } else {
        typewriterElement.textContent = currentWord.substring(0, charIndex + 1);
        charIndex++;
      }

      let typeSpeed = isDeleting ? 50 : 100;

      if (!isDeleting && charIndex === currentWord.length) {
        typeSpeed = 2000; // Pause at end
        isDeleting = true;
      } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        wordIndex = (wordIndex + 1) % words.length;
        typeSpeed = 500; // Pause before next word
      }

      setTimeout(type, typeSpeed);
    }

    type();
  })();

  // Form field validation with success checkmarks
  (function() {
    const inputs = ['tv-monthly', 'tv-yearly', 'tv-lifetime'];

    inputs.forEach(id => {
      const input = document.getElementById(id);
      if (!input) return;

      input.addEventListener('input', function() {
        const value = this.value.trim();
        // Valid if at least 3 characters
        if (value.length >= 3) {
          this.classList.add('valid');
        } else {
          this.classList.remove('valid');
        }
      });

      // Also check on blur
      input.addEventListener('blur', function() {
        const value = this.value.trim();
        if (value.length >= 3) {
          this.classList.add('valid');
        }
      });
    });
  })();

  // Loading states for payment buttons
  (function() {
    const paymentButtons = [
      'btn-monthly-paypal',
      'btn-yearly-paypal',
      'btn-lifetime-paypal'
    ];

    paymentButtons.forEach(id => {
      const btn = document.getElementById(id);
      if (!btn) return;

      btn.addEventListener('click', function() {
        // Add loading state
        this.classList.add('btn-loading');
        const originalText = this.innerHTML;
        this.innerHTML = '⏳ Обработка...';

        // Remove loading state after 5 seconds (fallback)
        setTimeout(() => {
          this.classList.remove('btn-loading');
          this.innerHTML = originalText;
        }, 5000);
      });
    });
  })();

  // Animated number count-ups on scroll into view
  (function() {
    // Text numbers for word-based counting
    const textNumbers = ['Zero', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten'];

    // Quality progression sequences
    const qualityProgressions = {
      'elite': ['basic', 'good', 'great', 'premium', 'Elite'],
      'professional': ['beginner', 'intermediate', 'advanced', 'Professional'],
      'premium': ['standard', 'enhanced', 'superior', 'Premium']
    };

    function animateNumber(element, start, end, duration) {
      const range = end - start;
      const increment = range / (duration / 16); // 60fps
      let current = start;

      const timer = setInterval(() => {
        current += increment;
        if (current >= end) {
          element.textContent = end;
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(current);
        }
      }, 16);
    }

    // Intersection Observer to trigger animations
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !entry.target.classList.contains('animated')) {
          entry.target.classList.add('animated');
          const targetNumber = parseInt(entry.target.getAttribute('data-count'));
          const prefix = entry.target.getAttribute('data-prefix') || '';
          const suffix = entry.target.getAttribute('data-suffix') || '';
          const useTextMode = entry.target.hasAttribute('data-text-mode');
          const qualityType = entry.target.getAttribute('data-quality');

          // Quality progression animation
          if (qualityType && qualityProgressions[qualityType]) {
            const sequence = qualityProgressions[qualityType];
            let currentIndex = 0;

            const animateSequence = () => {
              if (currentIndex < sequence.length) {
                entry.target.textContent = sequence[currentIndex];

                // Faster progression through early stages, stop at final word
                const isLastItem = currentIndex === sequence.length - 1;
                const delay = isLastItem ? 0 : 180; // 180ms for each step, stop at last

                currentIndex++;
                if (!isLastItem) {
                  setTimeout(animateSequence, delay);
                }
              }
            };

            animateSequence();
            return;
          }

          // Skip animation for text mode - just show final value
          if (useTextMode) {
            const finalValue = targetNumber <= 10 ? textNumbers[targetNumber] : targetNumber;
            entry.target.textContent = prefix + finalValue + suffix;
            return;
          }

          // Animate with prefix/suffix support (only for non-text-mode)
          const tempContent = entry.target.textContent;
          const range = targetNumber;
          const increment = range / 90; // 1.5 seconds at 60fps
          let current = 0;

          const timer = setInterval(() => {
            current += increment;
            if (current >= targetNumber) {
              entry.target.textContent = prefix + targetNumber + suffix;
              clearInterval(timer);
            } else {
              const currentValue = Math.floor(current);
              entry.target.textContent = prefix + currentValue + suffix;
            }
          }, 16);
        }
      });
    }, { threshold: 0.3 });

    // Auto-detect and animate numbers on page load
    setTimeout(() => {
      // Find all text containing common numbers and wrap them
      const numbersToAnimate = [
        { text: '82', selector: 'contains "82"' },
        { text: '7', selector: 'contains " 7 "' },
        { text: '489', selector: 'contains "489"' },
        { text: '350', selector: 'contains "350"' },
        { text: '10', selector: 'contains " 10 "' },
        { text: '4', selector: 'contains " 4 "' }
      ];

      // Manually observe specific elements we know exist
      document.querySelectorAll('[data-count]').forEach(el => {
        observer.observe(el);
      });

      // Observe quality progression elements
      document.querySelectorAll('[data-quality]').forEach(el => {
        observer.observe(el);
      });
    }, 100);
  })();
</script>

<!-- Back to Top Button -->
<button id="backToTop" aria-label="Вернуться наверх" title="Вернуться наверх">↑</button>

<script>
  // Back to top button functionality
  (function() {
    const backToTopBtn = document.getElementById('backToTop');

    // Force sticky positioning with inline styles
    backToTopBtn.style.position = 'fixed';
    backToTopBtn.style.bottom = '160px';
    backToTopBtn.style.right = '20px';
    backToTopBtn.style.zIndex = '998';

    // Show button when user scrolls down 400px
    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 400) {
        backToTopBtn.classList.add('show');
      } else {
        backToTopBtn.classList.remove('show');
      }
    });

    // Scroll to top when clicked
    backToTopBtn.addEventListener('click', function() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  })();
</script>

<!-- Scroll Reveal Animations - Premium scroll-into-view effects -->
<script src="/assets/scroll-reveal.js" defer></script>

<!-- Horizontal Scroll - Apple-style horizontal scroll -->
<script src="/assets/horizontal-scroll.js" defer></script>

</body>

</html>
